{"version":3,"sources":["img/home.png","core/api/home.js","core/api/rating.js","core/api/Api.js","redux/actions/level.js","redux/actions/modal.js","panels/Home.js","panels/Begin.js","modals/Modal.js","modals/AreAtHome.js","modals/NotAllowLocation.js","modals/NotAllowMessages.js","modals/Reward.js","modals/Skipped.js","modals/NotHome.js","modals/NoGeodata.js","panels/Level.js","panels/Rating.js","App.js","redux/reducers/index.js","redux/reducers/modal.js","redux/reducers/level.js","redux/index.js","index.js"],"names":["module","exports","api","home","begin","body","handler","post","method","level","uid","request","confirm","lat","long","params","Object","entries","map","key","val","join","rating","global","config","tag","options","fetch","abort","keys","k","encodeURIComponent","then","response","ok","json","text","console","error","url","substr","catch","assign","JSON","stringify","forEach","a","updateLevel","Promise","resolve","reject","type","openModal","activeModal","modalParams","Home","props","state","id","this","size","React","Component","connect","ownProps","Begin","className","src","homePng","alt","onClick","start","MODAL_REWARD","MODAL_SKIPPED","MODAL_NOT_HOME","MODAL_NO_GEODATA","Modal","onOpenModal","setActiveModal","MODAL_ARE_AT_HOME","modalClose","permission","onClose","close","icon","header","caption","actions","title","mode","action","MODAL_NOT_ALLOW_LOCATION","NotAllowLocation","MODAL_NOT_ALLOW_MESSAGES","NotAllowMessages","value","Reward","Skipped","NotHome","NoGeodata","modal","dispatch","Level","bridge","send","data","Api","fetchedUser","afterConfirm","onLevelUpdate","result","parseInt","status","check","style","color","city","left","noGeodata","before","right","navigate","photo_200","description","levelName","first_name","last_name","checks","length","confirmed","textAlign","check_id","statusOfCheckIcon","sended","statusOfCheck","fontWeight","osName","platform","Rating","isLoading","table","setState","IOS","expandable","friend","App","activePanel","user","locationPermissionCount","e","currentTarget","dataset","to","setUser","geodata","group_id","available","this_","subscribe","detail","schemeAttribute","document","createAttribute","scheme","attributes","setNamedItem","fetchData","appReducer","combineReducers","rootReducer","persistConfig","storage","persistedReducer","persistReducer","store","createStore","persistor","persistStore","ReactDOM","render","loading","getElementById"],"mappings":"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","file":"static/js/main.3ca3bc88.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home.09715b70.png\";","/**\n *\n */\n\nconst api = {home: {\n  /**\n   * Список регионов России или стран\n   * @param {Object} body данные пользователя с координатами дома\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin: (body, handler) => {\n    return api.post({method: 'home/begin', body: body, handler: handler});\n  },\n\n  /**\n   * Получает уровень\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  level: (uid, handler) => {\n    return api.request({method: 'home/level?uid='+uid, handler: handler});\n  },\n\n  /**\n   * Подтвердить нахождение дома\n   * @param {Integer} uid ид. пользователя\n   * @param {Float} lat\n   * @param {Float} long\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  confirm: (uid, lat, long, handler) => {\n    let params = {uid: uid};\n\n    if(lat) {\n      params.lat = lat;\n      params.long = long;\n    }\n\n    return api.request({method: 'home/confirm?'+Object.entries(params).map(([key, val]) => `${key}=${val}`).join('&'), handler: handler});\n  },\n}};\n\nexport default api;\n","/**\n * Методы для работы с регионами\n */\n\nconst api = {rating: {\n  /**\n   * Рейтинг срежи всех\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  global: (handler) => {\n    return api.request({method: 'rating/global', handler: handler});\n  }\n}};\n\nexport default api;\n","/**\n * Работа с сервером\n */\nimport home from './home';\nimport rating from './rating';\n\nconst config = {\n  domain: //window.location.host != 'orlove.github.io' ? 'https://api.newsapp.me' :\n                                                       'https://rest-news.hozya.ru'\n};\n\nvar api = {\n  /**\n   * Запрос данных с сервера\n   * @param  {String}   method  api-метод\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  request: function ({method, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      params = '?'+params;\n    } else {\n      params = '';\n    }\n\n    return fetch(config.domain+'/'+method+params, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * POST-запросы\n   * @param  {String}   method  api-метод\n   * @param  {Object}   body    тело запроса\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  post: function ({method, body, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    options = Object.assign({\n      method: 'POST',\n      /*headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },*/\n      body: JSON.stringify(body)\n    }, options || {});\n\n    return fetch(config.domain+'/'+method, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * Отменяет запрос с ключем tag\n   * @param {mix} tag ключ запроса\n   */\n  abort: (tag) => {\n    fetch.abort(tag);\n  },\n  /**\n   * Список городов\n   * @param  {Function} handler обработчик ответа в случае успеха\n   */\n  /*cities: (handler) => {\n    return api.request({method: 'cities', handler: (response) => {\n      if(response.items) {\n        handler(response.items);\n      }\n    }});\n  }*/\n};\n\n// Сливаем каждый компонент с api\n[home, rating].forEach((a) => {\n  api = Object.assign(a, api);\n});\n\nexport default api;\n","/**\n * Действия связанные с балами\n */\n\n/**\n * Обновление балов\n *\n * @param  {Object} level\n * @return {Promise}\n */\nexport const updateLevel = (level) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'LEVEL_UPDATE',\n        level: level\n      });\n  });\n};\n","/**\n * Действия с модальными окнами\n */\n\n/**\n * Открыть модальное окно\n *\n * @param  {String} activeModal\n * @param  {Object} params\n * @return {Promise}\n */\nexport const openModal = (activeModal, modalParams) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'MODAL_OPEN',\n        activeModal: activeModal,\n        modalParams: modalParams\n      });\n  });\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, PanelHeader, Button, Group, Cell, Div, ScreenSpinner } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { openRegionsList } from '../redux/actions/region';__\n\nclass Home extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<ScreenSpinner size='large' />\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\t//world: state.world\n\t};\n};\n\n/*const mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenRegionsList: (world) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenRegionsList(world).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};*/\n\nexport default connect(mapStateToProps/*, mapDispatchToProps*/)(Home);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, PanelHeader, Button, Group, Cell, Div, View } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { openRegionsList } from '../redux/actions/region';\n\nimport homePng from '../img/home.png';\nimport '../styles/header.css';\nimport './Begin.css';\n\nclass Begin extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n\t// Открыть список областей или стран\n  /*openRegionsList = (world) => {\n    this.props.onOpenRegionsList(world).then(() => this.props.navigate('regions-list'));\n  };*/\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeader><b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b></PanelHeader>\n\t\t\t\t<Group>\n\t\t\t\t\t<img className=\"Home\" src={homePng} alt=\"Дом\" />\n\t\t\t\t\t<Div className=\"Explanation\">\n\t\t\t\t\t\tСейчас очень важно находится <b>дома</b>. Данное приложение начисляет балы за проведенное время дома. Демонстрируйте ответственное поведение личным примером!\n\t\t\t\t\t\tПосле принятия участия, наша группа будет отправлять вам уведомления. При получении такого сообщения, вам нужно перейти в приложение и подтвердить то, что вы находитесь дома (у приложения нет постоянного доступа к вашему местоположению, поэтому приходится подтверждать вручную).\n\t\t\t\t\t</Div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Button size=\"xl\" level=\"2\" onClick={() => {this.props.start()}}>Сейчас я дома, начать!</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\t//world: state.world\n\t};\n};\n\n/*const mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenRegionsList: (world) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenRegionsList(world).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};*/\n\nexport default connect(mapStateToProps/*, mapDispatchToProps*/)(Begin);\n","import React from 'react';\nimport { ModalRoot, ModalCard } from '@vkontakte/vkui';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { openModal } from '../redux/actions/modal';\n\nimport AreAtHome from './AreAtHome';\nimport NotAllowLocation from './NotAllowLocation';\nimport NotAllowMessages from './NotAllowMessages';\nimport Reward from './Reward';\nimport Skipped from './Skipped';\nimport NotHome from './NotHome';\nimport NoGeodata from './NoGeodata';\n\nexport const MODAL_ARE_AT_HOME = 'modal_are-at-home';\nexport const MODAL_NOT_ALLOW_MESSAGES = 'modal_not-allow-messages';\nexport const MODAL_NOT_ALLOW_LOCATION = 'modal_not-allow-location';\nexport const MODAL_REWARD = 'modal_reward';\nexport const MODAL_SKIPPED = 'modal_skipped';\nexport const MODAL_NOT_HOME = 'modal_not-home';\nexport const MODAL_NO_GEODATA = 'modal_no-geodata';\n\nclass Modal extends React.Component {\n\n  setActiveModal(activeModal) {\n    return this.props.onOpenModal(activeModal);\n  }\n\n  close() {\n    return this.setActiveModal(null);\n  }\n\n  render() {\n    return (\n      <ModalRoot\n        activeModal={this.props.activeModal || null}\n        onClose={this.close}\n      >\n        {AreAtHome(MODAL_ARE_AT_HOME, () => {this.close()}, this.props.permission)}\n        {NotAllowLocation(MODAL_NOT_ALLOW_LOCATION, () => {this.close()}, this.props.permission)}\n        {NotAllowMessages(MODAL_NOT_ALLOW_MESSAGES, () => {this.close()}, this.props.permission)}\n        {Reward(() => {this.close()}, this.props.modalParams)}\n        {Skipped(() => {this.close()})}\n        {NotHome(() => {this.close()})}\n        {NoGeodata(() => {this.close()})}\n      </ModalRoot>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn state.modal ? {\n    activeModal: state.modal.activeModal,\n    modalParams: state.modal.modalParams,\n  } : {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenModal: (activeModal) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport Icon28HomeOutline from '@vkontakte/icons/dist/28/home_outline';\n\nexport default (MODAL_ARE_AT_HOME, modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_ARE_AT_HOME}\n    onClose={() => modalClose()}\n    icon={<Icon28HomeOutline />}\n    header=\"Вы сейчас дома?\"\n    caption=\"Баллы будут начисляться только за нахождение там, где вы находитесь сейчас. Не забудьте разрешить геоданные.\"\n    actions={[{\n      title: 'Да, я дома',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport Icon28CompassOutline from '@vkontakte/icons/dist/28/compass_outline';\n\nexport default (MODAL_NOT_ALLOW_LOCATION, modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_LOCATION}\n    onClose={() => modalClose()}\n    icon={<Icon28CompassOutline />}\n    header=\"Вам нужно разрешить доступ к геопозиции\"\n    caption=\"Без данного разрешения приложение не сможет начислять вам баллы\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\n\nexport default (MODAL_NOT_ALLOW_MESSAGES, modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_MESSAGES}\n    onClose={() => modalClose()}\n    icon={<Icon28Messages />}\n    header=\"Вам нужно разрешить отправку сообщений\"\n    caption=\"Без данного разрешения приложение не сможет отправлять вам уведомления.\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_REWARD} from './Modal';\n\nimport Icon44SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_REWARD}\n    onClose={modalClose}\n    icon={<Icon44SmileOutline />}\n    header=\"Отметка подтверждена!\"\n    caption={modalParams ? 'Вам начислино '+modalParams.value+' баллов' : ''}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_SKIPPED} from './Modal';\n\nimport Icon56RecentOutline from '@vkontakte/icons/dist/56/recent_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_SKIPPED}\n    onClose={modalClose}\n    icon={<Icon56RecentOutline />}\n    header=\"Пропущено!\"\n    caption=\"К сожалению прошло больше 10 минут с момента отправки сообщения.\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_HOME} from './Modal';\n\nimport Icon28BlockOutline from '@vkontakte/icons/dist/28/block_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NOT_HOME}\n    onClose={modalClose}\n    icon={<Icon28BlockOutline />}\n    header=\"Вы покинули дом\"\n    caption=\"Пожалуйста, соблюдайте карантин.\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NO_GEODATA} from './Modal';\n\nimport Icon32Place from '@vkontakte/icons/dist/32/place';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NO_GEODATA}\n    onClose={modalClose}\n    icon={<Icon32Place />}\n    header=\"Нет доступа к местоположению\"\n    caption=\"Невозможно проверить соблюдение карантина\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { Panel, PanelHeader, PanelHeaderButton, Button, List, Group, Cell, Div, Avatar, Header } from '@vkontakte/vkui';\n\nimport { MODAL_REWARD, MODAL_SKIPPED, MODAL_NOT_HOME, MODAL_NO_GEODATA } from '../modals/Modal';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from '../redux/actions/level';\nimport { openModal } from '../redux/actions/modal';\n\n\nimport Icon24Poll from '@vkontakte/icons/dist/24/poll';\nimport Icon24ThumbUp from '@vkontakte/icons/dist/24/thumb_up';\nimport Icon24ThumbDown from '@vkontakte/icons/dist/24/thumb_down';\nimport Icon24RecentOutline from '@vkontakte/icons/dist/24/recent_outline';\nimport Icon24Place from '@vkontakte/icons/dist/24/place';\nimport Icon24Notification from '@vkontakte/icons/dist/24/notification';\nimport '../styles/header.css';\nimport './Level.css';\n\n\nclass Level extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n  }\n\n\t/** Подтвердить находение дома */\n\tconfirm() {\n\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t.then((data) => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, data.lat, data.long, (level) => this.afterConfirm(level));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, null, null, (level) => this.afterConfirm(level));\n\t\t\t});\n\t}\n\n\tafterConfirm(level) {\n\t\tthis.props.onLevelUpdate(level).then(() => {\n\t\t\tconst result = level.result;\n\t\t\tswitch(parseInt(result.status)) {\n\t\t\t\t// Подтверждено\n\t\t\t\tcase 1:\n\t\t\t\t\tthis.props.onOpenModal(MODAL_REWARD, {value: result.value});\n\t\t\t\t\tbreak;\n\t\t\t\t// Не дома\n\t\t\t\tcase 2:\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_HOME);\n\t\t\t\t\tbreak;\n\t\t\t\t// Опаздал\n\t\t\t\tcase 4:\n\t\t\t\t\tthis.props.onOpenModal(MODAL_SKIPPED);\n\t\t\t\t\tbreak;\n\t\t\t\t// Нет геоданных\n\t\t\t\tcase 8:\n\t\t\t\tcase 12:\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NO_GEODATA);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\tstatusOfCheck(check) {\n\t\tswitch(parseInt(check.status)) {\n\t\t\tcase 1: return 'Подтверждено';\n\t\t\tcase 2: return 'Не дома';\n\t\t\tcase 4: return 'Поздно';\n\t\t\tcase 8:\n\t\t\tcase 12: return 'Нет геоданных';\n\t\t\tcase 16: return 'Пропущено';\n\t\t\tdefault: return 'Требует подтверждения';\n\t\t}\n\t}\n\n\tstatusOfCheckIcon(check) {\n\t\tswitch(parseInt(check.status)) {\n\t\t\tcase 1: return (<Icon24ThumbUp style={{color: 'green'}} />);\n\t\t\tcase 2: return (<Icon24ThumbDown style={{color: 'red'}} />);\n\t\t\tcase 4: return (<Icon24RecentOutline style={{color: 'red'}} />);\n\t\t\tcase 8:\n\t\t\tcase 12: return (<Icon24Place style={{color: 'gray'}} />);\n\t\t\tcase 16: return <Icon24ThumbDown style={{color: 'gray'}} />;\n\t\t\tdefault: return <Icon24Notification style={{color: 'var(--button_primary_background)'}} />;\n\t\t}\n\t}\n\n\tlevelName() {\n\t\tconst city = this.props.fetchedUser.city && this.props.fetchedUser.city.title ? ' г.' + this.props.fetchedUser.city.title : '';\n\t\treturn 'Нарушитель карантина 3000'+city;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\n\t\t\t\t<PanelHeader\n\t\t\t\t\tleft={this.props.level.noGeodata && <Div><Button before={<Icon24Place/>} onClick={() => {this.props.permission()}} mode=\"destructive\">Разрешить геоданные</Button></Div>}\n\t\t\t\t\tright={<Div><Button before={<Icon24Poll/>} onClick={() => {this.props.navigate('rating')}}>Рейтинг</Button></Div>}\n\t\t\t\t>\n\t\t\t\t\t<b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b>\n\t\t\t\t</PanelHeader>\n\n\t\t\t\t{this.props.fetchedUser && <Group>\n\t\t\t\t\t<List className=\"RatingList\">\n\t\t\t\t\t\t<Cell>\n\t\t\t\t\t\t\t<Div></Div>\n\t\t\t\t\t\t\t<Div>Уровень</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\tbefore={this.props.fetchedUser.photo_200 ? <Avatar src={this.props.fetchedUser.photo_200}/> : null}\n\t\t\t\t\t\t\tdescription={this.levelName()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Div>{`${this.props.fetchedUser.first_name} ${this.props.fetchedUser.last_name}`}</Div>\n\t\t\t\t\t\t\t<Div>{this.props.level ? this.props.level.value : '-'}</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\n\t\t\t\t{this.props.level && this.props.level.checks && <Group>\n\t\t\t\t\t{this.props.level.checks.length > 0 && !this.props.level.checks[0].confirmed && <Div><Button size=\"xl\" mode=\"commerce\" onClick={()=>{this.confirm()}}>Я дома</Button></Div>}\n\t\t\t\t\t<Header>Последние проверки</Header>\n\t\t\t\t\t<List className=\"ChecksList\">\n\t\t\t\t\t\t<Cell before={<Icon24ThumbUp style={{color: 'green'}} />} key=\"check_head\">\n\t\t\t\t\t\t\t<Div>Время</Div>\n\t\t\t\t\t\t\t<Div>Результат</Div>\n\t\t\t\t\t\t\t<Div className=\"Values\">Баллы</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.props.level.checks.length == 0 && <Cell key=\"check_empty\" style={{textAlign: 'center'}}><Div>Проверок ещё не было</Div></Cell>}\n\t\t\t\t\t\t{this.props.level.checks.map((check) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell key={\"check_\" + check.check_id} before={this.statusOfCheckIcon(check)}>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{check.sended}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{this.statusOfCheck(check)}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div className=\"Values\" style={check.value > 0 ? {color: 'green', fontWeight: 'bold'} : {}}>\n\t\t\t\t\t\t\t\t\t\t{check.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\tlevel: state.level.level\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Обновляет очки и таблицу проверок\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Level);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport { Panel, PanelHeader, PanelHeaderButton, List, Cell, Group, ScreenSpinner, Div, Avatar } from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { selectRegion } from '../redux/actions/region';\n\nimport './Rating.css';\n\nconst osName = platform();\n\nclass Rating extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {isLoading: true};\n  };\n\n\t// Компонент примонтирован\n\tcomponentDidMount() {\n\n\t\tApi.rating.global((table) => {\n\t\t\tthis.setState({isLoading: false, table: table});\n\t\t});\n\n\t\t/*const this_ = this;\n\n\t\tasync function fetchData() {\n\t\t\tconst token = await bridge.send(\"VKWebAppGetAuthToken\", {\"app_id\": 7405679, \"scope\": \"friends\"});\n\t\t\tconst fds = await bridge.send(\"VKWebAppCallAPIMethod\", {\n\t\t\t\t\"method\": \"friends.get\",\n\t\t\t\t\"params\": {\n\t\t\t\t\t\"fields\": \"photo_200_orig\",\n\t\t\t\t\t//\"count\": 10,\n\t\t\t\t\t\"access_token\": token.access_token,\n\t\t\t\t\t\"v\": \"5.103\"\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis_.setState({isLoading: false, friends: fds.response.items});\n\t\t}\n\n\t\tfetchData();*/\n  };\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeader\n\t\t\t\t\tleft={<PanelHeaderButton onClick={() => {this.props.navigate('level')}}>\n\t\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t</PanelHeaderButton>}\n\t\t\t\t>\n\t\t\t\t\tРейтинг\n\t\t\t\t</PanelHeader>\n\t\t\t\t{!this.state.isLoading && <Group>\n\t\t      <List className=\"RatingList\">\n\t\t\t\t\t\t<Cell expandable>\n\t\t\t\t\t\t\t<Div></Div><Div>Уровень</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.state.table.map((friend) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tkey={\"friend_\" + friend.uid}\n\t\t\t\t\t\t\t\t\tbefore={friend.photo_200 ? <Avatar src={friend.photo_200}/> : null}\n\t\t\t\t\t\t\t\t\tdescription=\"Пример для всех\"\n\t\t\t\t\t\t\t\t>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{`${friend.first_name} ${friend.last_name}`}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{friend.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t\t{this.state.isLoading && <ScreenSpinner size='large' />}\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n\t\t\t//friends: state.rating.friends\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      /*onSelectRegion: (region) =>\n        new Promise((resolve) =>\n          selectRegion(region).then((action) => {\n            dispatch(action);\n            resolve();\n          })\n        )*/\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React from 'react';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport { ScreenSpinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from './core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from './redux/actions/level';\nimport { openModal } from './redux/actions/modal';\n\nimport Home from './panels/Home';\nimport Begin from './panels/Begin';\nimport Level from './panels/Level';\nimport Rating from './panels/Rating';\nimport Modal, { MODAL_ARE_AT_HOME, MODAL_NOT_ALLOW_MESSAGES, MODAL_NOT_ALLOW_LOCATION } from './modals/Modal';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n\n    this.state = {\n\t\t\tactiveModal: null,\n\t\t\tactivePanel: 'home',\n\t\t\tuser: null,\n\t\t\tlocationPermissionCount: 0\n\t\t};\n\n\t\tthis.navigate = (e, props) => {\n\t\t\tthis.setState({activePanel: e.currentTarget ? e.currentTarget.dataset.to : e});\n\t\t};\n\n\t\tthis.setUser = (user) => {\n\t\t\tthis.setState({user: user});\n\t\t};\n\n\t\tthis.begin = (geodata) => {\n\t\t\tlet body = Object.assign({}, this.state.user);\n\n\t\t\tif(geodata) {\n\t\t\t\tObject.assign(body, {lat: geodata.lat, long: geodata.long})\n\t\t\t}\n\n\t\t\tApi.home.begin(body, (result) => {\n\t\t\t\tif(result) {\n\t\t\t\t\tthis.props.onLevelUpdate(result).then(() => {\n\t\t\t\t\t\tthis.navigate('level');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/** Запрос разрешений */\n\t\tthis.permission = () => {\n\t\t\t// Закрываем модальное окно (если открыто)\n\t\t\tthis.props.onOpenModal(null);\n\n\t\t\tbridge.send(\"VKWebAppAllowMessagesFromGroup\", {group_id: 193696611})\n\t\t\t\t.then(data => {\n\t\t\t\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\tif(data.available) {\n\t\t\t\t\t\t\t\tthis.begin(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// Не разрешил доступ к геоданным\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tconst locationPermissionCount = this.state.locationPermissionCount + 1;\n\t\t\t\t\t\t\tthis.setState({locationPermissionCount: locationPermissionCount});\n\n\t\t\t\t\t\t\tif(locationPermissionCount > 1) {\n\t\t\t\t\t\t\t\tthis.begin();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_LOCATION);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t// Не разрешил отправлять сообщения\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_MESSAGES);\n\t\t\t\t});\n\t\t};\n  }\n\n\tcomponentDidMount() {\n\t\tconst this_ = this;\n\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tthis_.setUser(user);\n\n\t\t\tconst level = await Api.home.level(user.id);\n\t\t\tif(level) {\n\t\t\t\tthis_.props.onLevelUpdate(level).then(() => {this_.permission()});\n\t\t\t} else {\n\t\t\t\tthis_.navigate('begin');\n\t\t\t}\n\t\t}\n\t\tfetchData();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} modal={<Modal permission={this.permission} />}\n\t\t\t>\n\t\t\t\t<Home id='home' fetchedUser={this.state.user} navigate={this.navigate} />\n\t\t\t\t<Begin id='begin' fetchedUser={this.state.user} navigate={this.navigate} start={() => {this.props.onOpenModal(MODAL_ARE_AT_HOME)}} />\n\t\t\t\t<Level id='level' fetchedUser={this.state.user} navigate={this.navigate} permission={this.permission} />\n\t\t\t\t<Rating id='rating' navigate={this.navigate} />\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\t\tonOpenModal: (activeModal) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/**\n * Комбинаяия редукторов\n */\nimport { combineReducers } from 'redux';\nimport level from './level';\nimport modal from './modal';\n\nconst appReducer = combineReducers({\n    modal,\n    level\n});\n\nconst rootReducer = (state, action) => {\n  // При разлогиневании пользователя стираем все состояние\n  /*if (action.type === 'LOGOUT') {\n    state = undefined\n  }*/\n\n  return appReducer(state, action)\n}\n\nexport default rootReducer;\n","/**\n * Редуктор модальных окон\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Открыть модальное окно\n    case 'MODAL_OPEN':\n      return Object.assign({}, state, {activeModal: action.activeModal, modalParams: action.modalParams});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор балов\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Обновление уровня\n    case 'LEVEL_UPDATE':\n      return Object.assign({}, state, {level: action.level});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Определение хранилища состояния приложения\n * Работает через Redux Persist (хранит состояние в AsyncStorage)\n */\nimport { createStore } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\n// defaults to localStorage for web and AsyncStorage for react-native\nimport storage from 'redux-persist/lib/storage';\n\nimport rootReducer from './reducers';\n\nconst persistConfig = {\n  key: 'root',\n  storage\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = createStore(persistedReducer);\n\nexport const persistor = persistStore(store);\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Всё для управления и хранения состояния приложения (Redux)\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/index';\nimport { PersistGate } from 'redux-persist/integration/react';\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <App />\n    </PersistGate>\n  </Provider>, document.getElementById(\"root\")\n);\n\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(eruda => {}); //runtime download\n}\n"],"sourceRoot":""}