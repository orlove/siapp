(this.webpackJsonpsiapp=this.webpackJsonpsiapp||[]).push([[0],{174:function(e,t,n){},238:function(e,t,n){e.exports=n.p+"static/media/home.09715b70.png"},351:function(e,t,n){e.exports=n(629)},443:function(e,t,n){},616:function(e,t,n){},617:function(e,t,n){},629:function(e,t,n){"use strict";n.r(t);n(352),n(378),n(380),n(381),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420);var a=n(1),r=n.n(a),l=n(38),o=n.n(l),c=n(27),i=n.n(c),s=n(134),u=n.n(s),m=n(225),d=n(29),h=n(30),f=n(33),p=n(32),b=n(262),v=n.n(b),E=n(4),g=(n(440),n(265)),O={home:{begin:function(e,t){return O.post({method:"home/begin",body:e,handler:t})},level:function(e,t){return O.request({method:"home/level?uid="+e,handler:t})},confirm:function(e,t,n,a){var r={uid:e};return t&&(r.lat=t,r.long=n),O.request({method:"home/confirm?"+Object.entries(r).map((function(e){var t=Object(g.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join("&"),handler:a})}}},y={rating:{global:function(e){return y.request({method:"rating/global",handler:e})}}},k="https://rest-news.hozya.ru",j={request:function(e){var t=e.method,n=e.params,a=e.tag,r=e.handler,l=e.options;return a&&fetch.abort(a),n=n?"?"+(n=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&")):"",fetch(k+"/"+t+n,l,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},post:function(e){var t=e.method,n=e.body,a=e.tag,r=e.handler,l=e.options;return a&&fetch.abort(a),l=Object.assign({method:"POST",body:JSON.stringify(n)},l||{}),fetch(k+"/"+t,l,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},abort:function(e){fetch.abort(e)}};[O,y].forEach((function(e){j=Object.assign(e,j)}));var C=j,M=n(31),_=function(e){return new Promise((function(t,n){t({type:"LEVEL_UPDATE",level:e})}))},w=function(e,t){return new Promise((function(n,a){n({type:"MODAL_OPEN",activeModal:e,modalParams:t})}))},P=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.n,{size:"large"}))}}]),n}(r.a.Component),U=Object(M.b)((function(e,t){return{}}))(P),A=n(238),x=n.n(A),L=(n(174),n(443),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,null,r.a.createElement("b",null,"#"),r.a.createElement("b",null,"\u041b"),r.a.createElement("b",null,"\u0423"),r.a.createElement("b",null,"\u0427"),r.a.createElement("b",null,"\u0428"),r.a.createElement("b",null,"\u0415"),r.a.createElement("b",null,"\u0414"),r.a.createElement("b",null,"\u041e"),r.a.createElement("b",null,"\u041c"),r.a.createElement("b",null,"\u0410")),r.a.createElement(E.e,null,r.a.createElement("img",{className:"Home",src:x.a,alt:"\u0414\u043e\u043c"}),r.a.createElement(E.d,{className:"Explanation"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f ",r.a.createElement("b",null,"\u0434\u043e\u043c\u0430"),". \u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0431\u0430\u043b\u044b \u0437\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043e\u043c\u0430. \u0414\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043b\u0438\u0447\u043d\u044b\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u043c! \u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u0438\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f, \u043d\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u043f\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f. \u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0442\u043e, \u0447\u0442\u043e \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0434\u043e\u043c\u0430 (\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0432\u0430\u0448\u0435\u043c\u0443 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e)."),r.a.createElement(E.d,null,r.a.createElement(E.b,{size:"xl",level:"2",onClick:function(){e.props.start()}},"\u0421\u0435\u0439\u0447\u0430\u0441 \u044f \u0434\u043e\u043c\u0430, \u043d\u0430\u0447\u0430\u0442\u044c!"))))}}]),n}(r.a.Component)),I=Object(M.b)((function(e,t){return{}}))(L),N=n(239),R=n.n(N),V=n(240),S=n.n(V),D=n(241),G=n.n(D),W=n(242),K=n.n(W),z=n(243),T=n.n(z),q=n(244),B=n.n(q),J=n(245),F=n.n(J),H="modal_reward",Q="modal_skipped",X="modal_not-home",Y="modal_no-geodata",Z=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"setActiveModal",value:function(e){return this.props.onOpenModal(e)}},{key:"close",value:function(){return this.setActiveModal(null)}},{key:"render",value:function(){var e,t,n,a=this;return r.a.createElement(E.j,{activeModal:this.props.activeModal||null,onClose:this.close},(e="modal_are-at-home",t=function(){a.close()},n=this.props.permission,r.a.createElement(E.i,{id:e,onClose:function(){return t()},icon:r.a.createElement(R.a,null),header:"\u0412\u044b \u0441\u0435\u0439\u0447\u0430\u0441 \u0434\u043e\u043c\u0430?",caption:"\u0411\u0430\u043b\u043b\u044b \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0442\u0430\u043c, \u0433\u0434\u0435 \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0441\u0435\u0439\u0447\u0430\u0441. \u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0435.",actions:[{title:"\u0414\u0430, \u044f \u0434\u043e\u043c\u0430",mode:"primary",action:n}]})),function(e,t,n){return r.a.createElement(E.i,{id:e,onClose:function(){return t()},icon:r.a.createElement(S.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u0438",caption:"\u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0431\u0430\u043b\u043b\u044b",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:n}]})}("modal_not-allow-location",(function(){a.close()}),this.props.permission),function(e,t,n){return r.a.createElement(E.i,{id:e,onClose:function(){return t()},icon:r.a.createElement(G.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",caption:"\u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f.",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:n}]})}("modal_not-allow-messages",(function(){a.close()}),this.props.permission),function(e,t){return r.a.createElement(E.i,{id:H,onClose:e,icon:r.a.createElement(K.a,null),header:"\u041e\u0442\u043c\u0435\u0442\u043a\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430!",caption:t?"\u0412\u0430\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u0438\u043d\u043e "+t.value+" \u0431\u0430\u043b\u043b\u043e\u0432":""})}((function(){a.close()}),this.props.modalParams),function(e,t){return r.a.createElement(E.i,{id:Q,onClose:e,icon:r.a.createElement(T.a,null),header:"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e!",caption:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u0440\u043e\u0448\u043b\u043e \u0431\u043e\u043b\u044c\u0448\u0435 10 \u043c\u0438\u043d\u0443\u0442 \u0441 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f."})}((function(){a.close()})),function(e,t){return r.a.createElement(E.i,{id:X,onClose:e,icon:r.a.createElement(B.a,null),header:"\u0412\u044b \u043f\u043e\u043a\u0438\u043d\u0443\u043b\u0438 \u0434\u043e\u043c",caption:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0439\u0442\u0435 \u043a\u0430\u0440\u0430\u043d\u0442\u0438\u043d."})}((function(){a.close()})),function(e,t){return r.a.createElement(E.i,{id:Y,onClose:e,icon:r.a.createElement(F.a,null),header:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e",caption:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u043a\u0430\u0440\u0430\u043d\u0442\u0438\u043d\u0430"})}((function(){a.close()})))}}]),n}(r.a.Component),$=Object(M.b)((function(e,t){return e.modal?{activeModal:e.modal.activeModal,modalParams:e.modal.modalParams}:{}}),(function(e){return{onOpenModal:function(t){return new Promise((function(n){return w(t).then((function(t){e(t),n()}))}))}}}))(Z),ee=n(79),te=[{name:"\u041e\u0431\u0440\u0430\u0437\u0446\u043e\u0432\u044b\u0439",value:1},{name:"\u0420\u0430\u0437\u0443\u043c\u043d\u044b\u0439",value:1},{name:"\u0423\u043c\u0435\u0440\u0435\u043d\u043d\u044b\u0439",value:1},{name:"\u041d\u0435\u0441\u0435\u0440\u044c\u0435\u0437\u043d\u044b\u0439",value:1},{name:"\u0411\u0435\u0437\u0440\u0430\u0441\u0441\u0443\u0434\u043d\u044b\u0439",value:1},{name:"\u041e\u043f\u0430\u0441\u0442\u043d\u044b\u0439",value:1}],ne=["#6dd627","#9ceb60","#00b8f0","#4acfff","#b89558","#ff6242"],ae=(Math.PI,function(e){var t=Math.PI/180,n=e.cx,a=e.cy,l=e.midAngle,o=e.innerRadius,c=e.outerRadius,i=e.startAngle,s=e.endAngle,u=e.fill,m=e.payload,d=Math.sin(-t*l),h=Math.cos(-t*l),f=n+(o-18)*h+10*(h>=0?1:-1),p=a+(o-18)*d;return r.a.createElement("g",null,r.a.createElement("text",{x:n,y:a,dy:8,textAnchor:"middle",fill:u},m.name),r.a.createElement(ee.d,{cx:n,cy:a,innerRadius:o,outerRadius:c,startAngle:i,endAngle:s,fill:u}),r.a.createElement("g",{transform:"translate(".concat(f+2*(h>=0?1:-1)," ").concat(p,")")},r.a.createElement("g",{transform:"rotate(".concat(180-l,")")},r.a.createElement("polygon",{points:"5,-5 5,5 -5,0 ",style:{fill:u}}))))}),re=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={width:null,height:null},a}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Div",ref:function(t){if(t&&!e.state.width){var n=t.getBoundingClientRect().height;e.setState({width:t.getBoundingClientRect().width,height:n<96?96:n})}}},this.state.width&&r.a.createElement(ee.c,{width:this.state.width,height:this.state.height,onMouseEnter:this.onPieEnter},r.a.createElement(ee.b,{data:te,startAngle:180,endAngle:0,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,cy:80,activeIndex:6-this.props.group,activeShape:ae},te.map((function(e,t){return r.a.createElement(ee.a,{fill:ne[t%ne.length]})})))))}}]),n}(r.a.Component),le=n(257),oe=n.n(le),ce=n(140),ie=n.n(ce),se=n(141),ue=n.n(se),me=n(258),de=n.n(me),he=n(142),fe=n.n(he),pe=n(259),be=n.n(pe),ve=(n(616),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){return Object(d.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"confirm",value:function(){var e=this;i.a.send("VKWebAppGetGeodata",{}).then((function(t){C.home.confirm(e.props.fetchedUser.id,t.lat,t.long,(function(t){return e.afterConfirm(t)}))})).catch((function(){C.home.confirm(e.props.fetchedUser.id,null,null,(function(t){return e.afterConfirm(t)}))}))}},{key:"afterConfirm",value:function(e){var t=this;this.props.onLevelUpdate(e).then((function(){var n=e.result;switch(parseInt(n.status)){case 1:t.props.onOpenModal(H,{value:n.value});break;case 2:t.props.onOpenModal(X);break;case 4:t.props.onOpenModal(Q);break;case 8:case 12:t.props.onOpenModal(Y)}}))}},{key:"statusOfCheck",value:function(e){switch(parseInt(e.status)){case 1:return"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e";case 2:return"\u041d\u0435 \u0434\u043e\u043c\u0430";case 4:return"\u041f\u043e\u0437\u0434\u043d\u043e";case 8:case 12:return"\u041d\u0435\u0442 \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0445";case 16:return"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e";default:return"\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"}}},{key:"statusOfCheckIcon",value:function(e){switch(parseInt(e.status)){case 1:return r.a.createElement(ie.a,{style:{color:"green"}});case 2:return r.a.createElement(ue.a,{style:{color:"red"}});case 4:return r.a.createElement(de.a,{style:{color:"red"}});case 8:case 12:return r.a.createElement(fe.a,{style:{color:"gray"}});case 16:return r.a.createElement(ue.a,{style:{color:"gray"}});default:return r.a.createElement(be.a,{style:{color:"var(--button_primary_background)"}})}}},{key:"levelName",value:function(){return this.props.fetchedUser.city&&this.props.fetchedUser.city.title?" \u0433."+this.props.fetchedUser.city.title:""}},{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,{left:this.props.level.noGeodata&&r.a.createElement(E.d,null,r.a.createElement(E.b,{before:r.a.createElement(fe.a,null),onClick:function(){e.props.permission()},mode:"destructive"},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0435")),right:r.a.createElement(E.d,null,r.a.createElement(E.b,{before:r.a.createElement(oe.a,null),onClick:function(){e.props.navigate("rating")}},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"))},r.a.createElement("b",null,"#"),r.a.createElement("b",null,"\u041b"),r.a.createElement("b",null,"\u0423"),r.a.createElement("b",null,"\u0427"),r.a.createElement("b",null,"\u0428"),r.a.createElement("b",null,"\u0415"),r.a.createElement("b",null,"\u0414"),r.a.createElement("b",null,"\u041e"),r.a.createElement("b",null,"\u041c"),r.a.createElement("b",null,"\u0410")),this.props.fetchedUser&&r.a.createElement(E.e,null,r.a.createElement(E.h,{className:"Info"},r.a.createElement(E.c,{before:this.props.fetchedUser.photo_200?r.a.createElement(E.a,{src:this.props.fetchedUser.photo_200}):null},r.a.createElement(E.d,null,"".concat(this.props.fetchedUser.first_name," ").concat(this.props.fetchedUser.last_name)),r.a.createElement(E.d,null,r.a.createElement(re,{group:Math.round(5*Math.random())}))))),this.props.level&&this.props.level.checks&&r.a.createElement(E.e,null,this.props.level.checks.length>0&&!this.props.level.checks[0].confirmed&&r.a.createElement(E.d,null,r.a.createElement(E.b,{size:"xl",mode:"commerce",onClick:function(){e.confirm()}},"\u042f \u0434\u043e\u043c\u0430")),r.a.createElement(E.f,null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438"),r.a.createElement(E.h,{className:"ChecksList"},r.a.createElement(E.c,{before:r.a.createElement(ie.a,{style:{color:"green"}}),key:"check_head"},r.a.createElement(E.d,null,"\u0412\u0440\u0435\u043c\u044f"),r.a.createElement(E.d,null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),r.a.createElement(E.d,{className:"Values"},"\u0411\u0430\u043b\u043b\u044b")),0==this.props.level.checks.length&&r.a.createElement(E.c,{key:"check_empty",style:{textAlign:"center"}},r.a.createElement(E.d,null,"\u041f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u0435\u0449\u0451 \u043d\u0435 \u0431\u044b\u043b\u043e")),this.props.level.checks.map((function(t){return r.a.createElement(E.c,{key:"check_"+t.check_id,before:e.statusOfCheckIcon(t)},r.a.createElement(E.d,null,t.sended),r.a.createElement(E.d,null,e.statusOfCheck(t)),r.a.createElement(E.d,{className:"Values",style:t.value>0?{color:"green",fontWeight:"bold"}:{}},t.value))})))))}}]),n}(r.a.Component)),Ee=Object(M.b)((function(e,t){return{level:e.level.level}}),(function(e){return{onLevelUpdate:function(t){return new Promise((function(n){return _(t).then((function(t){e(t),n()}))}))},onOpenModal:function(t,n){return new Promise((function(a){return w(t,n).then((function(t){e(t),a()}))}))}}}))(ve),ge=n(260),Oe=n.n(ge),ye=n(261),ke=n.n(ye),je=(n(617),Object(E.o)()),Ce=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={isLoading:!0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;C.rating.global((function(t){e.setState({isLoading:!1,table:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,{left:r.a.createElement(E.m,{onClick:function(){e.props.navigate("level")}},je===E.g?r.a.createElement(Oe.a,null):r.a.createElement(ke.a,null))},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),!this.state.isLoading&&r.a.createElement(E.e,null,r.a.createElement(E.h,{className:"RatingList"},r.a.createElement(E.c,{expandable:!0},r.a.createElement(E.d,null),r.a.createElement(E.d,null,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c")),this.state.table.map((function(e){return r.a.createElement(E.c,{key:"friend_"+e.uid,before:e.photo_200?r.a.createElement(E.a,{src:e.photo_200}):null,description:"\u041f\u0440\u0438\u043c\u0435\u0440 \u0434\u043b\u044f \u0432\u0441\u0435\u0445"},r.a.createElement(E.d,null,"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(E.d,null,e.value))})))),this.state.isLoading&&r.a.createElement(E.n,{size:"large"}))}}]),n}(r.a.Component),Me=Object(M.b)((function(e,t){return{}}),(function(e){return{}}))(Ce),_e=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={activeModal:null,activePanel:"home",user:null,locationPermissionCount:0},a.navigate=function(e,t){a.setState({activePanel:e.currentTarget?e.currentTarget.dataset.to:e})},a.setUser=function(e){a.setState({user:e})},a.begin=function(e){var t=Object.assign({},a.state.user);e&&Object.assign(t,{lat:e.lat,long:e.long}),C.home.begin(t,(function(e){e&&a.props.onLevelUpdate(e).then((function(){a.navigate("level")}))}))},a.permission=function(){a.props.onOpenModal(null),i.a.send("VKWebAppAllowMessagesFromGroup",{group_id:193696611}).then((function(e){i.a.send("VKWebAppGetGeodata",{}).then((function(e){e.available&&a.begin(e)})).catch((function(){var e=a.state.locationPermissionCount+1;a.setState({locationPermissionCount:e}),e>1?a.begin():a.props.onOpenModal("modal_not-allow-location")}))})).catch((function(){a.props.onOpenModal("modal_not-allow-messages")}))},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;function t(){return(t=Object(m.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.send("VKWebAppGetUserInfo");case 2:return n=t.sent,e.setUser(n),t.next=6,C.home.level(n.id);case 6:(a=t.sent)?e.props.onLevelUpdate(a).then((function(){e.permission()})):e.navigate("begin");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){t.apply(this,arguments)}()}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{activePanel:this.state.activePanel,modal:r.a.createElement($,{permission:this.permission})},r.a.createElement(U,{id:"home",fetchedUser:this.state.user,navigate:this.navigate}),r.a.createElement(I,{id:"begin",fetchedUser:this.state.user,navigate:this.navigate,start:function(){e.props.onOpenModal("modal_are-at-home")}}),r.a.createElement(Ee,{id:"level",fetchedUser:this.state.user,navigate:this.navigate,permission:this.permission}),r.a.createElement(Me,{id:"rating",navigate:this.navigate}))}}]),n}(r.a.Component),we=Object(M.b)((function(e,t){return{}}),(function(e){return{onLevelUpdate:function(t){return new Promise((function(n){return _(t).then((function(t){e(t),n()}))}))},onOpenModal:function(t){return new Promise((function(n){return w(t).then((function(t){e(t),n()}))}))}}}))(_e),Pe=n(42),Ue=n(143),Ae=n(263),xe=n.n(Ae);var Le=Object(Pe.b)({modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_OPEN":return Object.assign({},e,{activeModal:t.activeModal,modalParams:t.modalParams});default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEVEL_UPDATE":return Object.assign({},e,{level:t.level});default:return e}}}),Ie=function(e,t){return Le(e,t)},Ne={key:"root",storage:xe.a},Re=Object(Ue.a)(Ne,Ie),Ve=Object(Pe.c)(Re),Se=Object(Ue.b)(Ve),De=n(264);i.a.send("VKWebAppInit"),o.a.render(r.a.createElement(M.a,{store:Ve},r.a.createElement(De.a,{loading:null,persistor:Se},r.a.createElement(we,null))),document.getElementById("root"))}},[[351,1,2]]]);
//# sourceMappingURL=main.3ecd1ce2.chunk.js.map