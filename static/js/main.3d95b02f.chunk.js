(this.webpackJsonpsiapp=this.webpackJsonpsiapp||[]).push([[0],{173:function(e,t,n){},242:function(e,t,n){e.exports=n.p+"static/media/rankup.ade1867c.png"},243:function(e,t,n){e.exports=n.p+"static/media/home.09715b70.png"},337:function(e,t,n){e.exports=n(610)},429:function(e,t,n){},430:function(e,t,n){},605:function(e,t,n){},606:function(e,t,n){},607:function(e,t,n){},610:function(e,t,n){"use strict";n.r(t);n(338),n(364),n(366),n(367),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406);var a=n(1),r=n.n(a),o=n(64),i=n.n(o),l=n(26),c=n.n(l),s=n(133),u=n.n(s),m=n(222),p=n(28),d=n(29),h=n(32),f=n(31),v=(n(415),n(266)),E={home:{begin:function(e,t){return E.post({method:"home/begin",body:e,handler:t})},level:function(e,t){return E.request({method:"home/level?uid="+e,handler:t})},confirm:function(e,t,n,a){var r={uid:e};return t&&(r.lat=t,r.long=n),E.request({method:"home/confirm?"+Object.entries(r).map((function(e){var t=Object(v.a)(e,2),n=t[0],a=t[1];return"".concat(n,"=").concat(a)})).join("&"),handler:a})},cancelLate:function(e,t){return E.request({method:"home/cancel-late?uid="+e,handler:t})},rankUpBonus:function(e,t){return E.request({method:"home/rank-up-bonus?uid="+e,handler:t})},update:function(e,t,n,a){return E.request({method:"home/update?uid="+e+"&lat="+t+"&long="+n,handler:a})}}},g={rating:{global:function(e){return g.request({method:"rating/global",handler:e})}}},b={dairy:{self:function(e,t,n){return b.request({method:"dairy/self",params:{uid:e,page:t},handler:n})},common:function(e,t,n){return b.request({method:"dairy/common",params:{uid:e,page:t},handler:n})},like:function(e,t,n,a){return b.request({method:"dairy/like",params:{uid:e,photo:t,owner:n},handler:a})},unlike:function(e,t,n,a){return b.request({method:"dairy/unlike",params:{uid:e,photo:t,owner:n},handler:a})}}},y="https://rest-news.hozya.ru",k={request:function(e){var t=e.method,n=e.params,a=e.tag,r=e.handler,o=e.options;return a&&fetch.abort(a),n=n?"?"+(n=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&")):"",fetch(y+"/"+t+n,o,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},post:function(e){var t=e.method,n=e.body,a=e.tag,r=e.handler,o=e.options;return a&&fetch.abort(a),o=Object.assign({method:"POST",body:JSON.stringify(n)},o||{}),fetch(y+"/"+t,o,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},abort:function(e){fetch.abort(e)},getDomain:function(e){return e?y+"/"+e:y},submit:function(e){var t=new URLSearchParams(new FormData(e));return fetch(e.action,{method:"post",body:t})},upload:function(e,t,n){var a=new FormData;return a.append("file",t.files[0]),fetch(y+"/"+e,{method:"POST",body:a}).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(n).catch((function(e){console.error(e)}))}};[E,g,b].forEach((function(e){k=Object.assign(e,k)}));var O=k,P=n(30),j=function(e){return new Promise((function(t,n){t({type:"LEVEL_UPDATE",level:e})}))},w=function(e,t,n){return new Promise((function(a,r){e.currentTarget&&e.currentTarget.dataset&&e.currentTarget.dataset.story&&(e=e.currentTarget.dataset.story),t||(t=e),a({type:"NAVIGATE",activeStory:e,activePanel:t,params:n})}))},C=function(e,t){return new Promise((function(n,a){n({type:"MODAL_OPEN",activeModal:e,modalParams:t})}))},U=n(3),L=n(235),N=n.n(L),_=n(236),M=n.n(_),x=n(237),S=n.n(x),A=["\u041c\u043e\u0439\u0442\u0435 \u0440\u0443\u043a\u0438 \u0441 \u043c\u044b\u0441\u043b\u043e\u043c \u043f\u043e\u0441\u043b\u0435 \u043b\u044e\u0431\u044b\u0445 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432","\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u0432\u0430\u043a\u0446\u0438\u043d\u044b \u043e\u0442 \u0432\u0438\u0440\u0443\u0441\u0430","\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0441\u043a\u0438\u0435 \u043c\u0430\u0441\u043a\u0438 \u0442\u0435\u0440\u044f\u044e\u0442 \u0441\u0432\u043e\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0447\u0435\u0440\u0435\u0437 2 \u0447\u0430\u0441\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","\u0420\u0435\u0441\u043f\u0438\u0440\u0430\u0442\u043e\u0440 - \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0435 \u043b\u044e\u0431\u044b\u0445 \u043c\u0430\u0441\u043e\u043a","\u041d\u0435 \u0432\u044b\u0445\u043e\u0434\u0438\u0442\u0435 \u043d\u0430 \u0443\u043b\u0438\u0446\u0443 \u0431\u0435\u0437 \u0436\u0438\u0437\u043d\u0435\u043d\u043d\u043e\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438","\u0422\u043a\u0430\u043d\u0435\u0432\u044b\u0435 \u0438 \u043c\u0430\u0440\u043b\u0435\u0432\u044b\u0435 \u043c\u0430\u0441\u043a\u0438 - \u043d\u0435\u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b","\u0417\u0430\u0449\u0438\u0449\u0430\u0439\u0442\u0435 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0440\u0433\u0430\u043d\u044b \u0434\u044b\u0445\u0430\u043d\u0438\u044f, \u043d\u043e \u0438 \u0433\u043b\u0430\u0437\u0430","\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u044d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u043e\u0439 \u0441\u043b\u0443\u0436\u0431\u044b 112","\u0414\u0435\u0440\u0436\u0438\u0442\u0435 \u0434\u0438\u0441\u0442\u0430\u043d\u0446\u0438\u044e 2 \u043c\u0435\u0442\u0440\u0430 \u043e\u0442 \u0434\u0440\u0443\u0433\u0438\u0445 \u043b\u044e\u0434\u0435\u0439","\u041d\u0435 \u0440\u0438\u0441\u043a\u0443\u0439\u0442\u0435 \u0441\u0432\u043e\u0438\u043c \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u0435\u043c \u0435\u0441\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e\u0433\u043e \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c","\u041b\u0443\u0447\u0448\u0438\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043b\u0435\u0433\u043a\u043e \u043f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0431\u043e\u043b\u0435\u0437\u043d\u044c - \u043d\u0435 \u0437\u0430\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f","\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c \u0430\u043d\u0442\u0438\u0441\u0435\u043f\u0442\u0438\u043a\u0438? \u0418\u0445 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u0440\u0435\u043f\u043a\u0438\u0439 \u0441\u043f\u0438\u0440\u0442\u043d\u043e\u0439 \u043d\u0430\u043f\u0438\u0442\u043e\u043a","\u0411\u0443\u043c. \u043f\u043e\u043b\u043e\u0442\u0435\u043d\u0446\u0430, \u0441\u0430\u043b\u0444\u0435\u0442\u043a\u0438, \u0441\u0442\u0430\u0440\u044b\u0435 \u0442\u0440\u044f\u043f\u043a\u0438 - \u043f\u043e\u0434\u043e\u0439\u0434\u0443\u0442 \u0432\u043c\u0435\u0441\u0442\u043e \u0422\u0443\u0430\u043b.\u0411\u0443\u043c\u0430\u0433\u0438","\u0421\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u043d\u0435 \u043f\u0440\u0438\u043a\u0430\u0441\u0430\u0442\u044c\u0441\u044f \u043a \u043f\u0435\u0440\u0438\u043b\u0430\u043c, \u043a\u043d\u043e\u043f\u043a\u0430\u043c \u0432 \u043b\u0438\u0444\u0442\u0435 \u0438 \u0434\u0432\u0435\u0440\u043d\u044b\u043c \u0440\u0443\u0447\u043a\u0430\u043c ","\u041d\u0430\u0445\u043e\u0434\u044f\u0441\u044c \u043d\u0430 \u0443\u043b\u0438\u0446\u0435 \u043d\u0435 \u043f\u043e\u0442\u0438\u0440\u0430\u0439\u0442\u0435 \u043d\u043e\u0441 \u0438 \u043d\u0435 \u0442\u0440\u0438\u0442\u0435 \u0433\u043b\u0430\u0437\u0430","\u041f\u043e\u0441\u0442\u0430\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0441\u0442\u043a\u0430\u043c, \u0447\u0442\u043e \u0433\u0443\u043b\u044f\u0442\u044c \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438 \u043e\u043f\u0430\u0441\u043d\u043e","\u0412\u043c\u0435\u0448\u0438\u0432\u0430\u0439\u0442\u0435\u0441\u044c \u0432 \u0441\u0435\u0440\u044c\u0435\u0437\u043d\u044b\u0435 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u044f, \u0434\u0435\u043b\u0430\u0439\u0442\u0435 \u044d\u0442\u043e \u0441 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u044f","\u0422\u043e\u043b\u044c\u043a\u043e \u0442\u044b \u043c\u043e\u0436\u0435\u0448\u044c \u043e\u0433\u0440\u0430\u0434\u0438\u0442\u044c \u0441\u0435\u0431\u044f \u043e\u0442 \u0432\u0438\u0440\u0443\u0441\u0430","\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0438 \u0432 \u043e\u043b\u043d\u0430\u0439\u043d","\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u043b\u044f \u0441\u0435\u0431\u044f \u043e\u043d\u043b\u0430\u0439\u043d \u0440\u0430\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f, \u0438\u0445 \u043e\u0433\u0440\u043e\u043c\u043d\u043e\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e"],D=(n(429),n(238)),V=n.n(D),I=n(239),T=n.n(I),R=n(240),z=n.n(R),B=n(93),q=n.n(B),W=n(241),G=n.n(W),K=n(242),H=n.n(K),F="modal_are-at-home",J="modal_not-allow-messages",X="modal_not-allow-location",Q="modal_reward",Y="modal_skipped",Z="modal_not-home",$="modal_not-home-in-start",ee="modal_no-geodata",te="nodal_rank-up",ne=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"setActiveModal",value:function(e){return this.props.onOpenModal(e)}},{key:"close",value:function(){return this.setActiveModal(null)}},{key:"render",value:function(){var e,t,n=this;return r.a.createElement(U.o,{activeModal:this.props.activeModal||null,onClose:function(){n.close()}},this.props.activeModal===F?(e=function(){n.close()},t=this.props.permission,r.a.createElement(U.n,{id:F,onClose:function(){return e()},icon:r.a.createElement(N.a,null),header:"\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0434\u043e\u043c\u0430 \u0441\u0435\u0439\u0447\u0430\u0441?",caption:"\u041e\u0447\u043a\u0438 \u0441\u0430\u043c\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u0441\u044f \u0437\u0430 \u0432\u0445\u043e\u0434 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0422\u041e\u041b\u042c\u041a\u041e \u0438\u0437 \u0442\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u0430 \u0433\u0434\u0435 \u0412\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0441\u0435\u0439\u0447\u0430\u0441!",actions:[{title:"\u0414\u0430, \u044f \u0434\u043e\u043c\u0430",mode:"primary",action:t}]})):r.a.createElement(U.n,{id:F}),this.props.activeModal===X?function(e,t){return r.a.createElement(U.n,{id:X,onClose:function(){return e()},icon:r.a.createElement(M.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u0438",caption:"\u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0412\u0430\u0448\u0435\u0439 \u0433\u0435\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438. \u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043c\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c \u0412\u0430\u043c \u0431\u0430\u043b\u043b\u044b. \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041c\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0432\u0430\u0448\u0443 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044e \u043d\u0438 \u0432 \u043a\u0430\u043a\u0438\u0445 \u0446\u0435\u043b\u044f\u0445 \u043f\u043e\u043c\u0438\u043c\u043e \u0438\u0433\u0440\u043e\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430.",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:t}]})}((function(){n.close()}),this.props.permission):r.a.createElement(U.n,{id:X}),this.props.activeModal===J?function(e,t){return r.a.createElement(U.n,{id:J,onClose:function(){return e()},icon:r.a.createElement(S.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",caption:"\u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u0432\u044b \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0432 \u043f\u043e\u043b\u043d\u043e\u0439 \u043c\u0435\u0440\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:t}]})}((function(){n.close()}),this.props.permission):r.a.createElement(U.n,{id:J}),this.props.activeModal===Q?function(e,t){return r.a.createElement(U.n,{id:Q,onClose:e,icon:r.a.createElement(V.a,null),header:"\u0422\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!",caption:r.a.createElement("div",null,r.a.createElement("p",null,"\u041e\u0442\u043c\u0435\u0442\u043a\u0430 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0430, \u0432\u0430\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e ",t.value," \u0431\u0430\u043b\u043b\u043e\u0432."),r.a.createElement("div",{className:"Tip"},r.a.createElement(T.a,null),r.a.createElement("p",null,A[Math.round(Math.random()*A.length)])))})}((function(){n.close()}),this.props.modalParams):r.a.createElement(U.n,{id:Q}),this.props.activeModal===Y?function(e,t){var n={withCancelLate:[{title:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c "+(t=t||{}).promiseValue+" \u0431\u0430\u043b\u043b\u043e\u0432",mode:"primary",action:function(){c.a.send("VKWebAppShowWallPostBox",{message:"\u041f\u0440\u0438\u0432\u0435\u0442, \u0434\u0440\u0443\u0437\u044c\u044f! \u042f \u0445\u043e\u0447\u0443 \u0447\u0442\u043e\u0431\u044b \u044d\u043f\u0438\u0434\u0435\u043c\u0438\u044f \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0430\u0441\u044c \u043a\u0430\u043a \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u043e\u0440\u0435\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u043d\u043e\u0448\u0443 \u043f\u043e\u0441\u0438\u043b\u044c\u043d\u044b\u0439 \u0432\u043a\u043b\u0430\u0434 \u0432 \u0431\u043e\u0440\u044c\u0431\u0443 \u0441 \u043a\u043e\u0440\u043e\u043d\u043e\u0432\u0438\u0440\u0443\u0441\u043e\u043c!\n\u042d\u0442\u043e \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435\u0441\u043b\u043e\u0436\u043d\u043e, \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0439\u0442\u0435\u0441\u044c!\n#\u043b\u0443\u0447\u0448\u0435\u0434\u043e\u043c\u0430 #\u0441\u0438\u0434\u0438\u0442\u0435\u0434\u043e\u043c\u0430 #covid19",attachments:"https://vk.com/app7405679"}).then((function(){return O.home.cancelLate(t.uid,(function(n){return t.onLevelUpdate(n).then(e)}))}))}},{title:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c "+t.currentValue+" \u0431\u0430\u043b\u043b\u043e\u0432",mode:"secondary",action:e}],simple:[{title:t.currentValue+" \u0431\u0430\u043b\u043b\u043e\u0432",mode:"primary",action:e}]};return r.a.createElement(U.n,{id:Y,onClose:e,icon:r.a.createElement(z.a,{style:{color:"red"}}),header:"\u0412\u044b \u043e\u043f\u043e\u0437\u0434\u0430\u043b\u0438! \u041f\u0440\u043e\u0448\u043b\u043e \u0431\u043e\u043b\u044c\u0448\u0435 20 \u043c\u0438\u043d\u0443\u0442..",caption:t.promiseValue>t.currentValue?"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0432\u0430\u0436\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e Covid-19 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441!":"\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u0430\u043b\u043b\u043e\u0432 \u0435\u0441\u043b\u0438 \u0431\u0443\u0434\u0438\u0442\u0435 \u0432\u043e\u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b.",actions:n[t.promiseValue>t.currentValue?"withCancelLate":"simple"]})}((function(){n.close()}),this.props.modalParams):r.a.createElement(U.n,{id:Y}),this.props.activeModal===Z?function(e,t){return r.a.createElement(U.n,{id:Z,onClose:e,icon:r.a.createElement(q.a,null),header:"\u0412\u044b \u043f\u043e\u043a\u0438\u043d\u0443\u043b\u0438 \u0434\u043e\u043c",caption:r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0439\u0442\u0435 \u0440\u0435\u0436\u0438\u043c \u0441\u0430\u043c\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438! \u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u0431\u0440\u043e\u0432\u043e\u043b\u044c\u043d\u0430\u044f \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u044f \u043e\u0442 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 \u0437\u0430\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0443\u0431\u0435\u0440\u0435\u0447\u044c \u043d\u0430\u0441 \u0432 \u044d\u0442\u043e \u043d\u0435\u043f\u0440\u043e\u0441\u0442\u043e\u0435 \u0432\u0440\u0435\u043c\u044f!",r.a.createElement("br",null),r.a.createElement("br",null),"\u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c GPS \u0438 \u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443."),actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443",mode:"secondary",action:t.repeat},{title:"\u042f \u043d\u0435 \u0434\u043e\u043c\u0430",mode:"secondary",action:e}]})}((function(){n.close()}),this.props.modalParams):r.a.createElement(U.n,{id:Z}),this.props.activeModal===$?function(e,t){return r.a.createElement(U.n,{id:$,onClose:e,icon:r.a.createElement(q.a,null),header:"\u0421\u0443\u0434\u044f \u043f\u043e \u0434\u0430\u043d\u043d\u044b\u043c, \u0432\u044b \u043f\u043e\u043a\u0438\u043d\u0443\u043b\u0438 \u0434\u043e\u043c",caption:"\u0415\u0441\u043b\u0438 \u0432\u044b \u0441\u0435\u0439\u0447\u0430\u0441 \u0434\u043e\u043c\u0430, \u0437\u043d\u0430\u0447\u0438\u0442, \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0431\u044b\u043b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d \u043d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441. \u041f\u043e\u043a\u0430 \u0435\u0433\u043e \u0435\u0449\u0451 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u043d\u0442\u044f\u0442\u044c. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \xab\u0417\u0434\u0435\u0441\u044c \u0434\u043e\u043c\xbb, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043c\u0435\u043d\u044f \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0438\u0439",actions:[{title:"\u0417\u0434\u0435\u0441\u044c \u0434\u043e\u043c",mode:"secondary",action:function(){O.home.update(t.uid,t.lat,t.long,(function(n){return t.onLevelUpdate(n).then(e)}))}},{title:"\u042f \u043d\u0435 \u0434\u043e\u043c\u0430",mode:"secondary",action:e}]})}((function(){n.close()}),this.props.modalParams):r.a.createElement(U.n,{id:$}),this.props.activeModal===ee?function(e,t){return r.a.createElement(U.n,{id:ee,onClose:e,icon:r.a.createElement(G.a,null),header:"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e",caption:"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0441\u043e\u0431\u043b\u044e\u0434\u0435\u043d\u0438\u0435 \u0440\u0435\u0436\u0438\u043c\u0430 \u0441\u0430\u043c\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435!"})}((function(){n.close()})):r.a.createElement(U.n,{id:ee}),this.props.activeModal===te?function(e,t){return t=t||{rank:{name:""}},r.a.createElement(U.n,{id:te,onClose:e,icon:r.a.createElement("img",{src:H.a,alt:"\u041d\u043e\u0432\u043e\u0435 \u0437\u0432\u0430\u043d\u0438\u0435"}),header:"\u0414\u043e\u0441\u0442\u0438\u0433\u043d\u0443\u0442\u043e \u043d\u043e\u0432\u043e\u0435 \u0437\u0432\u0430\u043d\u0438\u0435 \xab"+t.rank.name+"\xbb",caption:"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u0441 \u043d\u043e\u0432\u044b\u043c \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0435\u043c! \u041c\u044b \u0434\u0443\u043c\u0430\u0435\u043c \u0432\u044b \u0434\u043e\u0431\u044c\u0435\u0442\u0435\u0441\u044c \u0431\u043e\u043b\u044c\u0448\u0435\u0433\u043e! \u041f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0431\u043e\u043d\u0443\u0441 \u0437\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044e \u0441\u0432\u043e\u0438\u0445 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u0432 \u0418\u0441\u0442\u043e\u0440\u0438\u044f\u0445.",actions:[{title:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0449\u0451 "+t.bonus+" \u0431\u0430\u043b\u043b\u043e\u0432",mode:"primary",action:function(){c.a.send("VKWebAppShowStoryBox",{background_type:"image",url:"https://sun9-56.userapi.com/c855620/v855620203/21b0af/hX1H8hzH848.jpg",attachment:{text:"open",type:"url",url:"https://vk.com/app7405679"}}).catch((function(){return O.home.rankUpBonus(t.uid,(function(n){return t.onLevelUpdate(n).then(e)}))}))}},{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:e}]})}((function(){n.close()}),this.props.modalParams):r.a.createElement(U.n,{id:te}))}}]),n}(r.a.Component),ae=Object(P.b)((function(e,t){return e.modal?{activeModal:e.modal.activeModal,modalParams:e.modal.modalParams}:{}}),(function(e){return{onOpenModal:function(t){return new Promise((function(n){return C(t).then((function(t){e(t),n()}))}))}}}))(ne),re=n(243),oe=n.n(re),ie=(n(173),n(430),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(U.p,{id:this.props.id,separator:!1},r.a.createElement(U.s,{separator:!1},r.a.createElement("b",null,"#"),r.a.createElement("b",null,"\u041b"),r.a.createElement("b",null,"\u0423"),r.a.createElement("b",null,"\u0427"),r.a.createElement("b",null,"\u0428"),r.a.createElement("b",null,"\u0415"),r.a.createElement("b",null,"\u0414"),r.a.createElement("b",null,"\u041e"),r.a.createElement("b",null,"\u041c"),r.a.createElement("b",null,"\u0410")),r.a.createElement(U.i,null,r.a.createElement("img",{className:"Home",src:oe.a,alt:"\u0414\u043e\u043c"}),r.a.createElement(U.d,{className:"Explanation"},r.a.createElement("p",null,"\u0421\u0430\u043c\u044b\u043c \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b\u043c \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u043e\u043c \u0434\u043b\u044f \u0437\u0430\u0449\u0438\u0442\u044b \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0421\u0410\u041c\u041e\u0418\u0417\u041e\u041b\u042f\u0426\u0418\u042f \u043e\u0442 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 \u0443\u0433\u0440\u043e\u0437. \u0421\u0435\u0439\u0447\u0430\u0441 \u043a\u0440\u0430\u0439\u043d\u0435 \u0432\u0430\u0436\u043d\u043e \u0438\u0437\u0431\u0435\u0433\u0430\u0442\u044c \u043b\u0438\u0448\u043d\u0438\u0445 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432."),r.a.createElement("p",null,"\u0414\u043e\u043a\u0430\u0436\u0438 \u0441\u0432\u043e\u044e \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u0441\u0430\u043c\u043e\u043c\u0443 \u0441\u0435\u0431\u0435, \u0434\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u0431\u043b\u0438\u0437\u043a\u0438\u043c!")),r.a.createElement(U.d,null,r.a.createElement(U.b,{size:"xl",level:"2",onClick:function(){e.props.onOpenModal(F)}},"\u041d\u0430\u0447\u0430\u0442\u044c! +10 \u0431\u0430\u043b\u043b\u043e\u0432"))))}}]),n}(r.a.Component)),le=Object(P.b)((function(e,t){return{}}),(function(e){return{onOpenModal:function(t,n){return new Promise((function(a){return C(t,n).then((function(t){e(t),a()}))}))}}}))(ie),ce=n(77),se="#915e3a",ue=[{name:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f",value:1},{name:"\u041d\u0435\u0432\u044b\u0441\u043e\u043a\u0430\u044f",value:1},{name:"\u0423\u043c\u0435\u0440\u0435\u043d\u043d\u0430\u044f",value:1},{name:"\u041e\u0447\u0435\u043d\u044c \u0431\u043e\u043b\u044c\u0448\u0430\u044f",value:1},{name:"\u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f",value:1},{name:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f",value:1}],me=["#6dd627","#9ceb60","#00b8f0","#4acfff","#b89558","#ff6242"],pe={0:[0,-3],1:[-5,-8],2:[-9,-12],3:[9,-12],4:[7,-8],5:[0,-4]},de=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).renderActiveShape=function(e){var t=Math.PI/180,n=e.cx,o=e.cy,i=e.midAngle,l=e.innerRadius,c=e.outerRadius,s=e.startAngle,u=e.endAngle,m=e.fill,p=e.payload,d=Math.sin(-t*i),h=Math.cos(-t*i),f=n+(l-22)*h+pe[a.props.group][0]+10*(h>=0?1:-1),v=o+(l-22)*d+pe[a.props.group][1];return r.a.createElement("g",null,r.a.createElement("text",{x:n,y:o-20,textAnchor:"middle",fill:se,style:{fontSize:"24px"}},a.props.level),r.a.createElement("text",{x:n,y:o,dy:-2,textAnchor:"middle",fill:m},p.name),r.a.createElement("text",{x:n,y:o,dy:12,textAnchor:"middle",fill:"gray",style:{fontSize:"13px"}},"\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u0440\u0430\u0436\u0435\u043d\u0438\u044f"),r.a.createElement(ce.d,{cx:n,cy:o,innerRadius:l,outerRadius:c,startAngle:s,endAngle:u,fill:m}),r.a.createElement("g",{transform:"translate(".concat(f+2*(h>=0?1:-1)," ").concat(v,")")},r.a.createElement("g",{transform:"rotate(".concat(180-i,")")},r.a.createElement("polygon",{points:"8,-8 8,8 -8,0",style:{fill:m}}))))},a.state={width:null,height:null},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Div",ref:function(t){if(t&&!e.state.width){var n=t.getBoundingClientRect().height;e.setState({width:t.getBoundingClientRect().width,height:n<104?104:n})}}},this.state.width&&r.a.createElement(ce.c,{width:this.state.width,height:this.state.height,onMouseEnter:this.onPieEnter},r.a.createElement(ce.b,{data:ue,startAngle:180,endAngle:0,innerRadius:70,outerRadius:90,fill:"#8884d8",paddingAngle:5,cy:85,activeIndex:5-this.props.group,activeShape:this.renderActiveShape},ue.map((function(e,t){return r.a.createElement(ce.a,{fill:me[t%me.length],key:t})})))))}}]),n}(r.a.Component),he=function(e,t){var n=(ue.length-e-1)%ue.length,a=ue[n].name;return t&&(a=a.charAt(0).toLowerCase()+a.slice(1)),r.a.createElement("div",null,t&&r.a.createElement("span",null,"\u041e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c: "),r.a.createElement("span",{style:{color:me[n]}},a))},fe=de,ve=n(255),Ee=n.n(ve),ge=(n(604),n(139)),be=n.n(ge),ye=n(140),ke=n.n(ye),Oe=n(256),Pe=n.n(Oe),je=n(141),we=n.n(je),Ce=n(257),Ue=n.n(Ce),Le=(n(605),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={timer:null},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({timer:window.setInterval((function(){O.home.level(e.props.fetchedUser.id).then((function(t){return e.props.onLevelUpdate(t)}))}),6e4)})}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.state.timer)}},{key:"confirm",value:function(){var e=this;c.a.send("VKWebAppGetGeodata",{}).then((function(t){O.home.confirm(e.props.fetchedUser.id,t.lat,t.long,(function(n){return e.afterConfirm(n,t.lat,t.long)}))})).catch((function(){O.home.confirm(e.props.fetchedUser.id,null,null,(function(t){return e.afterConfirm(t)}))}))}},{key:"afterConfirm",value:function(e,t,n){var a=this;this.props.onLevelUpdate(e).then((function(){var r=e.result;if(e.rank.rankUp)a.props.onOpenModal(te,{uid:a.props.fetchedUser.id,rank:e.rank,bonus:e.rank.bonus,onLevelUpdate:a.props.onLevelUpdate});else{var o=parseInt(r.status);1&o?a.props.onOpenModal(Q,{value:r.value}):2&o?a.props.level.checks.length<8&&t?a.props.onOpenModal($,{uid:a.props.fetchedUser.id,lat:t,long:n,onLevelUpdate:a.props.onLevelUpdate}):a.props.onOpenModal(Z,{repeat:function(){return a.confirm()}}):4&o?a.props.onOpenModal(Y,{uid:a.props.fetchedUser.id,onLevelUpdate:a.props.onLevelUpdate,currentValue:r.value,promiseValue:e.promiseValue}):8&o&&a.props.onOpenModal(ee)}}))}},{key:"statusOfCheck",value:function(e){var t=parseInt(e.status);return 1&t?{title:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e",icon:r.a.createElement(be.a,{style:{color:"green"}})}:2&t?{title:"\u041d\u0435 \u0434\u043e\u043c\u0430",icon:r.a.createElement(ke.a,{style:{color:"red"}})}:4&t?{title:"\u041f\u043e\u0437\u0434\u043d\u043e",icon:r.a.createElement(Pe.a,{style:{color:"red"}})}:16&t?{title:"\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u043e",icon:r.a.createElement(ke.a,{style:{color:"gray"}})}:8&t?{title:"\u041d\u0435\u0442 \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0445",icon:r.a.createElement(we.a,{style:{color:"gray"}})}:{title:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f",icon:r.a.createElement(Ue.a,{style:{color:"var(--button_primary_background)"}})}}},{key:"levelName",value:function(){return this.props.fetchedUser.city&&this.props.fetchedUser.city.title?" \u0433."+this.props.fetchedUser.city.title:""}},{key:"render",value:function(){var e=this;return r.a.createElement(U.p,{id:this.props.id,separator:!1},r.a.createElement(U.s,{left:r.a.createElement(U.q,{onClick:function(){e.props.onNavigate("rating")}},r.a.createElement(Ee.a,null))},r.a.createElement("b",null,"#"),r.a.createElement("b",null,"\u041b"),r.a.createElement("b",null,"\u0423"),r.a.createElement("b",null,"\u0427"),r.a.createElement("b",null,"\u0428"),r.a.createElement("b",null,"\u0415"),r.a.createElement("b",null,"\u0414"),r.a.createElement("b",null,"\u041e"),r.a.createElement("b",null,"\u041c"),r.a.createElement("b",null,"\u0410")),this.props.fetchedUser&&r.a.createElement(U.i,{separator:"hide"},r.a.createElement(U.m,{className:"Info"},r.a.createElement(U.c,null,r.a.createElement(fe,{group:this.props.level.group,level:this.props.level.value})),this.props.level.rank&&r.a.createElement(U.c,null,r.a.createElement(U.d,{className:"Rank"},r.a.createElement(U.l,{header:this.props.level.rank.name},r.a.createElement(U.t,{value:this.props.level.rank.progress}),r.a.createElement("div",{className:"InfoRow__footer"},this.props.level.rank.nextName)))))),this.props.level&&this.props.level.checks&&r.a.createElement(U.i,null,this.props.level.noGeodata&&r.a.createElement(U.d,null,r.a.createElement(U.b,{size:"xl",before:r.a.createElement(we.a,null),onClick:function(){e.props.permission()},mode:"destructive"},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0435")),this.props.level.checks.length>0&&!this.props.level.checks[0].confirmed&&r.a.createElement(U.d,null,r.a.createElement(U.b,{size:"xl",mode:"commerce",onClick:function(){e.confirm()}},"\u042f \u0434\u043e\u043c\u0430")),r.a.createElement(U.j,null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438"),r.a.createElement(U.m,{className:"ChecksList"},r.a.createElement(U.c,{before:r.a.createElement(be.a,{style:{color:"green"}}),key:"check_head"},r.a.createElement(U.d,null,"\u0412\u0440\u0435\u043c\u044f"),r.a.createElement(U.d,null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),r.a.createElement(U.d,{className:"Values"},"\u0411\u0430\u043b\u043b\u044b")),0===this.props.level.checks.length&&r.a.createElement(U.c,{key:"check_empty",style:{textAlign:"center"}},r.a.createElement(U.d,null,"\u0427\u0435\u0440\u0435\u0437 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u0438\u043d\u0443\u0442 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u0435\u0440\u0432\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430")),this.props.level.checks.map((function(t){return r.a.createElement(U.c,{key:"check_"+t.check_id,before:e.statusOfCheck(t).icon},r.a.createElement(U.d,null,t.sended),r.a.createElement(U.d,null,e.statusOfCheck(t).title),r.a.createElement(U.d,{className:"Values",style:t.value>0?{color:"green",fontWeight:"bold"}:{}},t.value))})))))}}]),n}(r.a.Component)),Ne=Object(P.b)((function(e,t){return{level:e.level.level}}),(function(e){return{onLevelUpdate:function(t){return new Promise((function(n){return j(t).then((function(t){e(t),n()}))}))},onNavigate:function(t,n,a){return new Promise((function(r){return w(t,n,a).then((function(t){e(t),r()}))}))},onOpenModal:function(t,n){return new Promise((function(a){return C(t,n).then((function(t){e(t),a()}))}))}}}))(Le),_e=n(258),Me=n.n(_e),xe=n(259),Se=n.n(xe),Ae=(n(606),Object(U.A)()),De=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={isLoading:!0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.rating.global((function(t){e.setState({isLoading:!1,table:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(U.p,{id:this.props.id},r.a.createElement(U.s,{left:r.a.createElement(U.q,{onClick:function(){e.props.onNavigate("level")}},Ae===U.k?r.a.createElement(Me.a,null):r.a.createElement(Se.a,null))},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),!this.state.isLoading&&r.a.createElement(U.i,null,r.a.createElement(U.m,{className:"RatingList"},r.a.createElement(U.c,{before:r.a.createElement(U.a,null)},r.a.createElement(U.d,null),r.a.createElement(U.d,null,"\u0411\u0430\u043b\u043b\u044b")),this.state.table.map((function(e,t){return r.a.createElement(U.c,{key:"friend_"+e.uid,before:e.photo_200?r.a.createElement(U.a,{src:e.photo_200}):null,description:he(e.group,!0)},r.a.createElement(U.d,null,"".concat(e.first_name," ").concat(e.last_name),e.rank&&r.a.createElement("div",{className:"Rank"},e.rank)),r.a.createElement(U.d,{className:"Point"},e.value))})))),this.state.isLoading&&r.a.createElement(U.u,{size:"large"}))}}]),n}(r.a.Component),Ve=Object(P.b)((function(e,t){return{}}),(function(e){return{onNavigate:function(t,n,a){return new Promise((function(r){return w(t,n,a).then((function(t){e(t),r()}))}))},onOpenModal:function(t,n){return new Promise((function(a){return C(t,n).then((function(t){e(t),a()}))}))}}}))(De),Ie=n(260),Te=n.n(Ie),Re=(n(607),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,contextOpened:!1,activeTab:"common"},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchedUser&&this.common();var t=document.getElementById("upload-input");t&&t.addEventListener("change",(function(){e.setState({isLoading:!0}),O.upload("dairy/upload?uid="+e.props.fetchedUser.id,t,(function(t){t?e.setState({isLoading:!1,self:t,activeTab:"self"}):e.setState({isLoading:!1})}))}),!1)}},{key:"self",value:function(e){var t=this;e=e||1,this.props.fetchedUser&&O.dairy.self(this.props.fetchedUser.id,e,(function(e){t.setState({isLoading:!1,self:e})})),this.setState({isLoading:!0,contextOpened:!1,activeTab:"self"})}},{key:"common",value:function(e){var t=this;e=e||1,O.dairy.common(this.props.fetchedUser.id,e,(function(e){t.setState({isLoading:!1,common:e})})),this.setState({isLoading:!0,contextOpened:!1,activeTab:"common"})}},{key:"like",value:function(e,t,n){var a=this,r="BUTTON"===n.target.tagName?n.target:n.target.parentNode;e.liked?O.dairy.unlike(this.props.fetchedUser.id,e.id,e.owner.uid,(function(n){if(n){var o=Object.assign({},a.state.common);r.className="DairyPhoto__LikeBtn",o.photos[t].likes=(e.likes||0)-1,o.photos[t].liked=!1,a.setState({common:o})}})):O.dairy.like(this.props.fetchedUser.id,e.id,e.owner.uid,(function(n){if(n){var o=Object.assign({},a.state.common);r.className="DairyPhoto__LikeBtnActive",o.photos[t].likes=(e.likes||0)+1,o.photos[t].liked=!0,a.setState({common:o})}}))}},{key:"render",value:function(){var e=this;return r.a.createElement(U.p,{id:this.props.id},r.a.createElement(U.s,{left:this.props.fetchedUser&&r.a.createElement(U.g,{action:O.getDomain("dairy/upload?uid="+this.props.fetchedUser.id),id:"upload-form",className:"UploadFrom"},r.a.createElement(U.f,{before:r.a.createElement(Te.a,null),size:"l",id:"upload-input"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),separator:!1},r.a.createElement(U.x,null,r.a.createElement(U.y,{selected:!0,onClick:function(){return e.setState({contextOpened:!e.state.contextOpened})}},"common"===this.state.activeTab?"\u041e\u0431\u0449\u0438\u0439":"\u0421\u0432\u043e\u0439"))),r.a.createElement(U.r,{opened:this.state.contextOpened,onClose:function(){e.setState({contextOpened:!1})}},r.a.createElement(U.m,null,r.a.createElement(U.c,{onClick:function(){return e.self()}},"\u0421\u0432\u043e\u0439"),r.a.createElement(U.c,{onClick:function(){return e.common()}},"\u041e\u0431\u0449\u0438\u0439"))),!this.state.isLoading&&r.a.createElement(U.z,{id:"tabs-view",activePanel:this.state.activeTab,header:!1},r.a.createElement(U.p,{id:"self"},this.state.self&&r.a.createElement(U.i,null,r.a.createElement(U.m,{className:"DairyList"},0===this.state.self.photos.length&&r.a.createElement(U.d,{className:"DairyDescription"},"\u0410 \u043a\u0430\u043a \u0432\u044b \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0432 \u0441\u0430\u043c\u043e\u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438?",r.a.createElement("br",null),r.a.createElement("br",null),"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0435 \u0444\u043e\u0442\u043e, \u0432 \u0441\u0432\u043e\u0439 \u0434\u043d\u0435\u0432\u043d\u0438\u043a, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043f\u0435\u0447\u0430\u0442\u043b\u0435\u0442\u044c \u0445\u0440\u043e\u043d\u043e\u043b\u043e\u0433\u0438\u044e \u044d\u0442\u0438\u0445 \u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0445 \u0434\u043d\u0435\u0439, \u0430 \u0442\u0430\u043a\u0436\u0435  \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u043d\u0443\u0441\u043d\u044b\u0435 \u043e\u0447\u043a\u0438 \u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443 \u0434\u043d\u0435\u0432\u043d\u0438\u043a\u043e\u0432 \u0441\u043e \u0432\u0441\u0435\u0439 \u0441\u0442\u0440\u0430\u043d\u044b!",r.a.createElement("br",null),r.a.createElement("br",null),"\u0427\u0435\u043c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0435\u0435 \u0432\u0430\u0448\u0435 \u0444\u043e\u0442\u043e \u043e\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u0430\u043b\u043b\u043e\u0432 \u0432\u0430\u043c \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u043e."),this.state.self.photos.length>0&&this.state.self.photos.map((function(e,t){return r.a.createElement(U.c,{key:t},r.a.createElement("div",{className:"DairyPhoto"},r.a.createElement("div",{className:"DairyPhoto__Header"},e.date),r.a.createElement(U.h,null,r.a.createElement("div",{className:"img-wrap"},r.a.createElement("img",{src:e.link,alt:t}),r.a.createElement("button",{type:"button",className:"DairyPhoto__LikeBtn",disabled:"disabled"},r.a.createElement("div",{className:"DairyPhoto__LikeBtnCounter"},"x ",e.likes||0))))))}))),this.state.self.pagination.count>1&&r.a.createElement(U.c,{key:"pagination",before:this.state.self.pagination.current>1&&r.a.createElement(U.b,{onClick:function(){return e.self(e.state.self.pagination.current-1)}},"\u041d\u0430\u0437\u0430\u0434"),indicator:this.state.self.pagination.current<this.state.self.pagination.count&&r.a.createElement(U.b,{size:"l",onClick:function(){return e.self(e.state.self.pagination.current+1)}},"\u0414\u0430\u043b\u0435\u0435")}))),r.a.createElement(U.p,{id:"common"},this.state.common&&r.a.createElement(U.i,null,r.a.createElement(U.m,{className:"DairyList"},this.state.common.photos.map((function(t,n){return r.a.createElement(U.c,{key:n},r.a.createElement("div",{className:"DairyPhoto"},r.a.createElement("div",{className:"DairyPhoto__Header"},t.owner.first_name+" "+t.owner.last_name),r.a.createElement(U.h,null,r.a.createElement("div",{className:"img-wrap"},r.a.createElement("img",{src:t.link,alt:n}),r.a.createElement(U.a,{src:t.owner.photo_200}),r.a.createElement("button",{type:"button",className:t.liked?"DairyPhoto__LikeBtnActive":"DairyPhoto__LikeBtn",onClick:function(a){return e.like(t,n,a)}},r.a.createElement("div",{className:"DairyPhoto__LikeBtnCounter"},"x ",t.likes||0))))))}))),this.state.common.pagination.count>1&&r.a.createElement(U.c,{key:"pagination",before:this.state.common.pagination.current>1&&r.a.createElement(U.b,{onClick:function(){return e.common(e.state.common.pagination.current-1)}},"\u041d\u0430\u0437\u0430\u0434"),indicator:this.state.common.pagination.current<this.state.common.pagination.count&&r.a.createElement(U.b,{size:"l",onClick:function(){return e.common(e.state.common.pagination.current+1)}},"\u0414\u0430\u043b\u0435\u0435")})))),this.state.isLoading&&r.a.createElement(U.u,{size:"large"}))}}]),n}(r.a.Component)),ze=Object(P.b)((function(e,t){return{}}),(function(e){return{onOpenModal:function(t,n){return new Promise((function(a){return C(t,n).then((function(t){e(t),a()}))}))}}}))(Re),Be=n(261),qe=n.n(Be),We=n(262),Ge=n.n(We),Ke=n(263),He=n.n(Ke),Fe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement(U.e,{activeStory:this.props.activeStory,tabbar:"begin"!==this.props.activePanel&&r.a.createElement(U.v,null,r.a.createElement(U.w,{onClick:this.props.onNavigate,selected:"level"===this.props.activeStory,"data-story":"level",text:"\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441"},r.a.createElement(qe.a,null)),r.a.createElement(U.w,{onClick:this.props.onNavigate,selected:"dairy"===this.props.activeStory,"data-story":"dairy",text:"\u0414\u043d\u0435\u0432\u043d\u0438\u043a"},r.a.createElement(Ge.a,null)),r.a.createElement(U.w,{onClick:this.props.onNavigate,selected:"rating"===this.props.activeStory,"data-story":"rating",text:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"},r.a.createElement(He.a,null)))},r.a.createElement(U.z,{id:"level",activePanel:this.props.activePanel,header:!1,modal:r.a.createElement(ae,{permission:this.props.permission})},r.a.createElement(Ne,{id:"level",fetchedUser:this.props.user,permission:this.props.permission}),r.a.createElement(le,{id:"begin"})),r.a.createElement(U.z,{id:"dairy",activePanel:this.props.activePanel,header:!1,modal:r.a.createElement(ae,{permission:this.props.permission})},r.a.createElement(ze,{id:"dairy",fetchedUser:this.props.user})),r.a.createElement(U.z,{id:"rating",activePanel:this.props.activePanel,header:!1,modal:r.a.createElement(ae,{permission:this.props.permission})},r.a.createElement(Ve,{id:"rating"})))}}]),n}(r.a.Component),Je=Object(P.b)((function(e,t){return e.navigation?{activeStory:e.navigation.activeStory,activePanel:e.navigation.activePanel,params:e.navigation.params}:{}}),(function(e){return{onNavigate:function(t,n,a){return new Promise((function(r){return w(t,n,a).then((function(t){e(t),r()}))}))}}}))(Fe),Xe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={user:null,locationPermissionCount:0},a.setUser=function(e){a.setState({user:e})},a.begin=function(e){var t=Object.assign({},a.state.user);e&&Object.assign(t,{lat:e.lat,long:e.long}),O.home.begin(t,(function(e){e&&a.props.onLevelUpdate(e).then((function(){a.props.onNavigate("level")}))}))},a.permission=function(){a.props.onOpenModal(null),c.a.send("VKWebAppAllowMessagesFromGroup",{group_id:194414850}).then((function(e){(a.props.permissions&&a.props.permissions.geodata&&a.props.permissions.geodata.available?new Promise((function(e,t){e(a.props.permissions.geodata)})):c.a.send("VKWebAppGetGeodata",{})).then((function(e){a.props.onUpdatePermission({geodata:e}),e.available&&a.begin(e)})).catch((function(){a.props.onUpdatePermission({geodata:!1});var e=a.state.locationPermissionCount+1;a.setState({locationPermissionCount:e}),e>1?a.begin():a.props.onOpenModal(X)}))})).catch((function(){a.props.onOpenModal(J)}))},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;function t(){return(t=Object(m.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.send("VKWebAppGetUserInfo");case 2:return n=t.sent,e.setUser(n),t.next=6,O.home.level(n.id);case 6:(a=t.sent)?e.props.onLevelUpdate(a).then((function(){e.permission()})):e.props.onNavigate("level","begin");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){t.apply(this,arguments)}()}},{key:"render",value:function(){return r.a.createElement(Je,{user:this.state.user,permission:this.permission})}}]),n}(r.a.Component),Qe=Object(P.b)((function(e,t){return{permissions:e.permissions?e.permissions.permissions:null}}),(function(e){return{onLevelUpdate:function(t){return new Promise((function(n){return j(t).then((function(t){e(t),n()}))}))},onNavigate:function(t,n,a){return new Promise((function(r){return w(t,n,a).then((function(t){e(t),r()}))}))},onOpenModal:function(t){return new Promise((function(n){return C(t).then((function(t){e(t),n()}))}))},onUpdatePermission:function(t){return new Promise((function(n){return function(e){return new Promise((function(t,n){t({type:"PERMISSION_UPDATE",permission:e})}))}(t).then((function(t){e(t),n()}))}))}}}))(Xe),Ye=n(41),Ze=n(142),$e=n(264),et=n.n($e);var tt=Object(Ye.b)({navigation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATE":return Object.assign({},e,{activeStory:t.activeStory,activePanel:t.activePanel,params:t.params});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MODAL_OPEN":return Object.assign({},e,{activeModal:t.activeModal,modalParams:t.modalParams});default:return e}},level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEVEL_UPDATE":return Object.assign({},e,{level:t.level});default:return e}},permissions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PERMISSION_UPDATE":return Object.assign({},e,{permissions:Object.assign({},e,t.permission)});default:return e}}}),nt=function(e,t){return tt(e,t)},at={key:"root",storage:et.a},rt=Object(Ze.a)(at,nt),ot=Object(Ye.c)(rt),it=Object(Ze.b)(ot),lt=n(265);c.a.send("VKWebAppInit"),i.a.render(r.a.createElement(P.a,{store:ot},r.a.createElement(lt.a,{loading:null,persistor:it},r.a.createElement(Qe,null))),document.getElementById("root"))}},[[337,1,2]]]);
//# sourceMappingURL=main.3d95b02f.chunk.js.map