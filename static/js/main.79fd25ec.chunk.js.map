{"version":3,"sources":["img/home.png","img/rankup.png","core/api/home.js","core/api/rating.js","core/api/Api.js","redux/actions/level.js","redux/actions/modal.js","panels/Home.js","panels/Begin.js","modals/Modal.js","modals/AreAtHome.js","modals/NotAllowLocation.js","modals/NotAllowMessages.js","modals/Reward.js","modals/Skipped.js","modals/NotHome.js","modals/NoGeodata.js","modals/RankUp.js","constants/Colors.js","components/DangerMeter.js","panels/Level.js","panels/Rating.js","App.js","redux/actions/permissions.js","redux/reducers/index.js","redux/reducers/modal.js","redux/reducers/level.js","redux/reducers/permissions.js","redux/index.js","index.js"],"names":["module","exports","api","home","begin","body","handler","post","method","level","uid","request","confirm","lat","long","params","Object","entries","map","key","val","join","cancelLate","rankUpBonus","rating","global","config","window","location","host","tag","options","fetch","abort","keys","k","encodeURIComponent","then","response","ok","json","text","console","error","url","substr","catch","assign","JSON","stringify","forEach","a","updateLevel","Promise","resolve","reject","type","openModal","activeModal","modalParams","Home","props","state","id","this","size","React","Component","connect","ownProps","Begin","separator","className","src","homePng","alt","onClick","start","MODAL_ARE_AT_HOME","MODAL_NOT_ALLOW_MESSAGES","MODAL_NOT_ALLOW_LOCATION","MODAL_REWARD","MODAL_SKIPPED","MODAL_NOT_HOME","MODAL_NO_GEODATA","MODAL_RANK_UP","Modal","onOpenModal","setActiveModal","modalClose","permission","onClose","close","icon","header","caption","actions","title","mode","action","NotAllowLocation","NotAllowMessages","value","Reward","setsOfActions","withCancelLate","promiseValue","bridge","send","message","attachments","Api","onLevelUpdate","currentValue","simple","style","color","Skipped","NotHome","NoGeodata","rank","name","rankUpPng","bonus","background_type","attachment","RankUp","modal","dispatch","data","COLORS","gft","1","2","3","4","5","6","DangerMeter","Math","PI","renderActiveShape","RADIAN","cx","cy","midAngle","innerRadius","outerRadius","startAngle","endAngle","fill","payload","sin","cos","ex","group","ey","x","y","textAnchor","Colors","fontSize","dy","transform","points","width","height","ref","el","getBoundingClientRect","setState","onMouseEnter","onPieEnter","paddingAngle","activeIndex","activeShape","entry","index","length","getGroupName","withCaption","Level","timer","setInterval","fetchedUser","clearInterval","afterConfirm","result","rankUp","parseInt","status","check","city","left","navigate","round","random","progress","nextName","checks","noGeodata","before","confirmed","textAlign","check_id","statusOfCheck","sended","fontWeight","osName","platform","Rating","isLoading","table","IOS","friend","photo_200","description","first_name","last_name","App","activePanel","user","locationPermissionCount","e","currentTarget","dataset","to","setUser","geodata","group_id","permissions","available","onUpdatePermission","this_","subscribe","detail","schemeAttribute","document","createAttribute","scheme","attributes","setNamedItem","fetchData","updatePermission","appReducer","combineReducers","rootReducer","persistConfig","storage","persistedReducer","persistReducer","store","createStore","persistor","persistStore","ReactDOM","render","loading","getElementById"],"mappings":"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","file":"static/js/main.79fd25ec.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/home.09715b70.png\";","module.exports = __webpack_public_path__ + \"static/media/rankup.ade1867c.png\";","/**\n *\n */\n\nconst api = {home: {\n  /**\n   * Список регионов России или стран\n   * @param {Object} body данные пользователя с координатами дома\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin: (body, handler) => {\n    return api.post({method: 'home/begin', body: body, handler: handler});\n  },\n\n  /**\n   * Получает уровень\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  level: (uid, handler) => {\n    return api.request({method: 'home/level?uid='+uid, handler: handler});\n  },\n\n  /**\n   * Подтвердить нахождение дома\n   * @param {Integer} uid ид. пользователя\n   * @param {Float} lat\n   * @param {Float} long\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  confirm: (uid, lat, long, handler) => {\n    let params = {uid: uid};\n\n    if(lat) {\n      params.lat = lat;\n      params.long = long;\n    }\n\n    return api.request({method: 'home/confirm?'+Object.entries(params).map(([key, val]) => `${key}=${val}`).join('&'), handler: handler});\n  },\n\n  /**\n   * Отменить последнее опоздание\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  cancelLate: (uid, handler) => {\n\n    return api.request({method: 'home/cancel-late?uid='+uid, handler: handler});\n  },\n\n  /**\n   * Бонус после получения нового звания\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  rankUpBonus: (uid, handler) => {\n\n    return api.request({method: 'home/rank-up-bonus?uid='+uid, handler: handler});\n  },\n}};\n\nexport default api;\n","/**\n * Методы для работы с регионами\n */\n\nconst api = {rating: {\n  /**\n   * Рейтинг срежи всех\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  global: (handler) => {\n    return api.request({method: 'rating/global', handler: handler});\n  }\n}};\n\nexport default api;\n","/**\n * Работа с сервером\n */\nimport home from './home';\nimport rating from './rating';\n\nconst config = {\n  domain: window.location.host != 'orlove.github.io' ? 'https://api.newsapp.me' :\n                                                       'https://rest-news.hozya.ru'\n};\n\nvar api = {\n  /**\n   * Запрос данных с сервера\n   * @param  {String}   method  api-метод\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  request: function ({method, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      params = '?'+params;\n    } else {\n      params = '';\n    }\n\n    return fetch(config.domain+'/'+method+params, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * POST-запросы\n   * @param  {String}   method  api-метод\n   * @param  {Object}   body    тело запроса\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  post: function ({method, body, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    options = Object.assign({\n      method: 'POST',\n      /*headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },*/\n      body: JSON.stringify(body)\n    }, options || {});\n\n    return fetch(config.domain+'/'+method, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * Отменяет запрос с ключем tag\n   * @param {mix} tag ключ запроса\n   */\n  abort: (tag) => {\n    fetch.abort(tag);\n  },\n  /**\n   * Список городов\n   * @param  {Function} handler обработчик ответа в случае успеха\n   */\n  /*cities: (handler) => {\n    return api.request({method: 'cities', handler: (response) => {\n      if(response.items) {\n        handler(response.items);\n      }\n    }});\n  }*/\n};\n\n// Сливаем каждый компонент с api\n[home, rating].forEach((a) => {\n  api = Object.assign(a, api);\n});\n\nexport default api;\n","/**\n * Действия связанные с балами\n */\n\n/**\n * Обновление балов\n *\n * @param  {Object} level\n * @return {Promise}\n */\nexport const updateLevel = (level) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'LEVEL_UPDATE',\n        level: level\n      });\n  });\n};\n","/**\n * Действия с модальными окнами\n */\n\n/**\n * Открыть модальное окно\n *\n * @param  {String} activeModal\n * @param  {Object} params\n * @return {Promise}\n */\nexport const openModal = (activeModal, modalParams) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'MODAL_OPEN',\n        activeModal: activeModal,\n        modalParams: modalParams\n      });\n  });\n};\n","import React from 'react';\nimport { Panel, PanelHeader, Button, Group, Cell, Div, ScreenSpinner } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { openRegionsList } from '../redux/actions/region';__\n\nclass Home extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<ScreenSpinner size='large' />\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\t//world: state.world\n\t};\n};\n\n/*const mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenRegionsList: (world) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenRegionsList(world).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};*/\n\nexport default connect(mapStateToProps/*, mapDispatchToProps*/)(Home);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Panel, PanelHeaderSimple, Button, Group, Cell, Div, View } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { openRegionsList } from '../redux/actions/region';\n\nimport homePng from '../img/home.png';\nimport '../styles/header.css';\nimport './Begin.css';\n\nclass Begin extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id} separator={false}>\n\t\t\t\t<PanelHeaderSimple><b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b></PanelHeaderSimple>\n\t\t\t\t<Group>\n\t\t\t\t\t<img className=\"Home\" src={homePng} alt=\"Дом\" />\n\t\t\t\t\t<Div className=\"Explanation\">\n\t\t\t\t\t\t<p>В сегодняшних реалиях пандемии короновирусной инфекции Covid-19, самым эффективным средством для защиты себя и своих близких ДО СИХ ПОР является САМОИЗОЛЯЦИЯ от источников угроз!</p>\n\t\t\t\t\t\t<p>Впервые в жизни, мы имеем возможность спасти всё человечество не вставая с дивана!</p>\n\t\t\t\t\t\t<p>И это - не просто мем!  Это ответственность за жизни и здоровье всех людей, что находятся рядом с нами!</p>\n\t\t\t\t\t\t<p>Присоединяйтесь к сообществу людей, готовых взять на себя ответственность за наше совместное будущее! Для этого надо немного:</p>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li>Оставайтесь дома</li>\n\t\t\t\t\t\t\t<li>Привлеките внимание к проблеме</li>\n\t\t\t\t\t\t\t<li>Наблюдайте за результатами - своими и ваших друзей</li>\n\t\t\t\t\t\t\t<li>Изучайте полезную информацию о пандемии covid-19 и принимайте своевременные меры</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</Div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Button size=\"xl\" level=\"2\" onClick={() => {this.props.start()}}>Начать!</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {};\n};\n\nexport default connect(mapStateToProps)(Begin);\n","import React from 'react';\nimport { ModalRoot, ModalCard } from '@vkontakte/vkui';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { openModal } from '../redux/actions/modal';\n\nimport AreAtHome from './AreAtHome';\nimport NotAllowLocation from './NotAllowLocation';\nimport NotAllowMessages from './NotAllowMessages';\nimport Reward from './Reward';\nimport Skipped from './Skipped';\nimport NotHome from './NotHome';\nimport NoGeodata from './NoGeodata';\nimport RankUp from './RankUp'\n\nexport const MODAL_ARE_AT_HOME = 'modal_are-at-home';\nexport const MODAL_NOT_ALLOW_MESSAGES = 'modal_not-allow-messages';\nexport const MODAL_NOT_ALLOW_LOCATION = 'modal_not-allow-location';\nexport const MODAL_REWARD = 'modal_reward';\nexport const MODAL_SKIPPED = 'modal_skipped';\nexport const MODAL_NOT_HOME = 'modal_not-home';\nexport const MODAL_NO_GEODATA = 'modal_no-geodata';\nexport const MODAL_RANK_UP = 'nodal_rank-up';\n\nclass Modal extends React.Component {\n\n  setActiveModal(activeModal) {\n    return this.props.onOpenModal(activeModal);\n  }\n\n  close() {\n    return this.setActiveModal(null);\n  }\n\n  render() {\n\n    /*let modals = [\n      AreAtHome(MODAL_ARE_AT_HOME, () => {this.close()}, this.props.permission),\n      NotAllowLocation(MODAL_NOT_ALLOW_LOCATION, () => {this.close()}, this.props.permission),\n      NotAllowMessages(MODAL_NOT_ALLOW_MESSAGES, () => {this.close()}, this.props.permission),\n      Reward(() => {this.close()}, this.props.modalParams),\n      Skipped(() => {this.close()}, this.props.modalParams),\n      NotHome(() => {this.close()}),\n      NoGeodata(() => {this.close()}),\n      RankUp(() => {this.close()}, this.props.modalParams)\n    ];*/\n\n    if(this.props.activeModal == MODAL_RANK_UP) {\n      //modals.push();\n    }\n\n    return (\n      <ModalRoot\n        activeModal={this.props.activeModal || null}\n        onClose={this.close}\n      >\n        {this.props.activeModal == MODAL_ARE_AT_HOME ? AreAtHome(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_ARE_AT_HOME} />}\n        {this.props.activeModal == MODAL_NOT_ALLOW_LOCATION ? NotAllowLocation(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_NOT_ALLOW_LOCATION} />}\n        {this.props.activeModal == MODAL_NOT_ALLOW_MESSAGES ? NotAllowMessages(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_NOT_ALLOW_MESSAGES} />}\n        {this.props.activeModal == MODAL_REWARD ? Reward(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_REWARD} />}\n        {this.props.activeModal == MODAL_SKIPPED ? Skipped(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_SKIPPED} />}\n        {this.props.activeModal == MODAL_NOT_HOME ? NotHome(() => {this.close()}) : <ModalCard id={MODAL_NOT_HOME} />}\n        {this.props.activeModal == MODAL_NO_GEODATA ? NoGeodata(() => {this.close()}) : <ModalCard id={MODAL_NO_GEODATA} />}\n        {this.props.activeModal == MODAL_RANK_UP ? RankUp(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_RANK_UP} />}\n      </ModalRoot>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn state.modal ? {\n    activeModal: state.modal.activeModal,\n    modalParams: state.modal.modalParams,\n  } : {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenModal: (activeModal) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_ARE_AT_HOME} from './Modal';\n\nimport Icon28HomeOutline from '@vkontakte/icons/dist/28/home_outline';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_ARE_AT_HOME}\n    onClose={() => modalClose()}\n    icon={<Icon28HomeOutline />}\n    header=\"Вы подтверждаете, что находитесь дома сейчас?\"\n    caption=\"Очки самоизоляции будут начисляться за вход в приложение ТОЛЬКО из того места где Вы находитесь сейчас!\"\n    actions={[{\n      title: 'Да, я дома',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_ALLOW_LOCATION} from './Modal';\n\nimport Icon28CompassOutline from '@vkontakte/icons/dist/28/compass_outline';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_LOCATION}\n    onClose={() => modalClose()}\n    icon={<Icon28CompassOutline />}\n    header=\"Вам нужно разрешить доступ к геопозиции\"\n    caption=\"Доступ к Вашей гепозиции предоставляется только на момент нахождения в приложении. Без данного разрешения мы не сможем начислять Вам баллы. Внимание! Мы не используем вашу геопозицию ни в каких целях помимо игрового процесса.\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_ALLOW_MESSAGES} from './Modal';\n\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_MESSAGES}\n    onClose={() => modalClose()}\n    icon={<Icon28Messages />}\n    header=\"Вам нужно разрешить отправку сообщений\"\n    caption=\"Без данного разрешения вы не сможете в полной мере воспользоваться функционалом приложения.\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_REWARD} from './Modal';\n\nimport Icon44SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_REWARD}\n    onClose={modalClose}\n    icon={<Icon44SmileOutline />}\n    header=\"Так держать!\"\n    caption={modalParams ? 'Отметка подтверждена, вам начислено'+modalParams.value+' баллов' : ''}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\nimport {MODAL_SKIPPED} from './Modal';\n\nimport Icon56RecentOutline from '@vkontakte/icons/dist/56/recent_outline';\n\nexport default (modalClose, modalParams) => {\n\n  modalParams = modalParams || {};\n\n  // Наборы кнопок\n  const setsOfActions = {\n    // Возможность анулировать опоздание\n    withCancelLate: [{\n      title: 'Опубликовать и получить '+modalParams.promiseValue+' баллов',\n      mode: 'primary',\n      action: () => {\n        bridge\n          .send(\"VKWebAppShowWallPostBox\", {\n            message: \"Привет, друзья! Я хочу чтобы эпидемия закончилась как можно скорее, поэтому вношу посильный вклад в борьбу с короновирусом!\\nЭто совсем несложно, присоединяйтесь!\\n#лучшедома #сидитедома #covid19\",\n            attachments: 'https://vk.com/app7405679'\n          })\n          .then(() => Api.home.cancelLate(modalParams.uid, (level) => modalParams.onLevelUpdate(level).then(modalClose)));\n      }\n    },{\n      title: 'Оставить '+modalParams.currentValue+' баллов',\n      mode: 'secondary',\n      action: modalClose\n    }],\n    // Без анулирования\n    simple: [{\n      title: modalParams.currentValue+' баллов',\n      mode: 'primary',\n      action: modalClose\n    }]\n  }\n\n  return (<ModalCard\n    id={MODAL_SKIPPED}\n    onClose={modalClose}\n    icon={<Icon56RecentOutline style={{color: 'red'}} />}\n    header=\"Вы опоздали! Прошло больше 20 минут..\"\n    caption={\n      modalParams.promiseValue > modalParams.currentValue ?\n        \"Поделитесь важной информацией о Covid-19 с друзьями, чтобы не потерять прогресс!\" :\n        \"Вы получите больше баллов если будите вовремя подтверждать запросы.\"\n    }\n    actions={setsOfActions[modalParams.promiseValue > modalParams.currentValue ? 'withCancelLate' : 'simple']}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_HOME} from './Modal';\n\nimport Icon28BlockOutline from '@vkontakte/icons/dist/28/block_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NOT_HOME}\n    onClose={modalClose}\n    icon={<Icon28BlockOutline />}\n    header=\"Вы покинули дом\"\n    caption=\"Пожалуйста, соблюдайте режим самоизоляции! Только добровольная изоляция от источников заражения может уберечь нас в это непростое время!\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NO_GEODATA} from './Modal';\n\nimport Icon32Place from '@vkontakte/icons/dist/32/place';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NO_GEODATA}\n    onClose={modalClose}\n    icon={<Icon32Place />}\n    header=\"Нет доступа к местоположению\"\n    caption=\"Отсутствует возможность оценить соблюдение режима самоизоляции, включите доступ к геопозиции на вашем устройстве!\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\nimport {MODAL_RANK_UP} from './Modal';\n\nimport rankUpPng from '../img/rankup.png';\n\nexport default (modalClose, modalParams) => {\n\n  modalParams = modalParams || {rank: {name: ''}};\n\n  return (<ModalCard\n    id={MODAL_RANK_UP}\n    onClose={modalClose}\n    icon={<img src={rankUpPng} alt=\"Новое звание\" />}\n    header={\"Достигнуто новое звание «\"+modalParams.rank.name+\"»\"}\n    caption=\"Поздравляем с новым достижением! Мы думаем вы добьетесь большего! Получите дополнительный бонус за публикацию своих достижений в Историях.\"\n    actions={[{\n      title: 'Опубликовать и получить ещё '+modalParams.bonus+' баллов',\n      mode: 'primary',\n      action: () => {\n        bridge\n    \t\t\t.send(\"VKWebAppShowStoryBox\", {\n    \t\t\t\tbackground_type: \"image\",\n    \t\t\t\turl: \"https://sun9-56.userapi.com/c855620/v855620203/21b0af/hX1H8hzH848.jpg\",\n    \t\t\t\tattachment: {\n    \t\t\t\t\ttext: 'open',\n    \t\t\t\t\ttype: 'url',\n    \t\t\t\t\turl: 'https://vk.com/app7405679'\n    \t\t\t\t}\n    \t\t\t})\n          .then(() => Api.home.rankUpBonus(modalParams.uid, (level) => modalParams.onLevelUpdate(level).then(modalClose)));\n      }\n    },{\n      title: 'Закрыть',\n      mode: 'secondary',\n      action: modalClose\n    }]}\n  >\n  </ModalCard>);\n};\n","const palette1 = '#6dd627';\nconst palette2 = '#ff6242';\nconst palette3 = '#e0e0e0';\nconst palette4 = '#00b8f0';\nconst palette5 = '#b89558';\nconst palette6 = '#9ceb60';\nconst palette7 = '#ff866e';\nconst palette8 = '#FFBB28';\nconst palette9 = '#4acfff';\nconst palette10 = '#915e3a';\n\nexport default {\n  palette1: palette1,\n  palette2: palette2,\n  palette3: palette3,\n  palette4: palette4,\n  palette5: palette5,\n  palette6: palette6,\n  palette7: palette7,\n  palette8: palette8,\n  palette9: palette9,\n  palette10: palette10,\n};\n","import React from 'react';\nimport { PieChart, Pie, Sector, Cell } from 'recharts';\nimport Colors from '../constants/Colors';\n\nconst data = [\n  {name: 'Минимальная', value: 1},\n  {name: 'Невысокая', value: 1},\n  {name: 'Умеренная', value: 1},\n  {name: 'Очень большая', value: 1},\n  {name: 'Критическая', value: 1},\n  {name: 'Максимальная', value: 1}\n];\nconst COLORS = [Colors.palette1, Colors.palette6, Colors.palette4, Colors.palette9, Colors.palette5, Colors.palette2];\n\n// Корректировка положения стрелочки\nconst gft = {\n  1: [0, -3],\n  2: [-5, -8],\n  3: [-9, -12],\n  4: [9, -12],\n  5: [7, -8],\n  6: [2, -4]\n};\n\nconst RADIAN = Math.PI / 180;\n\nclass DangerMeter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      width: null,\n      height: null\n    }\n  }\n\n  renderActiveShape = (props) => {\n    const RADIAN = Math.PI / 180;\n    const {\n      cx, cy, midAngle, innerRadius, outerRadius, startAngle, endAngle,\n      fill, payload\n    } = props;\n\n    const sin = Math.sin(-RADIAN * midAngle);\n    const cos = Math.cos(-RADIAN * midAngle);\n    const mx = cx + (innerRadius - 22) * cos + gft[this.props.group][0];\n    const my = cy + (innerRadius - 22) * sin + gft[this.props.group][1];\n    const ex = mx + (cos >= 0 ? 1 : -1) * 10;\n    const ey = my;\n    return (\n      <g>\n        <text x={cx} y={cy-16} textAnchor=\"middle\" fill={Colors.palette10} style={{fontSize: '24px'}}>{this.props.level}</text>\n        <text x={cx} y={cy} dy={8} textAnchor=\"middle\" fill={fill}>{payload.name}</text>\n        <Sector\n          cx={cx}\n          cy={cy}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n          startAngle={startAngle}\n          endAngle={endAngle}\n          fill={fill}\n          />\n        <g transform={`translate(${ex + (cos >= 0 ? 1 : -1) * 2} ${ey})`}>\n          <g transform={`rotate(${-midAngle + 180})`}>\n            {/* Draw the triangle with custom shape */}\n            <polygon points=\"8,-8 8,8 -8,0\" style={{fill: fill}}/>\n          </g>\n        </g>\n      </g>\n    );\n  }\n\n\trender () {\n  \treturn (\n      <div\n        className=\"Div\"\n        // Размер во всю ширину и высоту, но не меньше 104 по высоте\n        ref={el => {\n          if (!el || this.state.width) return;\n          let height = el.getBoundingClientRect().height;\n          this.setState({\n            width: el.getBoundingClientRect().width,\n            height: height < 104 ? 104 : height\n          });\n        }}\n      >\n      \t{this.state.width && <PieChart width={this.state.width} height={this.state.height} onMouseEnter={this.onPieEnter}>\n          <Pie\n            data={data}\n            startAngle={180}\n            endAngle={0}\n            innerRadius={70}\n            outerRadius={90}\n            fill=\"#8884d8\"\n            paddingAngle={5}\n            //label={(r) => {return r.name;}}\n            cy={85}\n            activeIndex={6 - this.props.group}\n            activeShape={this.renderActiveShape}\n          >\n          \t{\n            \tdata.map((entry, index) => <Cell fill={COLORS[index % COLORS.length]}/>)\n            }\n          </Pie>\n        </PieChart>}\n      </div>\n    );\n  }\n}\n\nexport const getGroupName = (group, withCaption) => {\n  let index = (data.length - group)%data.length;\n  return (<div>\n    {withCaption && <span>Опасность: </span>}\n    <span style={{color: COLORS[index]}}>{data[index].name}</span>\n  </div>);\n};\n\nexport default DangerMeter;\n","import React from 'react';\nimport { Panel, PanelHeaderSimple, PanelHeaderButton, Button, List, Group, Cell, Div, Avatar, Header, InfoRow, Progress } from '@vkontakte/vkui';\n\nimport { MODAL_REWARD, MODAL_SKIPPED, MODAL_NOT_HOME, MODAL_NO_GEODATA, MODAL_RANK_UP } from '../modals/Modal';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from '../redux/actions/level';\nimport { openModal } from '../redux/actions/modal';\n\nimport DangerMeter from '../components/DangerMeter';\n\nimport Icon24Poll from '@vkontakte/icons/dist/24/poll';\nimport Icon24ThumbUp from '@vkontakte/icons/dist/24/thumb_up';\nimport Icon24ThumbDown from '@vkontakte/icons/dist/24/thumb_down';\nimport Icon24RecentOutline from '@vkontakte/icons/dist/24/recent_outline';\nimport Icon24Place from '@vkontakte/icons/dist/24/place';\nimport Icon24Notification from '@vkontakte/icons/dist/24/notification';\nimport '../styles/header.css';\nimport './Level.css';\n\n\nclass Level extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n\n\t\tthis.state = {timer: null};\n  }\n\n\tcomponentDidMount() {\n\t\t// Таймер обновления (чтобы кнопка \"Я дома\" появилась если приложение открыто)\n\t\tthis.setState({timer: window.setInterval(() => {\n\t\t\tApi.home.level(this.props.fetchedUser.id).then((level) => this.props.onLevelUpdate(level));\n\t\t}, 60000)});\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.clearInterval(this.state.timer);\n  }\n\n\t/** Подтвердить находение дома */\n\tconfirm() {\n\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t.then((data) => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, data.lat, data.long, (level) => this.afterConfirm(level));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, null, null, (level) => this.afterConfirm(level));\n\t\t\t});\n\t}\n\n\tafterConfirm(level) {\n\t\tthis.props.onLevelUpdate(level).then(() => {\n\t\t\tconst result = level.result;\n\n\t\t\t// Получено новое звание\n\t\t\tif(level.rank.rankUp) {\n\t\t\t\tthis.props.onOpenModal(MODAL_RANK_UP, {\n\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\trank: level.rank,\n\t\t\t\t\tbonus: level.rank.bonus,\n\t\t\t\t\tonLevelUpdate: this.props.onLevelUpdate\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Обычное подтверждение проверки\n\t\t\telse {\n\t\t\t\tswitch(parseInt(result.status)) {\n\t\t\t\t\t// Подтверждено\n\t\t\t\t\tcase 1:\n\t\t\t\t\t// Отменил опоздание\n\t\t\t\t\tcase 36:\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_REWARD, {value: result.value});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// Не дома\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_HOME);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// Опаздал\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_SKIPPED, {\n\t\t\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\t\t\tonLevelUpdate: this.props.onLevelUpdate,\n\t\t\t\t\t\t\tcurrentValue: result.value,\n\t\t\t\t\t\t\tpromiseValue: level.promiseValue\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t// Нет геоданных\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NO_GEODATA);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatusOfCheck(check) {\n\n\t\tconst status = parseInt(check.status);\n\n\t\tif(status & 1) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Подтверждено',\n\t\t\t\ticon: (<Icon24ThumbUp style={{color: 'green'}} />)\n\t\t\t};\n\t\t} else if(status & 2) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Не дома',\n\t\t\t\ticon: (<Icon24ThumbDown style={{color: 'red'}} />)\n\t\t\t};\n\t\t} else if(status & 4) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Поздно',\n\t\t\t\ticon: (<Icon24RecentOutline style={{color: 'red'}} />)\n\t\t\t};\n\t\t} else if(status & 16) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Пропущено',\n\t\t\t\ticon: (<Icon24Place style={{color: 'gray'}} />)\n\t\t\t};\n\t\t} else if(status & 8) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Нет геоданных',\n\t\t\t\ticon: (<Icon24ThumbDown style={{color: 'gray'}} />)\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttitle: 'Требует подтверждения',\n\t\t\t\ticon: (<Icon24Notification style={{color: 'var(--button_primary_background)'}} />)\n\t\t\t};\n\t\t}\n\t}\n\n\tlevelName() {\n\t\tconst city = this.props.fetchedUser.city && this.props.fetchedUser.city.title ? ' г.' + this.props.fetchedUser.city.title : '';\n\t\treturn city;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id} separator={false}>\n\n\t\t\t\t<PanelHeaderSimple left={<PanelHeaderButton onClick={() => {this.props.navigate('rating')}}><Icon24Poll/></PanelHeaderButton>}>\n\t\t\t\t\t<b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b>\n\t\t\t\t</PanelHeaderSimple>\n\n\t\t\t\t{this.props.fetchedUser && <Group>\n\t\t\t\t\t<List className=\"Info\">\n\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t//before={this.props.fetchedUser.photo_200 ? <Avatar src={this.props.fetchedUser.photo_200}/> : null}\n\t\t\t\t\t\t\t//description={this.levelName()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*<Div>{`${this.props.fetchedUser.first_name} ${this.props.fetchedUser.last_name}`}</Div>*/}\n\t\t\t\t\t\t\t{/*this.props.fetchedUser.photo_200 ? <Avatar src={this.props.fetchedUser.photo_200}/> : null*/}\n\t\t\t\t\t\t\t<DangerMeter group={this.props.level.group || Math.round(Math.random()*6)} level={this.props.level.value} />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Cell>\n\t\t\t\t\t\t<Div className=\"Rank\">\n\t\t\t\t\t\t\t\t<InfoRow header={this.props.level.rank.name}>\n\t\t\t            <Progress value={this.props.level.rank.progress} />\n\t\t\t\t\t\t\t\t\t<div className=\"InfoRow__footer\">{this.props.level.rank.nextName}</div>\n\t\t\t          </InfoRow>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\n\t\t\t\t{this.props.level && this.props.level.checks && <Group>\n\t\t\t\t\t{this.props.level.noGeodata && <Div><Button size=\"xl\" before={<Icon24Place/>} onClick={() => {this.props.permission()}} mode=\"destructive\">Разрешить геоданные</Button></Div>}\n\t\t\t\t\t{this.props.level.checks.length > 0 && !this.props.level.checks[0].confirmed && <Div><Button size=\"xl\" mode=\"commerce\" onClick={()=>{this.confirm()}}>Я дома</Button></Div>}\n\t\t\t\t\t{/*<Div><Button size=\"xl\" onClick={() => {this.props.onOpenModal(MODAL_RANK_UP, {\n\t\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\t\trank: this.props.level.rank,\n\t\t\t\t\t\tbonus: 156//this.props.level.newRankBonud\n\t\t\t\t\t})}}>Rank Up</Button></Div>*/}\n\t\t\t\t\t<Header>Последние проверки</Header>\n\t\t\t\t\t<List className=\"ChecksList\">\n\t\t\t\t\t\t<Cell before={<Icon24ThumbUp style={{color: 'green'}} />} key=\"check_head\">\n\t\t\t\t\t\t\t<Div>Время</Div>\n\t\t\t\t\t\t\t<Div>Результат</Div>\n\t\t\t\t\t\t\t<Div className=\"Values\">Баллы</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.props.level.checks.length == 0 && <Cell key=\"check_empty\" style={{textAlign: 'center'}}><Div>Проверок ещё не было</Div></Cell>}\n\t\t\t\t\t\t{this.props.level.checks.map((check) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell key={\"check_\" + check.check_id} before={this.statusOfCheck(check).icon}>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{check.sended}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{this.statusOfCheck(check).title}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div className=\"Values\" style={check.value > 0 ? {color: 'green', fontWeight: 'bold'} : {}}>\n\t\t\t\t\t\t\t\t\t\t{check.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\tlevel: state.level.level\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Обновляет очки и таблицу проверок\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Level);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport { Panel, PanelHeaderSimple, PanelHeaderButton, List, Cell, Group, ScreenSpinner, Div, Avatar } from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\nimport {getGroupName} from '../components/DangerMeter';\n\n// Redux\nimport { connect } from 'react-redux';\n//import { selectRegion } from '../redux/actions/region';\n\nimport './Rating.css';\n\nconst osName = platform();\n\nclass Rating extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {isLoading: true};\n  };\n\n\t// Компонент примонтирован\n\tcomponentDidMount() {\n\t\tApi.rating.global((table) => {\n\t\t\tthis.setState({isLoading: false, table: table});\n\t\t});\n  };\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id} separator={false}>\n\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\tleft={<PanelHeaderButton onClick={() => {this.props.navigate('level')}}>\n\t\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t</PanelHeaderButton>}\n\t\t\t\t>\n\t\t\t\t\tРейтинг\n\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t{!this.state.isLoading && <Group>\n\t\t      <List className=\"RatingList\">\n\t\t\t\t\t\t<Cell before={<Avatar />}>\n\t\t\t\t\t\t\t<Div></Div>\n\t\t\t\t\t\t\t<Div>Баллы</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.state.table.map((friend, index) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tkey={\"friend_\" + friend.uid}\n\t\t\t\t\t\t\t\t\tbefore={friend.photo_200 ? <Avatar src={friend.photo_200}/> : null}\n\t\t\t\t\t\t\t\t\tdescription={getGroupName(friend.group, true)}\n\t\t\t\t\t\t\t\t>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{`${friend.first_name} ${friend.last_name}`}\n\t\t\t\t\t\t\t\t\t\t{friend.rank && <div className=\"Rank\">{friend.rank}</div>}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div className=\"Point\">\n\t\t\t\t\t\t\t\t\t\t{friend.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t\t{this.state.isLoading && <ScreenSpinner size='large' />}\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n\t\t\t//friends: state.rating.friends\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      /*onSelectRegion: (region) =>\n        new Promise((resolve) =>\n          selectRegion(region).then((action) => {\n            dispatch(action);\n            resolve();\n          })\n        )*/\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React from 'react';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport { ScreenSpinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from './core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from './redux/actions/level';\nimport { openModal } from './redux/actions/modal';\nimport { updatePermission } from './redux/actions/permissions';\n\nimport Home from './panels/Home';\nimport Begin from './panels/Begin';\nimport Level from './panels/Level';\nimport Rating from './panels/Rating';\nimport Modal, { MODAL_ARE_AT_HOME, MODAL_NOT_ALLOW_MESSAGES, MODAL_NOT_ALLOW_LOCATION } from './modals/Modal';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n\n    this.state = {\n\t\t\tactiveModal: null,\n\t\t\tactivePanel: 'home',\n\t\t\tuser: null,\n\t\t\tlocationPermissionCount: 0\n\t\t};\n\n\t\tthis.navigate = (e, props) => {\n\t\t\tthis.setState({activePanel: e.currentTarget ? e.currentTarget.dataset.to : e});\n\t\t};\n\n\t\tthis.setUser = (user) => {\n\t\t\tthis.setState({user: user});\n\t\t};\n\n\t\tthis.begin = (geodata) => {\n\t\t\tlet body = Object.assign({}, this.state.user);\n\n\t\t\tif(geodata) {\n\t\t\t\tObject.assign(body, {lat: geodata.lat, long: geodata.long})\n\t\t\t}\n\n\t\t\tApi.home.begin(body, (result) => {\n\t\t\t\tif(result) {\n\t\t\t\t\tthis.props.onLevelUpdate(result).then(() => {\n\t\t\t\t\t\tthis.navigate('level');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/** Запрос разрешений */\n\t\tthis.permission = () => {\n\t\t\t// Закрываем модальное окно (если открыто)\n\t\t\tthis.props.onOpenModal(null);\n\n\t\t\tbridge.send(\"VKWebAppAllowMessagesFromGroup\", {group_id: 193696611})\n\t\t\t\t.then(data => {\n\n\t\t\t\t\t// Доступ уже мог быть разрешен\n\t\t\t\t\t// На мобиле доступ каждый раз запрашивается заново, поэтому запоминаем разрешение\n\t\t\t\t\t(this.props.permissions && this.props.permissions.geodata && this.props.permissions.geodata.available ?\n\t\t\t\t\t\t\tnew Promise((resolve, reject) => {resolve(this.props.permissions.geodata)}) :\n\t\t\t\t\t\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t\t\t)\n\t\t\t\t\t\t.then((geodata) => {\n\t\t\t\t\t\t\tthis.props.onUpdatePermission({geodata: geodata});\n\t\t\t\t\t\t\tif(geodata.available) {\n\t\t\t\t\t\t\t\tthis.begin(geodata);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// Не разрешил доступ к геоданным\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tthis.props.onUpdatePermission({geodata: false});\n\t\t\t\t\t\t\tconst locationPermissionCount = this.state.locationPermissionCount + 1;\n\t\t\t\t\t\t\tthis.setState({locationPermissionCount: locationPermissionCount});\n\n\t\t\t\t\t\t\tif(locationPermissionCount > 1) {\n\t\t\t\t\t\t\t\tthis.begin();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_LOCATION);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t// Не разрешил отправлять сообщения\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_MESSAGES);\n\t\t\t\t});\n\t\t};\n  }\n\n\tcomponentDidMount() {\n\t\tconst this_ = this;\n\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tthis_.setUser(user);\n\n\t\t\tconst level = await Api.home.level(user.id);\n\t\t\tif(level) {\n\t\t\t\tthis_.props.onLevelUpdate(level).then(() => {this_.permission()});\n\t\t\t} else {\n\t\t\t\tthis_.navigate('begin');\n\t\t\t}\n\t\t}\n\t\tfetchData();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tactivePanel={this.state.activePanel}\n\t\t\t\tmodal={<Modal permission={this.permission} />}\n\t\t\t\theader={false}\n\t\t\t>\n\t\t\t\t<Home id='home' fetchedUser={this.state.user} navigate={this.navigate} />\n\t\t\t\t<Begin id='begin' fetchedUser={this.state.user} navigate={this.navigate} start={() => {this.props.onOpenModal(MODAL_ARE_AT_HOME)}} />\n\t\t\t\t<Level id='level' fetchedUser={this.state.user} navigate={this.navigate} permission={this.permission} />\n\t\t\t\t<Rating id='rating' fetchedUser={this.state.user} navigate={this.navigate} />\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\tpermissions: state.permissions ? state.permissions.permissions : null\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\tonOpenModal: (activeModal) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t),\n\t\tonUpdatePermission: (permission) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tupdatePermission(permission).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/**\n * Действия связанные с разрешениями\n */\n\n/**\n * Обновление разрешения\n *\n * @param  {Object} permission\n * @return {Promise}\n */\nexport const updatePermission = (permission) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'PERMISSION_UPDATE',\n        permission: permission\n      });\n  });\n};\n","/**\n * Комбинаяия редукторов\n */\nimport { combineReducers } from 'redux';\nimport level from './level';\nimport modal from './modal';\nimport permissions from './permissions';\n\nconst appReducer = combineReducers({\n    modal,\n    level,\n    permissions\n});\n\nconst rootReducer = (state, action) => {\n  // При разлогиневании пользователя стираем все состояние\n  /*if (action.type === 'LOGOUT') {\n    state = undefined\n  }*/\n\n  return appReducer(state, action)\n}\n\nexport default rootReducer;\n","/**\n * Редуктор модальных окон\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Открыть модальное окно\n    case 'MODAL_OPEN':\n      return Object.assign({}, state, {activeModal: action.activeModal, modalParams: action.modalParams});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор балов\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Обновление уровня\n    case 'LEVEL_UPDATE':\n      return Object.assign({}, state, {level: action.level});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор разрешений\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Обновление разрешения\n    case 'PERMISSION_UPDATE':\n      return Object.assign({}, state, {\n        permissions: Object.assign({}, state, action.permission)\n      });\n\n    default:\n      return state;\n    }\n}\n","/**\n * Определение хранилища состояния приложения\n * Работает через Redux Persist (хранит состояние в AsyncStorage)\n */\nimport { createStore } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\n// defaults to localStorage for web and AsyncStorage for react-native\nimport storage from 'redux-persist/lib/storage';\n\nimport rootReducer from './reducers';\n\nconst persistConfig = {\n  key: 'root',\n  storage\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = createStore(persistedReducer);\n\nexport const persistor = persistStore(store);\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Всё для управления и хранения состояния приложения (Redux)\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/index';\nimport { PersistGate } from 'redux-persist/integration/react';\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <App />\n    </PersistGate>\n  </Provider>, document.getElementById(\"root\")\n);\n\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(eruda => {}); //runtime download\n}\n"],"sourceRoot":""}