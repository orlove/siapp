{"version":3,"sources":["img/rankup.png","img/home.png","core/api/home.js","core/api/rating.js","core/api/dairy.js","core/api/Api.js","redux/actions/level.js","redux/actions/navigation.js","redux/actions/modal.js","constants/tips.js","modals/Modal.js","modals/AreAtHome.js","modals/NotAllowLocation.js","modals/NotAllowMessages.js","modals/Reward.js","modals/RewardForUpload.js","modals/Skipped.js","modals/NotHome.js","modals/NotHomeInStart.js","modals/NoGeodata.js","modals/RankUp.js","panels/Begin.js","constants/Colors.js","components/DangerMeter.js","panels/Level.js","panels/Rating.js","panels/Dairy.js","components/EpicBar.js","App.js","redux/actions/permissions.js","redux/reducers/index.js","redux/reducers/navigation.js","redux/reducers/modal.js","redux/reducers/level.js","redux/reducers/permissions.js","redux/index.js","index.js"],"names":["module","exports","api","home","begin","body","handler","post","method","level","uid","request","params","confirm","lat","long","cancelLate","rankUpBonus","update","rating","global","dairy","self","page","common","like","photo","owner","unlike","config","domain","window","location","host","vkparams","queryString","search","btoa","substr","tag","options","fetch","abort","urlParams","Object","keys","map","k","encodeURIComponent","join","then","response","ok","json","text","console","error","url","catch","assign","JSON","stringify","getDomain","route","upload","fileInput","formData","FormData","append","files","forEach","a","updateLevel","Promise","resolve","reject","type","navigate","activeStory","activePanel","currentTarget","dataset","story","openModal","activeModal","modalParams","MODAL_ARE_AT_HOME","MODAL_NOT_ALLOW_MESSAGES","MODAL_NOT_ALLOW_LOCATION","MODAL_REWARD","MODAL_REWARD_FOR_UPLOAD","MODAL_SKIPPED","MODAL_NOT_HOME","MODAL_NOT_HOME_IN_START","MODAL_NO_GEODATA","MODAL_RANK_UP","Modal","this","props","onOpenModal","setActiveModal","modalClose","permission","onClose","close","id","icon","header","caption","actions","title","mode","action","NotAllowLocation","NotAllowMessages","value","className","tips","Math","round","random","length","Reward","RewardForUpload","setsOfActions","withCancelLate","promiseValue","bridge","send","message","attachments","Api","onLevelUpdate","currentValue","simple","style","color","Skipped","repeat","NotHome","NotHomeInStart","NoGeodata","rank","name","src","rankUpPng","alt","bonus","background_type","attachment","RankUp","React","Component","connect","state","ownProps","modal","dispatch","Begin","separator","homePng","size","onClick","data","COLORS","gft","0","1","2","3","4","5","DangerMeter","renderActiveShape","RADIAN","PI","cx","cy","midAngle","innerRadius","outerRadius","startAngle","endAngle","fill","payload","sin","cos","ex","group","ey","x","y","textAnchor","Colors","fontSize","dy","transform","points","width","height","ref","el","getBoundingClientRect","setState","onMouseEnter","onPieEnter","paddingAngle","activeIndex","activeShape","entry","index","key","getGroupName","withCaption","charAt","toLowerCase","slice","Level","timer","setInterval","fetchedUser","clearInterval","afterConfirm","result","rankUp","status","parseInt","checks","check","city","left","onNavigate","progress","nextName","noGeodata","before","confirmed","check_id","statusOfCheck","sended","fontWeight","osName","platform","Rating","isLoading","table","IOS","friend","photo_200","description","first_name","last_name","Dairy","contextOpened","activeTab","input","document","getElementById","addEventListener","addedValue","e","button","target","tagName","parentNode","liked","newCommon","photos","likes","date","link","disabled","pagination","count","current","indicator","EpicBar","tabbar","selected","data-story","user","navigation","App","locationPermissionCount","setUser","geodata","group_id","permissions","available","onUpdatePermission","this_","subscribe","detail","schemeAttribute","createAttribute","scheme","attributes","setNamedItem","fetchData","updatePermission","appReducer","combineReducers","rootReducer","persistConfig","storage","persistedReducer","persistReducer","store","createStore","persistor","persistStore","ReactDOM","render","loading"],"mappings":"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","file":"static/js/main.d807f44a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rankup.ade1867c.png\";","module.exports = __webpack_public_path__ + \"static/media/home.09715b70.png\";","/**\n *\n */\n\nconst api = {home: {\n  /**\n   * Список регионов России или стран\n   * @param {Object} body данные пользователя с координатами дома\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  begin: (body, handler) => {\n    return api.post({method: 'home/begin', body: body, handler: handler});\n  },\n\n  /**\n   * Получает уровень\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  level: (uid, handler) => {\n    return api.request({method: 'home/level', params: {uid: uid}, handler: handler});\n  },\n\n  /**\n   * Подтвердить нахождение дома\n   * @param {Integer} uid ид. пользователя\n   * @param {Float} lat\n   * @param {Float} long\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  confirm: (uid, lat, long, handler) => {\n    let params = {uid: uid};\n\n    if(lat) {\n      params.lat = lat;\n      params.long = long;\n    }\n\n    return api.request({method: 'home/confirm', params: params, handler: handler});\n  },\n\n  /**\n   * Отменить последнее опоздание\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  cancelLate: (uid, handler) => {\n\n    return api.request({method: 'home/cancel-late', params: {uid: uid}, handler: handler});\n  },\n\n  /**\n   * Бонус после получения нового звания\n   * @param {Integer} uid ид. пользователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  rankUpBonus: (uid, handler) => {\n\n    return api.request({method: 'home/rank-up-bonus', params: {uid: uid}, handler: handler});\n  },\n\n  /**\n   * Обновить координаты дома\n   * @param {Integer} uid ид. пользователя\n   * @param {Float} lat\n   * @param {Float} long\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  update: (uid, lat, long, handler) => {\n    let params = {uid: uid};\n\n    return api.request({method: 'home/update', params: {uid: uid, lat: lat, long: long}, handler: handler});\n  },\n}};\n\nexport default api;\n","/**\n * Методы для работы с регионами\n */\n\nconst api = {rating: {\n  /**\n   * Рейтинг срежи всех\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  global: (handler) => {\n    return api.request({method: 'rating/global', handler: handler});\n  }\n}};\n\nexport default api;\n","/**\n * Методы для работы дневником\n */\n\nconst api = {dairy: {\n  /**\n   * Получить свой дневник\n   * @param {Integer} uid ид. полозователя\n   * @param {Integer} page страницы (нумерация с 0)\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  self: (uid, page, handler) => {\n    return api.request({method: 'dairy/self', params: {uid: uid, page: page}, handler: handler});\n  },\n  /**\n   * Получить общий дневник\n   * @param {Integer} uid ид. полозователя\n   * @param {Integer} page страницы (нумерация с 0)\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  common: (uid, page, handler) => {\n    return api.request({method: 'dairy/common', params: {uid: uid, page: page}, handler: handler});\n  },\n  /**\n   * Поставить лайк фотографии дневника\n   * @param {Integer} uid ид. кто лайкает\n   * @param {Integer} photo ид. фотографии\n   * @param {Integer} owner ид. полозователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  like: (uid, photo, owner, handler) => {\n    return api.request({method: 'dairy/like', params: {uid: uid, photo: photo, owner: owner}, handler: handler});\n  },\n  /**\n   * Отменить лайк фотографии дневника\n   * @param {Integer} uid ид. кто лайкает\n   * @param {Integer} photo ид. фотографии\n   * @param {Integer} owner ид. полозователя\n   * @param {Function} handler обработчик ответа в случае успеха\n   */\n  unlike: (uid, photo, owner, handler) => {\n    return api.request({method: 'dairy/unlike', params: {uid: uid, photo: photo, owner: owner}, handler: handler});\n  }\n}};\n\nexport default api;\n","/**\n * Работа с сервером\n */\nimport home from './home';\nimport rating from './rating';\nimport dairy from './dairy';\n\nconst config = {\n  domain: window.location.host !== 'orlove.github.io' ? 'https://api.newsapp.me' :\n                                                       'https://rest-news.hozya.ru'\n};\n\nvar api = {\n  vkparams: () => {\n    const queryString = window.location.search;\n    return window.btoa(queryString.substr(1));\n  },\n  /**\n   * Запрос данных с сервера\n   * @param  {String}   method  api-метод\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  request: function ({method, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    let urlParams = 'vkparams=' + api.vkparams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * POST-запросы\n   * @param  {String}   method  api-метод\n   * @param  {Object}   body    тело запроса\n   * @param  {Object}   params  параметры api-метода\n   * @param  {mix}      tag     ключ запроса (для возможности его отмены)\n   * @param  {Function} handler обработчик ответа в случае успеха\n   * @param  {Object}   options доп. опции http-запроса (заголовки, метод и т.д.)\n   */\n  post: function ({method, body, params, tag, handler, options}) {\n\n    // Отменяем предыдущий ещё не завершенный запрос\n    if(tag) {\n      fetch.abort(tag);\n    }\n\n    options = Object.assign({\n      method: 'POST',\n      /*headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },*/\n      body: JSON.stringify(body)\n    }, options || {});\n\n    let urlParams = 'vkparams=' + api.vkparams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+method+'?'+urlParams, options, tag)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  },\n  /**\n   * Отменяет запрос с ключем tag\n   * @param {mix} tag ключ запроса\n   */\n  abort: (tag) => {\n    fetch.abort(tag);\n  },\n  /**\n   * Возвращает домен\n   * @return {[type]} [description]\n   */\n  getDomain: (route) => {\n    if(route) {\n      return config.domain+'/'+route;\n    } else {\n      return config.domain;\n    }\n  },\n  /**\n   * Отправить форму (без файла)\n   * @type {[type]}\n   */\n  /*submit: (from) => {\n    const data = new URLSearchParams(new FormData(from));\n\n    return fetch(from.action, {\n        method: 'post',\n        body: data,\n    });\n  },*/\n  /**\n   * Отправить форму (без файла)\n   * @param  {String} handler путь (контроллер / действие)\n   * @param  {type} fileInput инпут с фотографией\n   * @param  {Object}   params  параметры api-метода\n   * @param  {Function} handler обработчик ответа в случае успеха\n   */\n  upload: ({route, fileInput, params, handler}) => {\n\n    const formData = new FormData();\n\n    formData.append('file', fileInput.files[0]);\n\n    const options = {\n      method: 'POST',\n      body: formData\n    };\n\n    let urlParams = 'vkparams=' + api.vkparams();\n\n    // Преобразуем в url\n    if(params) {\n      params = Object.keys(params).map((k) =>\n          encodeURIComponent(k) + '=' + encodeURIComponent(params[k])\n      ).join('&');\n      urlParams = params + '&' + urlParams;\n    }\n\n    return fetch(config.domain+'/'+route+'?'+urlParams, options)\n      .then((response) => {\n        if(response.ok) {\n          return response.json();\n        } else {\n          response.text().then((text) => {\n            console.error(response.url, text.substr(-64), response);\n          });\n          return false;\n        }\n      })\n      .then(handler)\n      .catch((error) => {\n        console.error(error);\n        //this.setState({error: error, isLoading: false});\n      });\n  }\n};\n\n// Сливаем каждый компонент с api\n[home, rating, dairy].forEach((a) => {\n  api = Object.assign(a, api);\n});\n\nexport default api;\n","/**\n * Действия связанные с балами\n */\n\n/**\n * Обновление балов\n *\n * @param  {Object} level\n * @return {Promise}\n */\nexport const updateLevel = (level) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'LEVEL_UPDATE',\n        level: level\n      });\n  });\n};\n","/**\n * Действия с навигацией\n */\n\n/**\n * Сменить активный экран\n *\n * @param  {String} activeStory\n * @param  {Object} params\n * @return {Promise}\n */\nexport const navigate = (activeStory, activePanel, params) => {\n  return new Promise((resolve, reject) => {\n\n      if(activeStory.currentTarget && activeStory.currentTarget.dataset && activeStory.currentTarget.dataset.story) {\n        activeStory = activeStory.currentTarget.dataset.story;\n      }\n\n      if(!activePanel) {\n        activePanel = activeStory;\n      }\n\n      resolve({\n        type: 'NAVIGATE',\n        activeStory: activeStory,\n        activePanel: activePanel,\n        params: params\n      });\n  });\n};\n","/**\n * Действия с модальными окнами\n */\n\n/**\n * Открыть модальное окно\n *\n * @param  {String} activeModal\n * @param  {Object} params\n * @return {Promise}\n */\nexport const openModal = (activeModal, modalParams) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'MODAL_OPEN',\n        activeModal: activeModal,\n        modalParams: modalParams\n      });\n  });\n};\n","export default [\n  \"Мойте руки с мыслом после любых контактов\",\n  \"На данный момент не существует рабочей вакцины от вируса\",\n  \"Медицинские маски теряют свои свойства через 2 часа использования\",\n  \"Респиратор - эффективнее любых масок\",\n  \"Не выходите на улицу без жизненной необходимости\",\n  \"Тканевые и марлевые маски - неэффективны\",\n  \"Защищайте не только органы дыхания, но и глаза\",\n  \"Телефон экстренной службы 112\",\n  \"Держите дистанцию 2 метра от других людей\",\n  \"Не рискуйте своим здоровьем если можно этого избежать\",\n  \"Лучший способ легко перенести болезнь - не заражаться\",\n  \"Закончились антисептики? Их может заменить крепкий спиртной напиток\",\n  \"Бум. полотенца, салфетки, старые тряпки - подойдут вместо Туал.Бумаги\",\n  \"Старайтесь не прикасаться к перилам, кнопкам в лифте и дверным ручкам \",\n  \"Находясь на улице не потирайте нос и не трите глаза\",\n  \"Постарайтесь объяснить подросткам, что гулять с друзьями опасно\",\n  \"Вмешивайтесь в серьезные нарушения, делайте это с расстояния\",\n  \"Только ты можешь оградить себя от вируса\",\n  \"Перенесите встречи в олнайн\",\n  \"Откройте для себя онлайн развлечения, их огромное множество\"\n];\n","import React from 'react';\nimport { ModalRoot, ModalCard } from '@vkontakte/vkui';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { openModal } from '../redux/actions/modal';\n\nimport AreAtHome from './AreAtHome';\nimport NotAllowLocation from './NotAllowLocation';\nimport NotAllowMessages from './NotAllowMessages';\nimport Reward from './Reward';\nimport RewardForUpload from './RewardForUpload';\nimport Skipped from './Skipped';\nimport NotHome from './NotHome';\nimport NotHomeInStart from './NotHomeInStart';\nimport NoGeodata from './NoGeodata';\nimport RankUp from './RankUp'\n\nexport const MODAL_ARE_AT_HOME = 'modal_are-at-home';\nexport const MODAL_NOT_ALLOW_MESSAGES = 'modal_not-allow-messages';\nexport const MODAL_NOT_ALLOW_LOCATION = 'modal_not-allow-location';\nexport const MODAL_REWARD = 'modal_reward';\nexport const MODAL_REWARD_FOR_UPLOAD = 'modal_reward-for-upload';\nexport const MODAL_SKIPPED = 'modal_skipped';\nexport const MODAL_NOT_HOME = 'modal_not-home';\nexport const MODAL_NOT_HOME_IN_START = 'modal_not-home-in-start';\nexport const MODAL_NO_GEODATA = 'modal_no-geodata';\nexport const MODAL_RANK_UP = 'nodal_rank-up';\n\nclass Modal extends React.Component {\n\n  setActiveModal(activeModal) {\n    return this.props.onOpenModal(activeModal);\n  }\n\n  close() {\n    return this.setActiveModal(null);\n  }\n\n  render() {\n    return (\n      <ModalRoot\n        activeModal={this.props.activeModal || null}\n        onClose={() => {this.close()}}\n      >\n        {this.props.activeModal === MODAL_ARE_AT_HOME ? AreAtHome(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_ARE_AT_HOME} />}\n        {this.props.activeModal === MODAL_NOT_ALLOW_LOCATION ? NotAllowLocation(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_NOT_ALLOW_LOCATION} />}\n        {this.props.activeModal === MODAL_NOT_ALLOW_MESSAGES ? NotAllowMessages(() => {this.close()}, this.props.permission) : <ModalCard id={MODAL_NOT_ALLOW_MESSAGES} />}\n        {this.props.activeModal === MODAL_REWARD ? Reward(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_REWARD} />}\n        {this.props.activeModal === MODAL_REWARD_FOR_UPLOAD ? RewardForUpload(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_REWARD_FOR_UPLOAD} />}\n        {this.props.activeModal === MODAL_SKIPPED ? Skipped(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_SKIPPED} />}\n        {this.props.activeModal === MODAL_NOT_HOME ? NotHome(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_NOT_HOME} />}\n        {this.props.activeModal === MODAL_NOT_HOME_IN_START ? NotHomeInStart(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_NOT_HOME_IN_START} />}\n        {this.props.activeModal === MODAL_NO_GEODATA ? NoGeodata(() => {this.close()}) : <ModalCard id={MODAL_NO_GEODATA} />}\n        {this.props.activeModal === MODAL_RANK_UP ? RankUp(() => {this.close()}, this.props.modalParams) : <ModalCard id={MODAL_RANK_UP} />}\n      </ModalRoot>\n    );\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn state.modal ? {\n    activeModal: state.modal.activeModal,\n    modalParams: state.modal.modalParams,\n  } : {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonOpenModal: (activeModal) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_ARE_AT_HOME} from './Modal';\n\nimport Icon28HomeOutline from '@vkontakte/icons/dist/28/home_outline';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_ARE_AT_HOME}\n    onClose={() => modalClose()}\n    icon={<Icon28HomeOutline />}\n    header=\"Вы подтверждаете, что находитесь дома сейчас?\"\n    caption=\"Очки самоизоляции будут начисляться за вход в приложение ТОЛЬКО из того места где Вы находитесь сейчас!\"\n    actions={[{\n      title: 'Да, я дома',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_ALLOW_LOCATION} from './Modal';\n\nimport Icon28CompassOutline from '@vkontakte/icons/dist/28/compass_outline';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_LOCATION}\n    onClose={() => modalClose()}\n    icon={<Icon28CompassOutline />}\n    header=\"Вам нужно разрешить доступ к геопозиции\"\n    caption=\"Доступ к Вашей гепозиции предоставляется только на момент нахождения в приложении. Без данного разрешения мы не сможем начислять Вам баллы. Внимание! Мы не используем вашу геопозицию ни в каких целях помимо игрового процесса.\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_ALLOW_MESSAGES} from './Modal';\n\nimport Icon28Messages from '@vkontakte/icons/dist/28/messages';\n\nexport default (modalClose, permission) => {\n  return (<ModalCard\n    id={MODAL_NOT_ALLOW_MESSAGES}\n    onClose={() => modalClose()}\n    icon={<Icon28Messages />}\n    header=\"Вам нужно разрешить отправку сообщений\"\n    caption=\"Без данного разрешения вы не сможете в полной мере воспользоваться функционалом приложения.\"\n    actions={[{\n      title: 'Повторить',\n      mode: 'primary',\n      action: permission\n    }]}\n  >\n  </ModalCard>);\n}\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_REWARD} from './Modal';\n\nimport tips from '../constants/tips';\n\nimport './Reward.css';\n\nimport Icon44SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\nimport Icon24Info from '@vkontakte/icons/dist/24/info';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_REWARD}\n    onClose={modalClose}\n    icon={<Icon44SmileOutline />}\n    header=\"Так держать!\"\n    caption={<div>\n      <p>Отметка подтверждена, вам начислено {modalParams.value} баллов.</p>\n      <div className=\"Tip\"><Icon24Info /><p>{tips[Math.round(Math.random()*tips.length)]}</p></div>\n    </div>}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_REWARD_FOR_UPLOAD} from './Modal';\n\nimport tips from '../constants/tips';\n\nimport './RewardForUpload.css';\n\nimport Icon44SmileOutline from '@vkontakte/icons/dist/44/smile_outline';\nimport Icon24Info from '@vkontakte/icons/dist/24/info';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_REWARD_FOR_UPLOAD}\n    onClose={modalClose}\n    icon={<Icon44SmileOutline />}\n    header=\"Награда за фотографию\"\n    caption={<div>\n      <p>За первую фотографию дня, начисляем вам {modalParams.value} баллов.</p>\n      <div className=\"Tip\"><Icon24Info /><p>{tips[Math.round(Math.random()*tips.length)]}</p></div>\n    </div>}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\nimport {MODAL_SKIPPED} from './Modal';\n\nimport Icon56RecentOutline from '@vkontakte/icons/dist/56/recent_outline';\n\nexport default (modalClose, modalParams) => {\n\n  modalParams = modalParams || {};\n\n  // Наборы кнопок\n  const setsOfActions = {\n    // Возможность анулировать опоздание\n    withCancelLate: [{\n      title: 'Опубликовать и получить '+modalParams.promiseValue+' баллов',\n      mode: 'primary',\n      action: () => {\n        bridge\n          .send(\"VKWebAppShowWallPostBox\", {\n            message: \"Привет, друзья! Я хочу чтобы эпидемия закончилась как можно скорее, поэтому вношу посильный вклад в борьбу с короновирусом!\\nЭто совсем несложно, присоединяйтесь!\\n#лучшедома #сидитедома #covid19\",\n            attachments: 'https://vk.com/app7405679'\n          })\n          .then(() => Api.home.cancelLate(modalParams.uid, (level) => modalParams.onLevelUpdate(level).then(modalClose)));\n      }\n    },{\n      title: 'Оставить '+modalParams.currentValue+' баллов',\n      mode: 'secondary',\n      action: modalClose\n    }],\n    // Без анулирования\n    simple: [{\n      title: modalParams.currentValue+' баллов',\n      mode: 'primary',\n      action: modalClose\n    }]\n  }\n\n  return (<ModalCard\n    id={MODAL_SKIPPED}\n    onClose={modalClose}\n    icon={<Icon56RecentOutline style={{color: 'red'}} />}\n    header=\"Вы опоздали! Прошло больше 20 минут..\"\n    caption={\n      modalParams.promiseValue > modalParams.currentValue ?\n        \"Поделитесь важной информацией о Covid-19 с друзьями, чтобы не потерять прогресс!\" :\n        \"Вы получите больше баллов если будите вовремя подтверждать запросы.\"\n    }\n    actions={setsOfActions[modalParams.promiseValue > modalParams.currentValue ? 'withCancelLate' : 'simple']}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_HOME} from './Modal';\n\nimport Api from '../core/api/Api';\n\nimport Icon28BlockOutline from '@vkontakte/icons/dist/28/block_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NOT_HOME}\n    onClose={modalClose}\n    icon={<Icon28BlockOutline />}\n    header=\"Вы покинули дом\"\n    caption={<p>\n      Пожалуйста, соблюдайте режим самоизоляции! Только добровольная изоляция от источников заражения может уберечь нас в это непростое время!<br /><br />\n      Если это ошибка, попробуйте включить GPS и Мобильные данные и повторите попытку.\n    </p>}\n    actions={[\n      {\n        title: 'Повторить попытку',\n        mode: 'secondary',\n        action: modalParams.repeat\n      },{\n        title: 'Я не дома',\n        mode: 'secondary',\n        action: modalClose\n      }\n    ]}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NOT_HOME_IN_START} from './Modal';\n\nimport Api from '../core/api/Api';\n\nimport Icon28BlockOutline from '@vkontakte/icons/dist/28/block_outline';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NOT_HOME_IN_START}\n    onClose={modalClose}\n    icon={<Icon28BlockOutline />}\n    header=\"Судя по данным, вы покинули дом\"\n    caption=\"Если вы сейчас дома, значит, в начале был определен не верный адрес. Пока его ещё можно поментять. Нажмите «Здесь дом», чтобы поменя домашний адрес на текущий\"\n    actions={[\n      {\n        title: 'Здесь дом',\n        mode: 'secondary',\n        action: () => {\n          Api.home.update(modalParams.uid, modalParams.lat, modalParams.long, (level) => modalParams.onLevelUpdate(level).then(modalClose));\n        }\n      },{\n        title: 'Я не дома',\n        mode: 'secondary',\n        action: modalClose\n      }\n    ]}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport {MODAL_NO_GEODATA} from './Modal';\n\nimport Icon32Place from '@vkontakte/icons/dist/32/place';\n\nexport default (modalClose, modalParams) => {\n  return (<ModalCard\n    id={MODAL_NO_GEODATA}\n    onClose={modalClose}\n    icon={<Icon32Place />}\n    header=\"Нет доступа к местоположению\"\n    caption=\"Отсутствует возможность оценить соблюдение режима самоизоляции, включите доступ к геопозиции на вашем устройстве!\"\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { ModalCard } from '@vkontakte/vkui';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\nimport {MODAL_RANK_UP} from './Modal';\n\nimport rankUpPng from '../img/rankup.png';\n\nexport default (modalClose, modalParams) => {\n\n  modalParams = modalParams || {rank: {name: ''}};\n\n  return (<ModalCard\n    id={MODAL_RANK_UP}\n    onClose={modalClose}\n    icon={<img src={rankUpPng} alt=\"Новое звание\" />}\n    header={\"Достигнуто новое звание «\"+modalParams.rank.name+\"»\"}\n    caption=\"Поздравляем с новым достижением! Мы думаем вы добьетесь большего! Получите дополнительный бонус за публикацию своих достижений в Историях.\"\n    actions={[{\n      title: 'Опубликовать и получить ещё '+modalParams.bonus+' баллов',\n      mode: 'primary',\n      action: () => {\n        bridge\n    \t\t\t.send(\"VKWebAppShowStoryBox\", {\n    \t\t\t\tbackground_type: \"image\",\n    \t\t\t\turl: \"https://sun9-56.userapi.com/c855620/v855620203/21b0af/hX1H8hzH848.jpg\",\n    \t\t\t\tattachment: {\n    \t\t\t\t\ttext: 'open',\n    \t\t\t\t\ttype: 'url',\n    \t\t\t\t\turl: 'https://vk.com/app7405679'\n    \t\t\t\t}\n    \t\t\t})\n          .catch(() => Api.home.rankUpBonus(modalParams.uid, (level) => modalParams.onLevelUpdate(level).then(modalClose)));\n      }\n    },{\n      title: 'Закрыть',\n      mode: 'secondary',\n      action: modalClose\n    }]}\n  >\n  </ModalCard>);\n};\n","import React from 'react';\nimport { Panel, PanelHeaderSimple, Button, Group, Div } from '@vkontakte/vkui';\n\nimport { MODAL_ARE_AT_HOME } from '../modals/Modal';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { openModal } from '../redux/actions/modal';\n\nimport homePng from '../img/home.png';\nimport '../styles/header.css';\nimport './Begin.css';\n\nclass Begin extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id} separator={false}>\n\t\t\t\t<PanelHeaderSimple separator={false}><b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b></PanelHeaderSimple>\n\t\t\t\t<Group>\n\t\t\t\t\t<img className=\"Home\" src={homePng} alt=\"Дом\" />\n\t\t\t\t\t<Div className=\"Explanation\">\n\t\t\t\t\t\t<p>Самым эффективным средством для защиты является САМОИЗОЛЯЦИЯ от источников угроз. Сейчас крайне важно избегать лишних контактов.</p>\n\t\t\t\t\t\t<p>Докажи свою ответственность самому себе, друзьям и близким!</p>\n\t\t\t\t\t\t<p>Приложение будет проверять соблюдение карантина. Для этого на следующем шаге разрешите отправить вам сообщения.</p>\n\t\t\t\t\t</Div>\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<Button size=\"xl\" level=\"2\" onClick={() => {/*this.props.onOpenModal(MODAL_ARE_AT_HOME)*/this.props.permission()}}>Начать! +10 баллов</Button>\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Begin);\n","const palette1 = '#6dd627';\nconst palette2 = '#ff6242';\nconst palette3 = '#e0e0e0';\nconst palette4 = '#00b8f0';\nconst palette5 = '#b89558';\nconst palette6 = '#9ceb60';\nconst palette7 = '#ff866e';\nconst palette8 = '#FFBB28';\nconst palette9 = '#4acfff';\nconst palette10 = '#915e3a';\n\nexport default {\n  palette1: palette1,\n  palette2: palette2,\n  palette3: palette3,\n  palette4: palette4,\n  palette5: palette5,\n  palette6: palette6,\n  palette7: palette7,\n  palette8: palette8,\n  palette9: palette9,\n  palette10: palette10,\n};\n","import React from 'react';\nimport { PieChart, Pie, Sector, Cell } from 'recharts';\nimport Colors from '../constants/Colors';\n\nconst data = [\n  {name: 'Минимальная', value: 1},\n  {name: 'Невысокая', value: 1},\n  {name: 'Умеренная', value: 1},\n  {name: 'Очень большая', value: 1},\n  {name: 'Критическая', value: 1},\n  {name: 'Максимальная', value: 1}\n];\nconst COLORS = [Colors.palette1, Colors.palette6, Colors.palette4, Colors.palette9, Colors.palette5, Colors.palette2];\n\n// Корректировка положения стрелочки\nconst gft = {\n  0: [0, -3],\n  1: [-5, -8],\n  2: [-9, -12],\n  3: [9, -12],\n  4: [7, -8],\n  5: [0, -4]\n};\n\nclass DangerMeter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      width: null,\n      height: null\n    }\n  }\n\n  renderActiveShape = (props) => {\n    const RADIAN = Math.PI / 180;\n    const {\n      cx, cy, midAngle, innerRadius, outerRadius, startAngle, endAngle,\n      fill, payload\n    } = props;\n\n    const sin = Math.sin(-RADIAN * midAngle);\n    const cos = Math.cos(-RADIAN * midAngle);\n    const mx = cx + (innerRadius - 22) * cos + gft[this.props.group][0];\n    const my = cy + (innerRadius - 22) * sin + gft[this.props.group][1];\n    const ex = mx + (cos >= 0 ? 1 : -1) * 10;\n    const ey = my;\n    return (\n      <g>\n        <text x={cx} y={cy-20} textAnchor=\"middle\" fill={Colors.palette10} style={{fontSize: '24px'}}>{this.props.level}</text>\n        <text x={cx} y={cy} dy={-2} textAnchor=\"middle\" fill={fill}>{payload.name}</text>\n        <text x={cx} y={cy} dy={12} textAnchor=\"middle\" fill=\"gray\" style={{fontSize: '13px'}}>опасность заражения</text>\n        <Sector\n          cx={cx}\n          cy={cy}\n          innerRadius={innerRadius}\n          outerRadius={outerRadius}\n          startAngle={startAngle}\n          endAngle={endAngle}\n          fill={fill}\n          />\n        <g transform={`translate(${ex + (cos >= 0 ? 1 : -1) * 2} ${ey})`}>\n          <g transform={`rotate(${-midAngle + 180})`}>\n            {/* Draw the triangle with custom shape */}\n            <polygon points=\"8,-8 8,8 -8,0\" style={{fill: fill}}/>\n          </g>\n        </g>\n      </g>\n    );\n  }\n\n\trender () {\n  \treturn (\n      <div\n        className=\"Div\"\n        // Размер во всю ширину и высоту, но не меньше 104 по высоте\n        ref={el => {\n          if (!el || this.state.width) return;\n          let height = el.getBoundingClientRect().height;\n          this.setState({\n            width: el.getBoundingClientRect().width,\n            height: height < 104 ? 104 : height\n          });\n        }}\n      >\n      \t{this.state.width && <PieChart width={this.state.width} height={this.state.height} onMouseEnter={this.onPieEnter}>\n          <Pie\n            data={data}\n            startAngle={180}\n            endAngle={0}\n            innerRadius={70}\n            outerRadius={90}\n            fill=\"#8884d8\"\n            paddingAngle={5}\n            //label={(r) => {return r.name;}}\n            cy={85}\n            activeIndex={5 - this.props.group}\n            activeShape={this.renderActiveShape}\n          >\n          \t{\n            \tdata.map((entry, index) => <Cell fill={COLORS[index % COLORS.length]} key={index}/>)\n            }\n          </Pie>\n        </PieChart>}\n      </div>\n    );\n  }\n}\n\nexport const getGroupName = (group, withCaption) => {\n  let index = (data.length - group - 1)%data.length;\n  let name = data[index].name;\n\n  if(withCaption) {\n    name = name.charAt(0).toLowerCase() + name.slice(1)\n  }\n\n  return (<div>\n    {withCaption && <span>Опасность: </span>}\n    <span style={{color: COLORS[index]}}>{name}</span>\n  </div>);\n};\n\nexport default DangerMeter;\n","import React from 'react';\nimport { Panel, PanelHeaderSimple, PanelHeaderButton, Button, List, Group, Cell, Div, Header, InfoRow, Progress } from '@vkontakte/vkui';\n\nimport { MODAL_REWARD, MODAL_SKIPPED, MODAL_NOT_HOME, MODAL_NOT_HOME_IN_START, MODAL_NO_GEODATA, MODAL_RANK_UP } from '../modals/Modal';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from '../core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from '../redux/actions/level';\nimport { openModal } from '../redux/actions/modal';\nimport { navigate } from '../redux/actions/navigation';\n\nimport DangerMeter from '../components/DangerMeter';\n\nimport Icon24Poll from '@vkontakte/icons/dist/24/poll';\nimport Icon24Newsfeed from '@vkontakte/icons/dist/24/newsfeed';\nimport Icon24ThumbUp from '@vkontakte/icons/dist/24/thumb_up';\nimport Icon24ThumbDown from '@vkontakte/icons/dist/24/thumb_down';\nimport Icon24RecentOutline from '@vkontakte/icons/dist/24/recent_outline';\nimport Icon24Place from '@vkontakte/icons/dist/24/place';\nimport Icon24Notification from '@vkontakte/icons/dist/24/notification';\nimport '../styles/header.css';\nimport './Level.css';\n\n\nclass Level extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n\n\t\tthis.state = {timer: null};\n  }\n\n\tcomponentDidMount() {\n\t\t// Таймер обновления (чтобы кнопка \"Я дома\" появилась если приложение открыто)\n\t\tthis.setState({timer: window.setInterval(() => {\n\t\t\tApi.home.level(this.props.fetchedUser.id).then((level) => this.props.onLevelUpdate(level));\n\t\t}, 60000)});\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.clearInterval(this.state.timer);\n  }\n\n\t/** Подтвердить находение дома */\n\tconfirm() {\n\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t.then((data) => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, data.lat, data.long, (level) => this.afterConfirm(level, data.lat, data.long));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tApi.home.confirm(this.props.fetchedUser.id, null, null, (level) => this.afterConfirm(level));\n\t\t\t});\n\t}\n\n\tafterConfirm(level, lat, long) {\n\t\tthis.props.onLevelUpdate(level).then(() => {\n\t\t\tconst result = level.result;\n\n\t\t\t// Получено новое звание\n\t\t\tif(level.rank.rankUp) {\n\t\t\t\tthis.props.onOpenModal(MODAL_RANK_UP, {\n\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\trank: level.rank,\n\t\t\t\t\tbonus: level.rank.bonus,\n\t\t\t\t\tonLevelUpdate: this.props.onLevelUpdate\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Обычное подтверждение проверки\n\t\t\telse {\n\n\t\t\t\tconst status = parseInt(result.status);\n\n\t\t\t\t// Подтверждено успешно\n\t\t\t\tif(status & 1) {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_REWARD, {value: result.value});\n\t\t\t\t}\n\n\t\t\t\t// Не дома\n\t\t\t\telse if(status & 2) {\n\t\t\t\t\t// Если чекинов не больше 7, то предлааем поменять адрес\n\t\t\t\t\tif(this.props.level.checks.length < 8 && lat) {\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_HOME_IN_START, {\n\t\t\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\t\t\tlat: lat,\n\t\t\t\t\t\t\tlong: long,\n\t\t\t\t\t\t\tonLevelUpdate: this.props.onLevelUpdate\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_HOME, {\n\t\t\t\t\t\t\trepeat: () => this.confirm()\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Опаздал\n\t\t\t\telse if(status & 4) {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_SKIPPED, {\n\t\t\t\t\t\tuid: this.props.fetchedUser.id,\n\t\t\t\t\t\tonLevelUpdate: this.props.onLevelUpdate,\n\t\t\t\t\t\tcurrentValue: result.value,\n\t\t\t\t\t\tpromiseValue: level.promiseValue\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Нет геоданных\n\t\t\t\telse if(status & 8) {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NO_GEODATA);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatusOfCheck(check) {\n\n\t\tconst status = parseInt(check.status);\n\n\t\tif(status & 1) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Подтверждено',\n\t\t\t\ticon: (<Icon24ThumbUp style={{color: 'green'}} />)\n\t\t\t};\n\t\t} else if(status & 2) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Не дома',\n\t\t\t\ticon: (<Icon24ThumbDown style={{color: 'red'}} />)\n\t\t\t};\n\t\t} else if(status & 4) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Поздно',\n\t\t\t\ticon: (<Icon24RecentOutline style={{color: 'red'}} />)\n\t\t\t};\n\t\t} else if(status & 16) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Пропущено',\n\t\t\t\ticon: (<Icon24ThumbDown style={{color: 'gray'}} />)\n\t\t\t};\n\t\t} else if(status & 8) {\n\t\t\treturn {\n\t\t\t\ttitle: 'Нет геоданных',\n\t\t\t\ticon: (<Icon24Place style={{color: 'gray'}} />)\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\ttitle: 'Требует подтверждения',\n\t\t\t\ticon: (<Icon24Notification style={{color: 'var(--button_primary_background)'}} />)\n\t\t\t};\n\t\t}\n\t}\n\n\tlevelName() {\n\t\tconst city = this.props.fetchedUser.city && this.props.fetchedUser.city.title ? ' г.' + this.props.fetchedUser.city.title : '';\n\t\treturn city;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id} separator={false}>\n\n\t\t\t\t<PanelHeaderSimple left={<PanelHeaderButton onClick={() => {this.props.onNavigate('rating')}}><Icon24Poll/></PanelHeaderButton>}>\n\t\t\t\t\t<b>#</b><b>Л</b><b>У</b><b>Ч</b><b>Ш</b><b>Е</b><b>Д</b><b>О</b><b>М</b><b>А</b>\n\t\t\t\t</PanelHeaderSimple>\n\n\t\t\t\t{this.props.fetchedUser && <Group separator=\"hide\">\n\t\t\t\t\t<List className=\"Info\">\n\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t//before={this.props.fetchedUser.photo_200 ? <Avatar src={this.props.fetchedUser.photo_200}/> : null}\n\t\t\t\t\t\t\t//description={this.levelName()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/*<Div>{`${this.props.fetchedUser.first_name} ${this.props.fetchedUser.last_name}`}</Div>*/}\n\t\t\t\t\t\t\t{/*this.props.fetchedUser.photo_200 ? <Avatar src={this.props.fetchedUser.photo_200}/> : null*/}\n\t\t\t\t\t\t\t<DangerMeter group={this.props.level.group} level={this.props.level.value} />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.props.level.rank && <Cell>\n\t\t\t\t\t\t<Div className=\"Rank\">\n\t\t\t\t\t\t\t\t<InfoRow header={this.props.level.rank.name}>\n\t\t\t            <Progress value={this.props.level.rank.progress} />\n\t\t\t\t\t\t\t\t\t<div className=\"InfoRow__footer\">{this.props.level.rank.nextName}</div>\n\t\t\t          </InfoRow>\n\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t</Cell>}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\n\t\t\t\t{this.props.level && this.props.level.checks && <Group>\n\t\t\t\t\t{this.props.level.noGeodata && <Div><Button size=\"xl\" before={<Icon24Place/>} onClick={() => {this.props.permission()}} mode=\"destructive\">Разрешить геоданные</Button></Div>}\n\t\t\t\t\t{this.props.level.checks.length > 0 && !this.props.level.checks[0].confirmed && <Div><Button size=\"xl\" mode=\"commerce\" onClick={()=>{this.confirm()}}>Я дома</Button></Div>}\n\t\t\t\t\t{/*<Div><Button size=\"xl\" onClick={() => {this.props.onOpenModal(MODAL_REWARD, {value: 123})}}>MODAL_REWARD</Button></Div>*/}\n\t\t\t\t\t<Header>Последние проверки</Header>\n\t\t\t\t\t<List className=\"ChecksList\">\n\t\t\t\t\t\t<Cell before={<Icon24ThumbUp style={{color: 'green'}} />} key=\"check_head\">\n\t\t\t\t\t\t\t<Div>Время</Div>\n\t\t\t\t\t\t\t<Div>Результат</Div>\n\t\t\t\t\t\t\t<Div className=\"Values\">Баллы</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.props.level.checks.length === 0 && <Cell key=\"check_empty\" className=\"CheckEmpty\"><Div>Через несколько минут здесь появится первая проверка</Div></Cell>}\n\t\t\t\t\t\t{this.props.level.checks.map((check) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell key={\"check_\" + check.check_id} before={this.statusOfCheck(check).icon}>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{check.sended}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{this.statusOfCheck(check).title}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div className=\"Values\" style={check.value > 0 ? {color: 'green', fontWeight: 'bold'} : {}}>\n\t\t\t\t\t\t\t\t\t\t{check.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t</Panel>\n\t\t);\n}}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\tlevel: state.level.level\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Обновляет очки и таблицу проверок\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\t// Переход на другую панель/представление\n\t\tonNavigate: (activeStory, activePanel, params) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tnavigate(activeStory, activePanel, params).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Level);\n","import React from 'react';\nimport { Panel, List, Cell, Group, ScreenSpinner, Div, Avatar, PanelHeaderSimple, PanelHeaderButton } from '@vkontakte/vkui';\nimport { platform, IOS } from '@vkontakte/vkui';\n\nimport { MODAL_REWARD } from '../modals/Modal';\n\nimport Api from '../core/api/Api';\n\nimport {getGroupName} from '../components/DangerMeter';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { navigate } from '../redux/actions/navigation';\nimport { openModal } from '../redux/actions/modal';\n\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\n\nimport './Rating.css';\n\nconst osName = platform();\n\nclass Rating extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {isLoading: true};\n  };\n\n\t// Компонент примонтирован\n\tcomponentDidMount() {\n\t\tApi.rating.global((table) => {\n\t\t\tthis.setState({isLoading: false, table: table});\n\t\t});\n  };\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeaderSimple\n\t\t\t\t\tleft={<PanelHeaderButton onClick={() => {this.props.onNavigate('level')}}>\n\t\t\t\t\t\t{osName === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t</PanelHeaderButton>}\n\t\t\t\t>\n\t\t\t\t\tРейтинг\n\t\t\t\t</PanelHeaderSimple>\n\t\t\t\t{!this.state.isLoading && <Group>\n\t\t      <List className=\"RatingList\">\n\t\t\t\t\t\t<Cell before={<Avatar />}>\n\t\t\t\t\t\t\t<Div></Div>\n\t\t\t\t\t\t\t<Div>Баллы</Div>\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t{this.state.table.map((friend, index) => {\n              return (\n\t\t\t\t\t\t\t\t<Cell\n\t\t\t\t\t\t\t\t\tkey={\"friend_\" + friend.uid}\n\t\t\t\t\t\t\t\t\tbefore={friend.photo_200 ? <Avatar src={friend.photo_200}/> : null}\n\t\t\t\t\t\t\t\t\tdescription={getGroupName(friend.group, true)}\n\t\t\t\t\t\t\t\t>\n\t\t\t        \t\t<Div>\n\t\t\t\t\t\t\t\t\t\t{`${friend.first_name} ${friend.last_name}`}\n\t\t\t\t\t\t\t\t\t\t{friend.rank && <div className=\"Rank\">{friend.rank}</div>}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t\t<Div className=\"Point\">\n\t\t\t\t\t\t\t\t\t\t{friend.value}\n\t\t\t\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</List>\n\t\t\t\t</Group>}\n\t\t\t\t{this.state.isLoading && <ScreenSpinner size='large' />}\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Переход на другую панель/представление\n\t\tonNavigate: (activeStory, activePanel, params) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tnavigate(activeStory, activePanel, params).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t),\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React from 'react';\nimport { Panel, List, Cell, Group, ScreenSpinner, Div, FormLayout, File, Button,\n\tAvatar, PanelHeaderSimple, Tabs, TabsItem, PanelHeaderContext, View, Gallery } from '@vkontakte/vkui';\n\nimport { MODAL_REWARD_FOR_UPLOAD } from '../modals/Modal';\n\nimport Api from '../core/api/Api';\n\nimport {getGroupName} from '../components/DangerMeter';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { openModal } from '../redux/actions/modal';\n\nimport Icon24Camera from '@vkontakte/icons/dist/24/camera';\nimport Icon24Chevron from '@vkontakte/icons/dist/24/chevron';\nimport './Dairy.css';\n\nclass Dairy extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n    this.state = {isLoading: true, contextOpened: false, activeTab: 'common'};\n  };\n\n\t// Компонент примонтирован\n\tcomponentDidMount() {\n\t\tthis.props.fetchedUser && this.common();\n\n\t\t// Upload\n\t\tconst input = document.getElementById('upload-input');\n\t\tconst onSelectFile = () => {\n\n\t\t\t/*if(!this.state.self.canUpload) {\n\t\t\t\talert('На данный момент разрешено загружать не более одной фотографии в день.');\n\t\t\t\treturn;\n\t\t\t}*/\n\n\t\t\tthis.setState({isLoading: true});\n\t\t\tApi.upload({route: 'dairy/upload', params: {uid: this.props.fetchedUser.id}, fileInput: input, handler: (self) => {\n\t\t\t\tif(self) {\n\n\t\t\t\t\tif(self.addedValue) {\n\t\t\t\t\t\tthis.props.onOpenModal(MODAL_REWARD_FOR_UPLOAD, {value: self.addedValue});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.setState({isLoading: false, self: self, activeTab: 'self'});\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({isLoading: false});\n\t\t\t\t}\n\t\t\t}});\n\t\t};\n\t\tinput && input.addEventListener('change', onSelectFile, false);\n  };\n\n\tself(page) {\n\t\tpage = page || 1;\n\n\t\tthis.props.fetchedUser && Api.dairy.self(this.props.fetchedUser.id, page, (self) => {\n\t\t\tthis.setState({isLoading: false, self: self});\n\t\t});\n\n\t\tthis.setState({isLoading: true, contextOpened: false, activeTab: 'self'});\n\t}\n\n\tcommon(page) {\n\t\tpage = page || 1;\n\n\t\tApi.dairy.common(this.props.fetchedUser.id, page, (common) => {\n\t\t\tthis.setState({isLoading: false, common: common});\n\t\t});\n\n\t\tthis.setState({isLoading: true, contextOpened: false, activeTab: 'common'});\n\t}\n\n\tlike(photo, index, e) {\n\n\t\tconst button = e.target.tagName === 'BUTTON' ? e.target : e.target.parentNode;\n\n\t\t// Отмена лайка\n\t\tif(photo.liked) {\n\t\t\tApi.dairy.unlike(this.props.fetchedUser.id, photo.id, photo.owner.uid, (result) => {\n\t\t\t\tif(result) {\n\t\t\t\t\tlet newCommon = Object.assign({}, this.state.common);\n\t\t\t\t\tbutton.className = 'DairyPhoto__LikeBtn';\n\t\t\t\t\tnewCommon.photos[index].likes = (photo.likes || 0) - 1;\n\t\t\t\t\tnewCommon.photos[index].liked = false;\n\t\t\t\t\tthis.setState({common: newCommon});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Лайк\n\t\telse {\n\t\t\tApi.dairy.like(this.props.fetchedUser.id, photo.id, photo.owner.uid, (result) => {\n\t\t\t\tif(result) {\n\t\t\t\t\tlet newCommon = Object.assign({}, this.state.common);\n\t\t\t\t\tbutton.className = 'DairyPhoto__LikeBtnActive';\n\t\t\t\t\tnewCommon.photos[index].likes = (photo.likes || 0) + 1;\n\t\t\t\t\tnewCommon.photos[index].liked = true;\n\t\t\t\t\tthis.setState({common: newCommon});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeaderSimple\n          left={this.props.fetchedUser && <FormLayout action={Api.getDomain('dairy/upload?uid='+this.props.fetchedUser.id)} id=\"upload-form\" className=\"UploadFrom\">\n\t\t        <File size=\"l\" id=\"upload-input\"><Icon24Camera /></File>\n\t\t\t\t\t\t<Button mode=\"outline\" before={<Icon24Chevron />} onClick={() => { this.state.activeTab === 'common' ? this.self() : this.common() }}>\n\t\t\t\t\t\t\t{this.state.activeTab === 'common' ? 'Открыть свой' : 'Открыть общий'}\n\t\t\t\t\t\t</Button>\n\t\t      </FormLayout>}\n          separator={false}\n        >\n        </PanelHeaderSimple>\n\n\t\t\t\t{!this.state.isLoading && <View id=\"tabs-view\" activePanel={this.state.activeTab} header={false}>\n\t\t\t\t\t<Panel id=\"self\">\n\t\t\t\t\t\t{this.state.self && <Group>\n\t\t\t\t      <List className=\"DairyList\">\n\t\t\t\t\t\t\t\t{this.state.self.photos.length === 0 && <Div className=\"DairyDescription\">\n\t\t\t\t\t\t\t\t\tА как вы проводите время в самоизоляции?\n\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\tДобавляйте ежедневное фото, в свой дневник, чтобы запечатлеть хронологию этих странных дней, а также  получить бонусные очки и доступ к просмотру дневников со всей страны!\n\t\t\t\t\t\t\t\t\t<br /><br />\n\t\t\t\t\t\t\t\t\tЧем интереснее ваше фото окажется для других пользователей, тем больше баллов вам будет начислено.\n\t\t\t\t\t\t\t\t</Div>}\n\t\t\t\t\t\t\t\t{this.state.self.photos.length > 0 && this.state.self.photos.map((photo, index) => {\n\t\t              return (\n\t\t\t\t\t\t\t\t\t\t<Cell key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto__Header\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{photo.date}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Gallery>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"img-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img src={photo.link} alt={index} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"DairyPhoto__LikeBtn\" disabled=\"disabled\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto__LikeBtnCounter\">x {photo.likes || 0}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t              </Gallery>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\n\t\t\t\t\t\t\t{this.state.self.pagination.count > 1 && <Cell key=\"pagination\"\n\t\t\t\t\t\t\t\tbefore={this.state.self.pagination.current > 1 ?\n\t\t\t\t\t\t\t\t\t<Button onClick={() => this.self(this.state.self.pagination.current - 1)}>Назад</Button> : false}\n\t\t\t\t\t\t\t\tindicator={this.state.self.pagination.current < this.state.self.pagination.count ?\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" onClick={() => this.self(this.state.self.pagination.current + 1)}>Далее</Button> : false}\n\t\t\t\t\t\t\t/>}\n\n\t\t\t\t\t\t</Group>}\n\t\t\t\t\t</Panel>\n\n\t\t\t\t\t<Panel id=\"common\">\n\t\t\t\t\t\t{this.state.common && <Group>\n\t\t\t\t      <List className=\"DairyList\">\n\t\t\t\t\t\t\t\t{this.state.common.photos.map((photo, index) => {\n\t\t              return (\n\t\t\t\t\t\t\t\t\t\t<Cell key={index}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto__Header\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{photo.owner.first_name + ' ' + photo.owner.last_name}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<Gallery>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"img-wrap\">\n\t\t\t\t\t\t                <img src={photo.link} alt={index} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar src={photo.owner.photo_200} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className={photo.liked ? 'DairyPhoto__LikeBtnActive' : 'DairyPhoto__LikeBtn'} onClick={(e) => this.like(photo, index, e)}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"DairyPhoto__LikeBtnCounter\">x {photo.likes || 0}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t              </Gallery>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</List>\n\n\t\t\t\t\t\t\t{this.state.common.pagination.count > 1 && <Cell key=\"pagination\"\n\t\t\t\t\t\t\t\tbefore={this.state.common.pagination.current > 1 ?\n\t\t\t\t\t\t\t\t\t<Button onClick={() => this.common(this.state.common.pagination.current - 1)}>Назад</Button> : false}\n\t\t\t\t\t\t\t\tindicator={this.state.common.pagination.current < this.state.common.pagination.count ?\n\t\t\t\t\t\t\t\t\t<Button size=\"l\" onClick={() => this.common(this.state.common.pagination.current + 1)}>Далее</Button> : false}\n\t\t\t\t\t\t\t/>}\n\n\t\t\t\t\t\t</Group>}\n\t\t\t\t\t</Panel>\n\t\t\t\t</View>}\n\n\t\t\t\t{this.state.isLoading && <ScreenSpinner size='large' />}\n\t\t\t</Panel>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\t// Открывает модальное окно\n\t\tonOpenModal: (activeModal, modalParams) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\topenModal(activeModal, modalParams).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dairy);\n","/**\n * Компонент навигации\n * @type {Object}\n */\n\nimport React from 'react';\nimport { Epic, Tabbar, TabbarItem, View, Panel } from '@vkontakte/vkui';\n\nimport Begin from '../panels/Begin';\n//import Map from '../panels/Map';\nimport Level from '../panels/Level';\nimport Rating from '../panels/Rating';\nimport Dairy from '../panels/Dairy';\n\nimport Modal from '../modals/Modal';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { navigate } from '../redux/actions/navigation';\n\nimport Icon28NameTagOutline from '@vkontakte/icons/dist/28/name_tag_outline';\nimport Icon28NewsfeedOutline from '@vkontakte/icons/dist/28/newsfeed_outline';\nimport Icon28GraphOutline from '@vkontakte/icons/dist/28/graph_outline';\n\nclass EpicBar extends React.Component {\n  constructor (props) {\n    super(props);\n  }\n\n  render () {\n\n    return (\n      <Epic activeStory={this.props.activeStory} tabbar={\n        this.props.activePanel !== 'begin' && <Tabbar>\n          <TabbarItem\n            onClick={this.props.onNavigate}\n            selected={this.props.activeStory === 'level'}\n            data-story=\"level\"\n            text=\"Прогресс\"\n          ><Icon28NameTagOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.props.onNavigate}\n            selected={this.props.activeStory === 'dairy'}\n            data-story=\"dairy\"\n            text=\"Дневник\"\n          ><Icon28NewsfeedOutline /></TabbarItem>\n          <TabbarItem\n            onClick={this.props.onNavigate}\n            selected={this.props.activeStory === 'rating'}\n            data-story=\"rating\"\n            text=\"Рейтинг\"\n          ><Icon28GraphOutline /></TabbarItem>\n        </Tabbar>\n      }>\n        <View id=\"level\" activePanel={this.props.activePanel} header={false} modal={<Modal permission={this.props.permission} />}>\n          <Level id='level' fetchedUser={this.props.user} permission={this.props.permission} />\n          <Begin id='begin' permission={this.props.permission} />\n          {/*<Map id='map' />*/}\n        </View>\n        <View id=\"dairy\" activePanel={this.props.activePanel} header={false} modal={<Modal permission={this.props.permission} />}>\n          <Dairy id='dairy' fetchedUser={this.props.user} />\n        </View>\n        <View id=\"rating\" activePanel={this.props.activePanel} header={false} modal={<Modal permission={this.props.permission} />}>\n          <Rating id='rating' />\n        </View>\n      </Epic>\n    )\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  return state.navigation ? {\n    activeStory: state.navigation.activeStory,\n    activePanel: state.navigation.activePanel,\n    params: state.navigation.params\n  } : {};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonNavigate: (activeStory, activePanel, params) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tnavigate(activeStory, activePanel, params).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EpicBar);\n","import React from 'react';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport bridge from '@vkontakte/vk-bridge';\nimport Api from './core/api/Api';\n\n// Redux\nimport { connect } from 'react-redux';\nimport { updateLevel } from './redux/actions/level';\nimport { navigate } from './redux/actions/navigation';\nimport { openModal } from './redux/actions/modal';\nimport { updatePermission } from './redux/actions/permissions';\n\nimport EpicBar from './components/EpicBar';\nimport { MODAL_NOT_ALLOW_MESSAGES, MODAL_NOT_ALLOW_LOCATION } from './modals/Modal';\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n    super(props);\n\n    this.state = {\n\t\t\tuser: null,\n\t\t\tlocationPermissionCount: 0\n\t\t};\n\n\t\tthis.setUser = (user) => {\n\t\t\tthis.setState({user: user});\n\t\t};\n\n\t\tthis.begin = (geodata) => {\n\t\t\tlet body = Object.assign({}, this.state.user);\n\n\t\t\tif(geodata) {\n\t\t\t\tObject.assign(body, {lat: geodata.lat, long: geodata.long})\n\t\t\t}\n\n\t\t\tApi.home.begin(body, (result) => {\n\t\t\t\tif(result) {\n\t\t\t\t\tthis.props.onLevelUpdate(result).then(() => {\n\t\t\t\t\t\tthis.props.onNavigate('level');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/** Запрос разрешений */\n\t\tthis.permission = () => {\n\t\t\t// Закрываем модальное окно (если открыто)\n\t\t\tthis.props.onOpenModal(null);\n\n\t\t\tbridge.send(\"VKWebAppAllowMessagesFromGroup\", {group_id: 194414850})\n\t\t\t\t.then(data => {\n\n\t\t\t\t\t// Доступ уже мог быть разрешен\n\t\t\t\t\t// На мобиле доступ каждый раз запрашивается заново, поэтому запоминаем разрешение\n\t\t\t\t\t(this.props.permissions && this.props.permissions.geodata && this.props.permissions.geodata.available ?\n\t\t\t\t\t\t\tnew Promise((resolve, reject) => {resolve(this.props.permissions.geodata)}) :\n\t\t\t\t\t\t\tbridge.send(\"VKWebAppGetGeodata\", {})\n\t\t\t\t\t)\n\t\t\t\t\t\t.then((geodata) => {\n\t\t\t\t\t\t\tthis.props.onUpdatePermission({geodata: geodata});\n\t\t\t\t\t\t\tif(geodata.available) {\n\t\t\t\t\t\t\t\tthis.begin(geodata);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// Не разрешил доступ к геоданным\n\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\tthis.props.onUpdatePermission({geodata: false});\n\t\t\t\t\t\t\tconst locationPermissionCount = this.state.locationPermissionCount + 1;\n\t\t\t\t\t\t\tthis.setState({locationPermissionCount: locationPermissionCount});\n\n\t\t\t\t\t\t\tif(locationPermissionCount > 1) {\n\t\t\t\t\t\t\t\tthis.begin();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_LOCATION);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t// Не разрешил отправлять сообщения\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.props.onOpenModal(MODAL_NOT_ALLOW_MESSAGES);\n\t\t\t\t});\n\t\t};\n  }\n\n\tcomponentDidMount() {\n\t\tconst this_ = this;\n\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tthis_.setUser(user);\n\n\t\t\tconst level = await Api.home.level(user.id);\n\t\t\tif(level) {\n\t\t\t\tthis_.props.onLevelUpdate(level).then(() => {this_.permission()});\n\t\t\t} else {\n\t\t\t\tthis_.props.onNavigate('level', 'begin');\n\t\t\t}\n\t\t}\n\t\tfetchData();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<EpicBar user={this.state.user} permission={this.permission} />\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\treturn {\n\t\tpermissions: state.permissions ? state.permissions.permissions : null\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonLevelUpdate: (level) =>\n\t\t\tnew Promise((resolve) =>\n\t\t\t\tupdateLevel(level).then((action) => {\n\t\t\t\t\tdispatch(action);\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t),\n\t\tonNavigate: (activeStory, activePanel, params) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tnavigate(activeStory, activePanel, params).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t),\n\t\tonOpenModal: (activeModal) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\topenModal(activeModal).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t),\n\t\tonUpdatePermission: (permission) =>\n\t\t\t\tnew Promise((resolve) =>\n\t\t\t\t\tupdatePermission(permission).then((action) => {\n\t\t\t\t\t\tdispatch(action);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t})\n\t\t\t\t)\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","/**\n * Действия связанные с разрешениями\n */\n\n/**\n * Обновление разрешения\n *\n * @param  {Object} permission\n * @return {Promise}\n */\nexport const updatePermission = (permission) => {\n  return new Promise((resolve, reject) => {\n      resolve({\n        type: 'PERMISSION_UPDATE',\n        permission: permission\n      });\n  });\n};\n","/**\n * Комбинаяия редукторов\n */\nimport { combineReducers } from 'redux';\nimport level from './level';\nimport navigation from './navigation';\nimport modal from './modal';\nimport permissions from './permissions';\n\nconst appReducer = combineReducers({\n    navigation,\n    modal,\n    level,\n    permissions\n});\n\nconst rootReducer = (state, action) => {\n  // При разлогиневании пользователя стираем все состояние\n  /*if (action.type === 'LOGOUT') {\n    state = undefined\n  }*/\n\n  return appReducer(state, action)\n}\n\nexport default rootReducer;\n","/**\n * Редуктор навигации\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Сменить активный экран\n    case 'NAVIGATE':\n      return Object.assign({}, state, {activeStory: action.activeStory, activePanel: action.activePanel, params: action.params});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор модальных окон\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Открыть модальное окно\n    case 'MODAL_OPEN':\n      return Object.assign({}, state, {activeModal: action.activeModal, modalParams: action.modalParams});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор балов\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Обновление уровня\n    case 'LEVEL_UPDATE':\n      return Object.assign({}, state, {level: action.level});\n\n    default:\n      return state;\n    }\n}\n","/**\n * Редуктор разрешений\n */\n\nexport default function reducer(state = null, action) {\n  switch (action.type) {\n    // Обновление разрешения\n    case 'PERMISSION_UPDATE':\n      return Object.assign({}, state, {\n        permissions: Object.assign({}, state, action.permission)\n      });\n\n    default:\n      return state;\n    }\n}\n","/**\n * Определение хранилища состояния приложения\n * Работает через Redux Persist (хранит состояние в AsyncStorage)\n */\nimport { createStore } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\n// defaults to localStorage for web and AsyncStorage for react-native\nimport storage from 'redux-persist/lib/storage';\n\nimport rootReducer from './reducers';\n\nconst persistConfig = {\n  key: 'root',\n  storage\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = createStore(persistedReducer);\n\nexport const persistor = persistStore(store);\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Всё для управления и хранения состояния приложения (Redux)\nimport { Provider } from 'react-redux';\nimport { store, persistor } from './redux/index';\nimport { PersistGate } from 'redux-persist/integration/react';\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <App />\n    </PersistGate>\n  </Provider>, document.getElementById(\"root\")\n);\n\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(eruda => {}); //runtime download\n}\n"],"sourceRoot":""}