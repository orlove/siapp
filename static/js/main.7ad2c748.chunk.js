(this.webpackJsonpsiapp=this.webpackJsonpsiapp||[]).push([[0],{176:function(e,t,n){e.exports=n(282)},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);n(177),n(203),n(205),n(206),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(226),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245);var a=n(0),r=n.n(a),c=n(35),l=n.n(c),i=n(17),o=n.n(i),s=n(43),u=n.n(s),h=n(52),d=n(28),m=n(29),f=n(33),p=n(32),v=n(116),b=n.n(v),E=n(3),g=(n(265),n(110)),j=n.n(g),O=n(111),k=n.n(O),y=n(112),C=n.n(y),_={home:{begin:function(e,t){return _.post({method:"home/begin",body:e,handler:t})},level:function(e,t){return _.request({method:"home/level?uid="+e,handler:t})},confirm:function(e,t,n,a){return _.request({method:"home/confirm?uid="+e+"&lat="+t+"&long="+n,handler:a})}}},A=_,U={region:{list:function(e,t){return U.request({method:"region/index?world="+e,handler:t})}}},w=U,M="orlove.github.io"==window.location.host?"https://rest-news.hozya.ru":"https://api.newsapp.me",x={request:function(e){var t=e.method,n=e.params,a=e.tag,r=e.handler,c=e.options;return a&&fetch.abort(a),n=n?"?"+(n=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&")):"",fetch(M+"/"+t+n,c,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},post:function(e){var t=e.method,n=e.body,a=e.tag,r=e.handler,c=e.options;return a&&fetch.abort(a),c=Object.assign({method:"POST",body:JSON.stringify(n)},c||{}),fetch(M+"/"+t,c,a).then((function(e){return e.ok?e.json():(e.text().then((function(t){console.error(e.url,t.substr(-64),e)})),!1)})).then(r).catch((function(e){console.error(e)}))},abort:function(e){fetch.abort(e)}};[A,w].forEach((function(e){x=Object.assign(e,x)}));var L=x,S=n(31),V=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.n,{size:"large"}))}}]),n}(r.a.Component),K=Object(S.b)((function(e,t){return{}}))(V),W=(n(268),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,null,"\u041f\u043e\u0431\u0435\u0434\u0438\u043c \u043a\u043e\u0440\u043e\u043d\u0430\u0432\u0438\u0440\u0443\u0441 \u0432\u043c\u0435\u0441\u0442\u0435!"),r.a.createElement(E.e,null,r.a.createElement(E.d,{className:"Explanation"},"\u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f ",r.a.createElement("b",null,"\u0434\u043e\u043c\u0430"),". \u0414\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0435\u0442 \u0431\u0430\u043b\u044b \u0437\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043e\u043c\u0430. \u0414\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u043b\u0438\u0447\u043d\u044b\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u043c! \u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043d\u044f\u0442\u0438\u044f \u0443\u0447\u0430\u0441\u0442\u0438\u044f, \u043d\u0430\u0448\u0430 \u0433\u0440\u0443\u043f\u043f\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f. \u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0438 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0442\u043e, \u0447\u0442\u043e \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0434\u043e\u043c\u0430 (\u0443 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0432\u0430\u0448\u0435\u043c\u0443 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e)."),r.a.createElement(E.d,null,r.a.createElement(E.b,{size:"xl",level:"2",onClick:function(){e.props.start()}},"\u0421\u0435\u0439\u0447\u0430\u0441 \u044f \u0434\u043e\u043c\u0430, \u043d\u0430\u0447\u0430\u0442\u044c!"))))}}]),n}(r.a.Component)),G=Object(S.b)((function(e,t){return{}}))(W),I=(n(269),function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={level:e.level},a}return Object(m.a)(n,[{key:"confirm",value:function(){var e=this;o.a.send("VKWebAppGetGeodata",{}).then((function(t){L.home.confirm(e.props.fetchedUser.id,t.lat,t.long,(function(t){e.setState({level:t})}))}))}},{key:"statusOfCheck",value:function(e){switch(e.status){case 1:return"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e";case 2:return"\u041d\u0435 \u0434\u043e\u043c\u0430";case 4:return"\u041f\u043e\u0437\u0434\u043d\u043e";case 8:return"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e \u043c\u0435\u0441\u0442\u043e\u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0438";default:return"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e"}}},{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),this.props.fetchedUser&&r.a.createElement(E.e,null,r.a.createElement(E.h,{className:"RatingList"},r.a.createElement(E.c,null,r.a.createElement(E.d,null),r.a.createElement(E.d,null,"\u0423\u0440\u043e\u0432\u0435\u043d\u044c")),r.a.createElement(E.c,{before:this.props.fetchedUser.photo_200?r.a.createElement(E.a,{src:this.props.fetchedUser.photo_200}):null,description:this.props.fetchedUser.city&&this.props.fetchedUser.city.title?this.props.fetchedUser.city.title:""},r.a.createElement(E.d,null,"".concat(this.props.fetchedUser.first_name," ").concat(this.props.fetchedUser.last_name)),r.a.createElement(E.d,null,this.state.level?this.state.level.value:"-")))),this.state.level&&this.state.level.checks&&r.a.createElement(E.e,null,!this.state.level.checks[0].confirmed&&r.a.createElement(E.d,null,r.a.createElement(E.b,{size:"xl",mode:"commerce",onClick:function(){e.confirm()}},"\u042f \u0434\u043e\u043c\u0430")),r.a.createElement(E.f,null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438"),r.a.createElement(E.h,{className:"RatingList"},r.a.createElement(E.c,null,r.a.createElement(E.d,null,"\u0412\u0440\u0435\u043c\u044f"),r.a.createElement(E.d,null,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),r.a.createElement(E.d,null,"\u0411\u0430\u043b\u043b\u044b")),this.state.level.checks.map((function(t){return r.a.createElement(E.c,{key:"check_"+t.check_id},r.a.createElement(E.d,null,t.sended),r.a.createElement(E.d,null,e.statusOfCheck(t)),r.a.createElement(E.d,null,t.value))})))))}}]),n}(r.a.Component)),P=Object(S.b)((function(e,t){return{}}))(I),N=n(114),z=n.n(N),R=n(115),T=n.n(R),q=(n(270),Object(E.o)()),D=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).select=function(e){},a.state={isLoading:!0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;function t(){return(t=Object(h.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.send("VKWebAppGetAuthToken",{app_id:7405679,scope:"friends"});case 2:return n=t.sent,t.next=5,o.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{fields:"photo_200_orig",access_token:n.access_token,v:"5.103"}});case 5:a=t.sent,e.setState({isLoading:!1,friends:a.response.items});case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}},{key:"render",value:function(){var e=this;return r.a.createElement(E.k,{id:this.props.id},r.a.createElement(E.l,{left:r.a.createElement(E.m,{onClick:function(){e.props.navigate("home")}},q===E.g?r.a.createElement(z.a,null):r.a.createElement(T.a,null))},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u043e \u0440\u0435\u0433\u0438\u043e\u043d\u0430\u043c"),!this.state.isLoading&&r.a.createElement(E.e,null,r.a.createElement(E.h,{className:"RatingList"},r.a.createElement(E.c,{expandable:!0},r.a.createElement(E.d,null),r.a.createElement(E.d,null,"\u0411\u0430\u043b\u043b\u044b")),this.state.friends.map((function(e){return r.a.createElement(E.c,{key:"friend_"+e.id,before:e.photo_200_orig?r.a.createElement(E.a,{src:e.photo_200_orig}):null,expandable:!0,onClick:function(){}},r.a.createElement(E.d,null,"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(E.d,null,Math.round(100*Math.random())))})))),this.state.isLoading&&r.a.createElement(E.n,{size:"large"}))}}]),n}(r.a.Component),J=Object(S.b)((function(e,t){return{}}),(function(e){return{}}))(D),B=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={activeModal:null,activePanel:"home",user:null,level:null},a.navigate=function(e,t){a.setState({activePanel:e.currentTarget?e.currentTarget.dataset.to:e})},a.setUser=function(e){a.setState({user:e})},a.setLevel=function(e){a.setState({level:e})},a.modalClose=function(){a.setState({activeModal:null})},a.begin=function(){a.modalClose(),o.a.send("VKWebAppAllowMessagesFromGroup",{group_id:193696611}).then((function(e){o.a.send("VKWebAppGetGeodata",{}).then((function(e){e.available&&L.home.begin(Object.assign({},a.state.user,{lat:e.lat,long:e.long}),(function(e){e&&a.navigate("level")}))})).catch((function(){a.setActiveModal("not-allow-location")}))})).catch((function(){a.setActiveModal("not-allow-messages")}))},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;function t(){return(t=Object(h.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.send("VKWebAppGetUserInfo");case 2:return n=t.sent,e.setUser(n),t.next=6,L.home.level(n.id);case 6:(a=t.sent)?(e.setLevel(a),e.navigate("level")):e.navigate("begin");case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.a.subscribe((function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){t.apply(this,arguments)}()}},{key:"setActiveModal",value:function(e){this.setState({activeModal:e||null})}},{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{activePanel:this.state.activePanel,modal:r.a.createElement(E.j,{activeModal:this.state.activeModal,onClose:this.modalBack},r.a.createElement(E.i,{id:"before-begin",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(j.a,null),header:"\u0412\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0447\u0442\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0434\u043e\u043c\u0430?",caption:r.a.createElement("p",null,"\u0411\u0430\u043b\u043b\u044b \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0442\u0430\u043c, \u0433\u0434\u0435 \u0432\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0435\u0441\u044c \u0441\u0435\u0439\u0447\u0430\u0441.",r.a.createElement("br",null),"\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0438."),actions:[{title:"\u0414\u0430, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u044e",mode:"primary",action:this.begin}]}),r.a.createElement(E.i,{id:"not-allow-location",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(C.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u0438",caption:"\u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0431\u0430\u043b\u043b\u044b",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:this.begin}]}),r.a.createElement(E.i,{id:"not-allow-messages",onClose:function(){return e.setActiveModal(null)},icon:r.a.createElement(k.a,null),header:"\u0412\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",caption:"\u0411\u0435\u0437 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0441\u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u0430\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f.",actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",mode:"primary",action:this.begin}]}))},r.a.createElement(K,{id:"home",fetchedUser:this.state.user,navigate:this.navigate}),r.a.createElement(G,{id:"begin",fetchedUser:this.state.user,navigate:this.navigate,start:function(){e.setActiveModal("before-begin")}}),r.a.createElement(P,{id:"level",fetchedUser:this.state.user,navigate:this.navigate,level:this.state.level}),r.a.createElement(J,{id:"rating",navigate:this.navigate}))}}]),n}(r.a.Component),F=n(30),H=n(69),Q=n(117),X=n.n(Q);var Y=Object(F.b)({level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LEVEL_UPDATE":return Object.assign({},e,{level:t.level});default:return e}}}),Z=function(e,t){return Y(e,t)},$={key:"root",storage:X.a},ee=Object(H.a)($,Z),te=Object(F.c)(ee),ne=Object(H.b)(te),ae=n(118);o.a.send("VKWebAppInit"),l.a.render(r.a.createElement(S.a,{store:te},r.a.createElement(ae.a,{loading:null,persistor:ne},r.a.createElement(B,null))),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.7ad2c748.chunk.js.map